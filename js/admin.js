!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=!!e&&"length"in e&&e.length,i=oe.type(e);return"function"!==i&&!oe.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function n(e,t,i){if(oe.isFunction(t))return oe.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return oe.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(me.test(t))return oe.filter(t,e,i);t=oe.filter(t,e)}return oe.grep(e,function(e){return Z.call(t,e)>-1!==i})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return oe.each(e.match(we)||[],function(e,i){t[i]=!0}),t}function s(){Q.removeEventListener("DOMContentLoaded",s),e.removeEventListener("load",s),oe.ready()}function a(){this.expando=oe.expando+a.uid++}function l(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Ne,"-$&").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:Se.test(i)?oe.parseJSON(i):i)}catch(r){}ke.set(e,t,i)}else i=void 0;return i}function u(e,t,i,n){var r,o=1,s=20,a=n?function(){return n.cur()}:function(){return oe.css(e,t,"")},l=a(),u=i&&i[3]||(oe.cssNumber[t]?"":"px"),d=(oe.cssNumber[t]||"px"!==u&&+l)&&je.exec(oe.css(e,t));if(d&&d[3]!==u){u=u||d[3],i=i||[],d=+l||1;do o=o||".5",d/=o,oe.style(e,t,d+u);while(o!==(o=a()/l)&&1!==o&&--s)}return i&&(d=+d||+l||0,r=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=u,n.start=d,n.end=r)),r}function d(e,t){var i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],i):i}function h(e,t){for(var i=0,n=e.length;i<n;i++)Te.set(e[i],"globalEval",!t||Te.get(t[i],"globalEval"))}function c(e,t,i,n,r){for(var o,s,a,l,u,c,p=t.createDocumentFragment(),f=[],m=0,g=e.length;m<g;m++)if(o=e[m],o||0===o)if("object"===oe.type(o))oe.merge(f,o.nodeType?[o]:o);else if(Me.test(o)){for(s=s||p.appendChild(t.createElement("div")),a=(Le.exec(o)||["",""])[1].toLowerCase(),l=Pe[a]||Pe._default,s.innerHTML=l[1]+oe.htmlPrefilter(o)+l[2],c=l[0];c--;)s=s.lastChild;oe.merge(f,s.childNodes),s=p.firstChild,s.textContent=""}else f.push(t.createTextNode(o));for(p.textContent="",m=0;o=f[m++];)if(n&&oe.inArray(o,n)>-1)r&&r.push(o);else if(u=oe.contains(o.ownerDocument,o),s=d(p.appendChild(o),"script"),u&&h(s),i)for(c=0;o=s[c++];)De.test(o.type||"")&&i.push(o);return p}function p(){return!0}function f(){return!1}function m(){try{return Q.activeElement}catch(e){}}function g(e,t,i,n,r,o){var s,a;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(a in t)g(e,a,i,n,t[a],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),r===!1)r=f;else if(!r)return e;return 1===o&&(s=r,r=function(e){return oe().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,r,n,i)})}function v(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function y(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function b(e){var t=We.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){var i,n,r,o,s,a,l,u;if(1===t.nodeType){if(Te.hasData(e)&&(o=Te.access(e),s=Te.set(t,o),u=o.events)){delete s.handle,s.events={};for(r in u)for(i=0,n=u[r].length;i<n;i++)oe.event.add(t,r,u[r][i])}ke.hasData(e)&&(a=ke.access(e),l=oe.extend({},a),ke.set(t,l))}}function w(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Ie.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function x(e,t,i,n){t=Y.apply([],t);var r,o,s,a,l,u,h=0,p=e.length,f=p-1,m=t[0],g=oe.isFunction(m);if(g||p>1&&"string"==typeof m&&!ne.checkClone&&ze.test(m))return e.each(function(r){var o=e.eq(r);g&&(t[0]=m.call(this,r,o.html())),x(o,t,i,n)});if(p&&(r=c(t,e[0].ownerDocument,!1,e,n),o=r.firstChild,1===r.childNodes.length&&(r=o),o||n)){for(s=oe.map(d(r,"script"),y),a=s.length;h<p;h++)l=r,h!==f&&(l=oe.clone(l,!0,!0),a&&oe.merge(s,d(l,"script"))),i.call(e[h],l,h);if(a)for(u=s[s.length-1].ownerDocument,oe.map(s,b),h=0;h<a;h++)l=s[h],De.test(l.type||"")&&!Te.access(l,"globalEval")&&oe.contains(u,l)&&(l.src?oe._evalUrl&&oe._evalUrl(l.src):oe.globalEval(l.textContent.replace($e,"")))}return e}function C(e,t,i){for(var n,r=t?oe.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||oe.cleanData(d(n)),n.parentNode&&(i&&oe.contains(n.ownerDocument,n)&&h(d(n,"script")),n.parentNode.removeChild(n));return e}function E(e,t){var i=oe(t.createElement(e)).appendTo(t.body),n=oe.css(i[0],"display");return i.detach(),n}function T(e){var t=Q,i=Je[e];return i||(i=E(e,t),"none"!==i&&i||(Ue=(Ue||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ue[0].contentDocument,t.write(),t.close(),i=E(e,t),Ue.detach()),Je[e]=i),i}function k(e,t,i){var n,r,o,s,a=e.style;return i=i||Ge(e),s=i?i.getPropertyValue(t)||i[t]:void 0,""!==s&&void 0!==s||oe.contains(e.ownerDocument,e)||(s=oe.style(e,t)),i&&!ne.pixelMarginRight()&&Qe.test(s)&&Xe.test(t)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o),void 0!==s?s+"":s}function S(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function N(e){if(e in nt)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=it.length;i--;)if(e=it[i]+t,e in nt)return e}function A(e,t,i){var n=je.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function j(e,t,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===i&&(s+=oe.css(e,i+Oe[o],!0,r)),n?("content"===i&&(s-=oe.css(e,"padding"+Oe[o],!0,r)),"margin"!==i&&(s-=oe.css(e,"border"+Oe[o]+"Width",!0,r))):(s+=oe.css(e,"padding"+Oe[o],!0,r),"padding"!==i&&(s+=oe.css(e,"border"+Oe[o]+"Width",!0,r)));return s}function O(e,t,i){var n=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Ge(e),s="border-box"===oe.css(e,"boxSizing",!1,o);if(r<=0||null==r){if(r=k(e,t,o),(r<0||null==r)&&(r=e.style[t]),Qe.test(r))return r;n=s&&(ne.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+j(e,t,i||(s?"border":"content"),n,o)+"px"}function H(e,t){for(var i,n,r,o=[],s=0,a=e.length;s<a;s++)n=e[s],n.style&&(o[s]=Te.get(n,"olddisplay"),i=n.style.display,t?(o[s]||"none"!==i||(n.style.display=""),""===n.style.display&&He(n)&&(o[s]=Te.access(n,"olddisplay",T(n.nodeName)))):(r=He(n),"none"===i&&r||Te.set(n,"olddisplay",r?i:oe.css(n,"display"))));for(s=0;s<a;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?o[s]||"":"none"));return e}function I(e,t,i,n,r){return new I.prototype.init(e,t,i,n,r)}function L(){return e.setTimeout(function(){rt=void 0}),rt=oe.now()}function D(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)i=Oe[n],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function P(e,t,i){for(var n,r=(R.tweeners[t]||[]).concat(R.tweeners["*"]),o=0,s=r.length;o<s;o++)if(n=r[o].call(i,t,e))return n}function M(e,t,i){var n,r,o,s,a,l,u,d,h=this,c={},p=e.style,f=e.nodeType&&He(e),m=Te.get(e,"fxshow");i.queue||(a=oe._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,oe.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],u=oe.css(e,"display"),d="none"===u?Te.get(e,"olddisplay")||T(e.nodeName):u,"inline"===d&&"none"===oe.css(e,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],st.exec(r)){if(delete t[n],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}c[n]=m&&m[n]||oe.style(e,n)}else u=void 0;if(oe.isEmptyObject(c))"inline"===("none"===u?T(e.nodeName):u)&&(p.display=u);else{m?"hidden"in m&&(f=m.hidden):m=Te.access(e,"fxshow",{}),o&&(m.hidden=!f),f?oe(e).show():h.done(function(){oe(e).hide()}),h.done(function(){var t;Te.remove(e,"fxshow");for(t in c)oe.style(e,t,c[t])});for(n in c)s=P(f?m[n]:0,n,h),n in m||(m[n]=s.start,f&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function B(e,t){var i,n,r,o,s;for(i in e)if(n=oe.camelCase(i),r=t[n],o=e[i],oe.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),s=oe.cssHooks[n],s&&"expand"in s){o=s.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=r)}else t[n]=r}function R(e,t,i){var n,r,o=0,s=R.prefilters.length,a=oe.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=rt||L(),i=Math.max(0,u.startTime+u.duration-t),n=i/u.duration||0,o=1-n,s=0,l=u.tweens.length;s<l;s++)u.tweens[s].run(o);return a.notifyWith(e,[u,o,i]),o<1&&l?i:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},i),originalProperties:t,originalOptions:i,startTime:rt||L(),duration:i.duration,tweens:[],createTween:function(t,i){var n=oe.Tween(e,u.opts,t,i,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var i=0,n=t?u.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)u.tweens[i].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),d=u.props;for(B(d,u.opts.specialEasing);o<s;o++)if(n=R.prefilters[o].call(u,e,d,u.opts))return oe.isFunction(n.stop)&&(oe._queueHooks(u.elem,u.opts.queue).stop=oe.proxy(n.stop,n)),n;return oe.map(d,P,u),oe.isFunction(u.opts.start)&&u.opts.start.call(e,u),oe.fx.timer(oe.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function F(e){return e.getAttribute&&e.getAttribute("class")||""}function V(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,o=t.toLowerCase().match(we)||[];if(oe.isFunction(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function q(e,t,i,n){function r(a){var l;return o[a]=!0,oe.each(e[a]||[],function(e,a){var u=a(t,i,n);return"string"!=typeof u||s||o[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var o={},s=e===kt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function z(e,t){var i,n,r=oe.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&oe.extend(!0,e,n),e}function W(e,t,i){for(var n,r,o,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}s||(s=r)}o=o||s}if(o)return o!==l[0]&&l.unshift(o),i[o]}function $(e,t,i,n){var r,o,s,a,l,u={},d=e.dataTypes.slice();if(d[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(o=d.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=d.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=u[l+" "+o]||u["* "+o],!s)for(r in u)if(a=r.split(" "),a[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[r]:u[r]!==!0&&(o=a[0],d.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function U(e,t,i,n){var r;if(oe.isArray(t))oe.each(t,function(t,r){i||jt.test(e)?n(e,r):U(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,i,n)});else if(i||"object"!==oe.type(t))n(e,t);else for(r in t)U(e+"["+r+"]",t[r],i,n)}function J(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var X=[],Q=e.document,G=X.slice,Y=X.concat,K=X.push,Z=X.indexOf,ee={},te=ee.toString,ie=ee.hasOwnProperty,ne={},re="2.2.4",oe=function(e,t){return new oe.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,le=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:re,constructor:oe,selector:"",length:0,toArray:function(){return G.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:G.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return oe.each(this,e)},map:function(e){return this.pushStack(oe.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:X.sort,splice:X.splice},oe.extend=oe.fn.extend=function(){var e,t,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||oe.isFunction(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)i=s[t],n=e[t],s!==n&&(u&&n&&(oe.isPlainObject(n)||(r=oe.isArray(n)))?(r?(r=!1,o=i&&oe.isArray(i)?i:[]):o=i&&oe.isPlainObject(i)?i:{},s[t]=oe.extend(u,o,n)):void 0!==n&&(s[t]=n));return s},oe.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!oe.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;if(e.constructor&&!ie.call(e,"constructor")&&!ie.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ie.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=oe.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(ae,"ms-").replace(le,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(i(e))for(n=e.length;r<n&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?oe.merge(n,"string"==typeof e?[e]:e):K.call(n,e)),n},inArray:function(e,t,i){return null==t?-1:Z.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n,r=[],o=0,s=e.length,a=!i;o<s;o++)n=!t(e[o],o),n!==a&&r.push(e[o]);return r},map:function(e,t,n){var r,o,s=0,a=[];if(i(e))for(r=e.length;s<r;s++)o=t(e[s],s,n),null!=o&&a.push(o);else for(s in e)o=t(e[s],s,n),null!=o&&a.push(o);return Y.apply([],a)},guid:1,proxy:function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),oe.isFunction(e))return n=G.call(arguments,2),r=function(){return e.apply(t||this,n.concat(G.call(arguments)))},r.guid=e.guid=e.guid||oe.guid++,r},now:Date.now,support:ne}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=X[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var de=function(e){function t(e,t,i,n){var r,o,s,a,l,u,h,p,f=t&&t.ownerDocument,m=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return i;if(!n&&((t?t.ownerDocument||t:F)!==H&&O(t),t=t||H,L)){if(11!==m&&(u=ve.exec(e)))if(r=u[1]){if(9===m){if(!(s=t.getElementById(r)))return i;if(s.id===r)return i.push(s),i}else if(f&&(s=f.getElementById(r))&&B(t,s)&&s.id===r)return i.push(s),i}else{if(u[2])return K.apply(i,t.getElementsByTagName(e)),i;if((r=u[3])&&w.getElementsByClassName&&t.getElementsByClassName)return K.apply(i,t.getElementsByClassName(r)),i}if(w.qsa&&!$[e+" "]&&(!D||!D.test(e))){if(1!==m)f=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(be,"\\$&"):t.setAttribute("id",a=R),h=T(e),o=h.length,l=ce.test(a)?"#"+a:"[id='"+a+"']";o--;)h[o]=l+" "+c(h[o]);p=h.join(","),f=ye.test(e)&&d(t.parentNode)||t}if(p)try{return K.apply(i,f.querySelectorAll(p)),i}catch(g){}finally{a===R&&t.removeAttribute("id")}}}return S(e.replace(ae,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>x.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[R]=!0,e}function r(e){var t=H.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),n=i.length;n--;)x.attrHandle[i[n]]=t}function s(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function u(e){return n(function(t){return t=+t,n(function(i,n){for(var r,o=e([],i.length,t),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function d(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function c(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,r=i&&"parentNode"===n,o=q++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||r)return e(t,i,o)}:function(t,i,s){var a,l,u,d=[V,o];if(s){for(;t=t[n];)if((1===t.nodeType||r)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||r){if(u=t[R]||(t[R]={}),l=u[t.uniqueID]||(u[t.uniqueID]={}),(a=l[n])&&a[0]===V&&a[1]===o)return d[2]=a[2];if(l[n]=d,d[2]=e(t,i,s))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function m(e,i,n){for(var r=0,o=i.length;r<o;r++)t(e,i[r],n);return n}function g(e,t,i,n,r){for(var o,s=[],a=0,l=e.length,u=null!=t;a<l;a++)(o=e[a])&&(i&&!i(o,n,r)||(s.push(o),u&&t.push(a)));return s}function v(e,t,i,r,o,s){return r&&!r[R]&&(r=v(r)),o&&!o[R]&&(o=v(o,s)),n(function(n,s,a,l){var u,d,h,c=[],p=[],f=s.length,v=n||m(t||"*",a.nodeType?[a]:a,[]),y=!e||!n&&t?v:g(v,c,e,a,l),b=i?o||(n?e:f||r)?[]:s:y;if(i&&i(y,b,a,l),r)for(u=g(b,p),r(u,[],a,l),d=u.length;d--;)(h=u[d])&&(b[p[d]]=!(y[p[d]]=h));if(n){if(o||e){if(o){for(u=[],d=b.length;d--;)(h=b[d])&&u.push(y[d]=h);o(null,b=[],u,l)}for(d=b.length;d--;)(h=b[d])&&(u=o?ee(n,h):c[d])>-1&&(n[u]=!(s[u]=h))}}else b=g(b===s?b.splice(f,b.length):b),o?o(null,s,b,l):K.apply(s,b)})}function y(e){for(var t,i,n,r=e.length,o=x.relative[e[0].type],s=o||x.relative[" "],a=o?1:0,l=p(function(e){return e===t},s,!0),u=p(function(e){return ee(t,e)>-1},s,!0),d=[function(e,i,n){var r=!o&&(n||i!==N)||((t=i).nodeType?l(e,i,n):u(e,i,n));return t=null,r}];a<r;a++)if(i=x.relative[e[a].type])d=[p(f(d),i)];else{if(i=x.filter[e[a].type].apply(null,e[a].matches),i[R]){for(n=++a;n<r&&!x.relative[e[n].type];n++);return v(a>1&&f(d),a>1&&c(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),i,a<n&&y(e.slice(a,n)),n<r&&y(e=e.slice(n)),n<r&&c(e))}d.push(i)}return f(d)}function b(e,i){var r=i.length>0,o=e.length>0,s=function(n,s,a,l,u){var d,h,c,p=0,f="0",m=n&&[],v=[],y=N,b=n||o&&x.find.TAG("*",u),_=V+=null==y?1:Math.random()||.1,w=b.length;for(u&&(N=s===H||s||u);f!==w&&null!=(d=b[f]);f++){if(o&&d){for(h=0,s||d.ownerDocument===H||(O(d),a=!L);c=e[h++];)if(c(d,s||H,a)){l.push(d);break}u&&(V=_)}r&&((d=!c&&d)&&p--,n&&m.push(d))}if(p+=f,r&&f!==p){for(h=0;c=i[h++];)c(m,v,s,a);if(n){if(p>0)for(;f--;)m[f]||v[f]||(v[f]=G.call(l));v=g(v)}K.apply(l,v),u&&!n&&v.length>0&&p+i.length>1&&t.uniqueSort(l)}return u&&(V=_,N=y),m};return r?n(s):s}var _,w,x,C,E,T,k,S,N,A,j,O,H,I,L,D,P,M,B,R="sizzle"+1*new Date,F=e.document,V=0,q=0,z=i(),W=i(),$=i(),U=function(e,t){return e===t&&(j=!0),0},J=1<<31,X={}.hasOwnProperty,Q=[],G=Q.pop,Y=Q.push,K=Q.push,Z=Q.slice,ee=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+ie+"*\\]",oe=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ie+"+","g"),ae=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ue=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),he=new RegExp(oe),ce=new RegExp("^"+ne+"$"),pe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),we=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},xe=function(){O()};try{K.apply(Q=Z.call(F.childNodes),F.childNodes),Q[F.childNodes.length].nodeType}catch(Ce){K={apply:Q.length?function(e,t){Y.apply(e,Z.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}w=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},O=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:F;return n!==H&&9===n.nodeType&&n.documentElement?(H=n,I=H.documentElement,L=!E(H),(i=H.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",xe,!1):i.attachEvent&&i.attachEvent("onunload",xe)),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(H.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ge.test(H.getElementsByClassName),w.getById=r(function(e){return I.appendChild(e).id=R,!H.getElementsByName||!H.getElementsByName(R).length}),w.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var i=t.getElementById(e);return i?[i]:[]}},x.filter.ID=function(e){var t=e.replace(_e,we);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(_e,we);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},x.find.CLASS=w.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&L)return t.getElementsByClassName(e)},P=[],D=[],(w.qsa=ge.test(H.querySelectorAll))&&(r(function(e){I.appendChild(e).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+R+"-]").length||D.push("~="),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+R+"+*").length||D.push(".#.+[+~]")}),r(function(e){var t=H.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(w.matchesSelector=ge.test(M=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(e){w.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),P.push("!=",oe)}),D=D.length&&new RegExp(D.join("|")),P=P.length&&new RegExp(P.join("|")),t=ge.test(I.compareDocumentPosition),B=t||ge.test(I.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return j=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===H||e.ownerDocument===F&&B(F,e)?-1:t===H||t.ownerDocument===F&&B(F,t)?1:A?ee(A,e)-ee(A,t):0:4&i?-1:1)}:function(e,t){if(e===t)return j=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],l=[t];if(!r||!o)return e===H?-1:t===H?1:r?-1:o?1:A?ee(A,e)-ee(A,t):0;if(r===o)return s(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;a[n]===l[n];)n++;return n?s(a[n],l[n]):a[n]===F?-1:l[n]===F?1:0},H):H},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==H&&O(e),i=i.replace(de,"='$1']"),w.matchesSelector&&L&&!$[i+" "]&&(!P||!P.test(i))&&(!D||!D.test(i)))try{var n=M.call(e,i);if(n||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return t(i,H,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==H&&O(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==H&&O(e);var i=x.attrHandle[t.toLowerCase()],n=i&&X.call(x.attrHandle,t.toLowerCase())?i(e,t,!L):void 0;return void 0!==n?n:w.attributes||!L?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(j=!w.detectDuplicates,A=!w.sortStable&&e.slice(0),e.sort(U),j){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return A=null,e},C=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=C(t);return i},x=t.selectors={cacheLength:50,createPseudo:n,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,we),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&he.test(i)&&(t=T(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var o=t.attr(r,e);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(se," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,r){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,l){var u,d,h,c,p,f,m=o!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(g){if(o){for(;m;){for(c=t;c=c[m];)if(a?c.nodeName.toLowerCase()===v:1===c.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(c=g,h=c[R]||(c[R]={}),d=h[c.uniqueID]||(h[c.uniqueID]={}),u=d[e]||[],p=u[0]===V&&u[1],b=p&&u[2],c=p&&g.childNodes[p];c=++p&&c&&c[m]||(b=p=0)||f.pop();)if(1===c.nodeType&&++b&&c===t){d[e]=[V,p,b];break}}else if(y&&(c=t,h=c[R]||(c[R]={}),d=h[c.uniqueID]||(h[c.uniqueID]={}),u=d[e]||[],p=u[0]===V&&u[1],b=p),b===!1)for(;(c=++p&&c&&c[m]||(b=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==v:1!==c.nodeType)||!++b||(y&&(h=c[R]||(c[R]={}),d=h[c.uniqueID]||(h[c.uniqueID]={}),d[e]=[V,b]),c!==t)););return b-=r,b===n||b%n===0&&b/n>=0}}},PSEUDO:function(e,i){var r,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[R]?o(i):o.length>1?(r=[e,e,"",i],x.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=o(e,i),s=r.length;s--;)n=ee(e,r[s]),e[n]=!(t[n]=r[s])}):function(e){return o(e,0,r)}):o}},pseudos:{not:n(function(e){var t=[],i=[],r=k(e.replace(ae,"$1"));return r[R]?n(function(e,t,i,n){for(var o,s=r(e,null,n,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,n,o){return t[0]=e,r(t,null,o,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(_e,we),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:n(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,we).toLowerCase(),function(t){var i;do if(i=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,i){return[i<0?i+t:i]}),even:u(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:u(function(e,t){for(var i=1;i<t;i+=2)e.push(i);
return e}),lt:u(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:u(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},x.pseudos.nth=x.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})x.pseudos[_]=l(_);return h.prototype=x.filters=x.pseudos,x.setFilters=new h,T=t.tokenize=function(e,i){var n,r,o,s,a,l,u,d=W[e+" "];if(d)return i?0:d.slice(0);for(a=e,l=[],u=x.preFilter;a;){n&&!(r=le.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=ue.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(ae," ")}),a=a.slice(n.length));for(s in x.filter)!(r=pe[s].exec(a))||u[s]&&!(r=u[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?t.error(e):W(e,l).slice(0)},k=t.compile=function(e,t){var i,n=[],r=[],o=$[e+" "];if(!o){for(t||(t=T(e)),i=t.length;i--;)o=y(t[i]),o[R]?n.push(o):r.push(o);o=$(e,b(r,n)),o.selector=e}return o},S=t.select=function(e,t,i,n){var r,o,s,a,l,u="function"==typeof e&&e,h=!n&&T(e=u.selector||e);if(i=i||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&L&&x.relative[o[1].type]){if(t=(x.find.ID(s.matches[0].replace(_e,we),t)||[])[0],!t)return i;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=pe.needsContext.test(e)?0:o.length;r--&&(s=o[r],!x.relative[a=s.type]);)if((l=x.find[a])&&(n=l(s.matches[0].replace(_e,we),ye.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(r,1),e=n.length&&c(o),!e)return K.apply(i,n),i;break}}return(u||k(e,h))(n,t,!L,i,!t||ye.test(e)&&d(t.parentNode)||t),i},w.sortStable=R.split("").sort(U).join("")===R,w.detectDuplicates=!!j,O(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(H.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,i){var n;if(!i)return e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);oe.find=de,oe.expr=de.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=de.uniqueSort,oe.text=de.getText,oe.isXMLDoc=de.isXML,oe.contains=de.contains;var he=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&oe(e).is(i))break;n.push(e)}return n},ce=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},pe=oe.expr.match.needsContext,fe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,me=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?oe.find.matchesSelector(n,e)?[n]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,i=this.length,n=[],r=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;t<i;t++)if(oe.contains(r[t],this))return!0}));for(t=0;t<i;t++)oe.find(e,r[t],n);return n=this.pushStack(i>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&pe.test(e)?oe(e):e||[],!1).length}});var ge,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ye=oe.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||ge,"string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ve.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),fe.test(n[1])&&oe.isPlainObject(t))for(n in t)oe.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=Q.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?void 0!==i.ready?i.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))};ye.prototype=oe.fn,ge=oe(Q);var be=/^(?:parents|prev(?:Until|All))/,_e={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,r=this.length,o=[],s=pe.test(e)||"string"!=typeof e?oe(e,t||this.context):0;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&oe.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?oe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?Z.call(oe(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return he(e,"parentNode")},parentsUntil:function(e,t,i){return he(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return he(e,"nextSibling")},prevAll:function(e){return he(e,"previousSibling")},nextUntil:function(e,t,i){return he(e,"nextSibling",i)},prevUntil:function(e,t,i){return he(e,"previousSibling",i)},siblings:function(e){return ce((e.parentNode||{}).firstChild,e)},children:function(e){return ce(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(i,n){var r=oe.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=oe.filter(n,r)),this.length>1&&(_e[e]||oe.uniqueSort(r),be.test(e)&&r.reverse()),this.pushStack(r)}});var we=/\S+/g;oe.Callbacks=function(e){e="string"==typeof e?o(e):oe.extend({},e);var t,i,n,r,s=[],a=[],l=-1,u=function(){for(r=e.once,n=t=!0;a.length;l=-1)for(i=a.shift();++l<s.length;)s[l].apply(i[0],i[1])===!1&&e.stopOnFalse&&(l=s.length,i=!1);e.memory||(i=!1),t=!1,r&&(s=i?[]:"")},d={add:function(){return s&&(i&&!t&&(l=s.length-1,a.push(i)),function n(t){oe.each(t,function(t,i){oe.isFunction(i)?e.unique&&d.has(i)||s.push(i):i&&i.length&&"string"!==oe.type(i)&&n(i)})}(arguments),i&&!t&&u()),this},remove:function(){return oe.each(arguments,function(e,t){for(var i;(i=oe.inArray(t,s,i))>-1;)s.splice(i,1),i<=l&&l--}),this},has:function(e){return e?oe.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=i="",this},disabled:function(){return!s},lock:function(){return r=a=[],i||(s=i=""),this},locked:function(){return!!r},fireWith:function(e,i){return r||(i=i||[],i=[e,i.slice?i.slice():i],a.push(i),t||u()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(i){oe.each(t,function(t,o){var s=oe.isFunction(e[t])&&e[t];r[o[1]](function(){var e=s&&s.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[o[0]+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,n):n}},r={};return n.pipe=n.then,oe.each(t,function(e,o){var s=o[2],a=o[3];n[o[1]]=s.add,a&&s.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=s.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t,i,n,r=0,o=G.call(arguments),s=o.length,a=1!==s||e&&oe.isFunction(e.promise)?s:0,l=1===a?e:oe.Deferred(),u=function(e,i,n){return function(r){i[e]=this,n[e]=arguments.length>1?G.call(arguments):r,n===t?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(t=new Array(s),i=new Array(s),n=new Array(s);r<s;r++)o[r]&&oe.isFunction(o[r].promise)?o[r].promise().progress(u(r,i,t)).done(u(r,n,o)).fail(l.reject):--a;return a||l.resolveWith(n,o),l.promise()}});var xe;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(e===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,e!==!0&&--oe.readyWait>0||(xe.resolveWith(Q,[oe]),oe.fn.triggerHandler&&(oe(Q).triggerHandler("ready"),oe(Q).off("ready"))))}}),oe.ready.promise=function(t){return xe||(xe=oe.Deferred(),"complete"===Q.readyState||"loading"!==Q.readyState&&!Q.documentElement.doScroll?e.setTimeout(oe.ready):(Q.addEventListener("DOMContentLoaded",s),e.addEventListener("load",s))),xe.promise(t)},oe.ready.promise();var Ce=function(e,t,i,n,r,o,s){var a=0,l=e.length,u=null==i;if("object"===oe.type(i)){r=!0;for(a in i)Ce(e,t,a,i[a],!0,o,s)}else if(void 0!==n&&(r=!0,oe.isFunction(n)||(s=!0),u&&(s?(t.call(e,n),t=null):(u=t,t=function(e,t,i){return u.call(oe(e),i)})),t))for(;a<l;a++)t(e[a],i,s?n:n.call(e[a],a,t(e[a],i)));return r?e:u?t.call(e):l?t(e[0],i):o},Ee=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};a.uid=1,a.prototype={register:function(e,t){var i=t||{};return e.nodeType?e[this.expando]=i:Object.defineProperty(e,this.expando,{value:i,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Ee(e))return{};var t=e[this.expando];return t||(t={},Ee(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[t]=i;else for(n in t)r[n]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,oe.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,r,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{oe.isArray(t)?n=t.concat(t.map(oe.camelCase)):(r=oe.camelCase(t),t in o?n=[t,r]:(n=r,n=n in o?[n]:n.match(we)||[])),i=n.length;for(;i--;)delete o[n[i]]}(void 0===t||oe.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!oe.isEmptyObject(t)}};var Te=new a,ke=new a,Se=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ne=/[A-Z]/g;oe.extend({hasData:function(e){return ke.hasData(e)||Te.hasData(e)},data:function(e,t,i){return ke.access(e,t,i)},removeData:function(e,t){ke.remove(e,t)},_data:function(e,t,i){return Te.access(e,t,i)},_removeData:function(e,t){Te.remove(e,t)}}),oe.fn.extend({data:function(e,t){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(r=ke.get(o),1===o.nodeType&&!Te.get(o,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=oe.camelCase(n.slice(5)),l(o,n,r[n])));Te.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ke.set(this,e)}):Ce(this,function(t){var i,n;if(o&&void 0===t){if(i=ke.get(o,e)||ke.get(o,e.replace(Ne,"-$&").toLowerCase()),void 0!==i)return i;if(n=oe.camelCase(e),i=ke.get(o,n),void 0!==i)return i;if(i=l(o,n,void 0),void 0!==i)return i}else n=oe.camelCase(e),this.each(function(){var i=ke.get(this,n);ke.set(this,n,t),e.indexOf("-")>-1&&void 0!==i&&ke.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ke.remove(this,e)})}}),oe.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=Te.get(e,t),i&&(!n||oe.isArray(i)?n=Te.access(e,t,oe.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=oe.queue(e,t),n=i.length,r=i.shift(),o=oe._queueHooks(e,t),s=function(){oe.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Te.get(e,i)||Te.access(e,i,{empty:oe.Callbacks("once memory").add(function(){Te.remove(e,[t+"queue",i])})})}}),oe.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?oe.queue(this[0],e):void 0===t?this:this.each(function(){var i=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=oe.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)i=Te.get(o[s],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(t)}});var Ae=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,je=new RegExp("^(?:([+-])=|)("+Ae+")([a-z%]*)$","i"),Oe=["Top","Right","Bottom","Left"],He=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Ie=/^(?:checkbox|radio)$/i,Le=/<([\w:-]+)/,De=/^$|\/(?:java|ecma)script/i,Pe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pe.optgroup=Pe.option,Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td;var Me=/<|&#?\w+;/;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),i=Q.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Be=/^key/,Re=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Fe=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(e,t,i,n,r){var o,s,a,l,u,d,h,c,p,f,m,g=Te.get(e);if(g)for(i.handler&&(o=i,i=o.handler,r=o.selector),i.guid||(i.guid=oe.guid++),(l=g.events)||(l=g.events={}),(s=g.handle)||(s=g.handle=function(t){return"undefined"!=typeof oe&&oe.event.triggered!==t.type?oe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],u=t.length;u--;)a=Fe.exec(t[u])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p&&(h=oe.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=oe.event.special[p]||{},d=oe.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&oe.expr.match.needsContext.test(r),namespace:f.join(".")},o),(c=l[p])||(c=l[p]=[],c.delegateCount=0,h.setup&&h.setup.call(e,n,f,s)!==!1||e.addEventListener&&e.addEventListener(p,s)),h.add&&(h.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),r?c.splice(c.delegateCount++,0,d):c.push(d),oe.event.global[p]=!0)},remove:function(e,t,i,n,r){var o,s,a,l,u,d,h,c,p,f,m,g=Te.hasData(e)&&Te.get(e);if(g&&(l=g.events)){for(t=(t||"").match(we)||[""],u=t.length;u--;)if(a=Fe.exec(t[u])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(h=oe.event.special[p]||{},p=(n?h.delegateType:h.bindType)||p,c=l[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=c.length;o--;)d=c[o],!r&&m!==d.origType||i&&i.guid!==d.guid||a&&!a.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(c.splice(o,1),d.selector&&c.delegateCount--,h.remove&&h.remove.call(e,d));s&&!c.length&&(h.teardown&&h.teardown.call(e,f,g.handle)!==!1||oe.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)oe.event.remove(e,p+t[u],i,n,!0);oe.isEmptyObject(l)&&Te.remove(e,"handle events")}},dispatch:function(e){e=oe.event.fix(e);var t,i,n,r,o,s=[],a=G.call(arguments),l=(Te.get(this,"events")||{})[e.type]||[],u=oe.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(s=oe.event.handlers.call(this,e,l),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,n=((oe.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,r,o,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(n=[],i=0;i<a;i++)o=t[i],r=o.selector+" ",void 0===n[r]&&(n[r]=o.needsContext?oe(r,this).index(l)>-1:oe.find(r,this,null,[l]).length),n[r]&&n.push(o);n.length&&s.push({elem:l,handlers:n})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||Q,n=i.documentElement,r=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[oe.expando])return e;var t,i,n,r=e.type,o=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Re.test(r)?this.mouseHooks:Be.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new oe.Event(o),t=n.length;t--;)i=n[t],e[i]=o[i];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==m()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===m()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&oe.nodeName(this,"input"))return this.click(),!1},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},oe.Event=function(e,t){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?p:f):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,t)},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===n||oe.contains(n,r))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),oe.fn.extend({on:function(e,t,i,n){return g(this,e,t,i,n)},one:function(e,t,i,n){return g(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,oe(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(i=t,t=void 0),i===!1&&(i=f),this.each(function(){oe.event.remove(this,e,i,t)})}});var Ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,qe=/<script|<style|<link/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^true\/(.*)/,$e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace(Ve,"<$1></$2>")},clone:function(e,t,i){var n,r,o,s,a=e.cloneNode(!0),l=oe.contains(e.ownerDocument,e);if(!(ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(s=d(a),o=d(e),n=0,r=o.length;n<r;n++)w(o[n],s[n]);if(t)if(i)for(o=o||d(e),s=s||d(a),n=0,r=o.length;n<r;n++)_(o[n],s[n]);else _(e,a);return s=d(a,"script"),s.length>0&&h(s,!l&&d(e,"script")),a},cleanData:function(e){for(var t,i,n,r=oe.event.special,o=0;void 0!==(i=e[o]);o++)if(Ee(i)){if(t=i[Te.expando]){if(t.events)for(n in t.events)r[n]?oe.event.remove(i,n):oe.removeEvent(i,n,t.handle);i[Te.expando]=void 0}i[ke.expando]&&(i[ke.expando]=void 0)}}}),oe.fn.extend({domManip:x,detach:function(e){return C(this,e,!0)},remove:function(e){return C(this,e)},text:function(e){return Ce(this,function(e){return void 0===e?oe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(d(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Ce(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!Pe[(Le.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;i<n;i++)t=this[i]||{},1===t.nodeType&&(oe.cleanData(d(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return x(this,arguments,function(t){var i=this.parentNode;oe.inArray(this,e)<0&&(oe.cleanData(d(this)),i&&i.replaceChild(t,this))},e)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var i,n=[],r=oe(e),o=r.length-1,s=0;s<=o;s++)i=s===o?this:this.clone(!0),oe(r[s])[t](i),K.apply(n,i.get());return this.pushStack(n)}});var Ue,Je={HTML:"block",BODY:"block"},Xe=/^margin/,Qe=new RegExp("^("+Ae+")(?!px)[a-z%]+$","i"),Ge=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},Ye=function(e,t,i,n){var r,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];r=i.apply(e,n||[]);for(o in t)e.style[o]=s[o];return r},Ke=Q.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Ke.appendChild(s);var t=e.getComputedStyle(a);i="1%"!==t.top,o="2px"===t.marginLeft,n="4px"===t.width,a.style.marginRight="50%",r="4px"===t.marginRight,Ke.removeChild(s)}var i,n,r,o,s=Q.createElement("div"),a=Q.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===a.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(a),oe.extend(ne,{pixelPosition:function(){return t(),i},boxSizingReliable:function(){return null==n&&t(),n},pixelMarginRight:function(){return null==n&&t(),r},reliableMarginLeft:function(){return null==n&&t(),o},reliableMarginRight:function(){var t,i=a.appendChild(Q.createElement("div"));return i.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",a.style.width="1px",Ke.appendChild(s),t=!parseFloat(e.getComputedStyle(i).marginRight),Ke.removeChild(s),a.removeChild(i),t}}))}();var Ze=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},it=["Webkit","O","Moz","ms"],nt=Q.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=k(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,s,a=oe.camelCase(t),l=e.style;return t=oe.cssProps[a]||(oe.cssProps[a]=N(a)||a),s=oe.cssHooks[t]||oe.cssHooks[a],void 0===i?s&&"get"in s&&void 0!==(r=s.get(e,!1,n))?r:l[t]:(o=typeof i,"string"===o&&(r=je.exec(i))&&r[1]&&(i=u(e,t,r),o="number"),null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(oe.cssNumber[a]?"":"px")),ne.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,n))||(l[t]=i)),void 0)}},css:function(e,t,i,n){var r,o,s,a=oe.camelCase(t);return t=oe.cssProps[a]||(oe.cssProps[a]=N(a)||a),s=oe.cssHooks[t]||oe.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,i)),void 0===r&&(r=k(e,t,n)),"normal"===r&&t in tt&&(r=tt[t]),""===i||i?(o=parseFloat(r),i===!0||isFinite(o)?o||0:r):r}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,i,n){if(i)return Ze.test(oe.css(e,"display"))&&0===e.offsetWidth?Ye(e,et,function(){return O(e,t,n)}):O(e,t,n)},set:function(e,i,n){var r,o=n&&Ge(e),s=n&&j(e,t,n,"border-box"===oe.css(e,"boxSizing",!1,o),o);return s&&(r=je.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=oe.css(e,t)),A(e,i,s)}}}),oe.cssHooks.marginLeft=S(ne.reliableMarginLeft,function(e,t){if(t)return(parseFloat(k(e,"marginLeft"))||e.getBoundingClientRect().left-Ye(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),oe.cssHooks.marginRight=S(ne.reliableMarginRight,function(e,t){if(t)return Ye(e,{display:"inline-block"},k,[e,"marginRight"])}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[e+Oe[n]+t]=o[n]||o[n-2]||o[0];return r}},Xe.test(e)||(oe.cssHooks[e+t].set=A)}),oe.fn.extend({css:function(e,t){return Ce(this,function(e,t,i){var n,r,o={},s=0;if(oe.isArray(t)){for(n=Ge(e),r=t.length;s<r;s++)o[t[s]]=oe.css(e,t[s],!1,n);return o}return void 0!==i?oe.style(e,t,i):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return H(this,!0)},hide:function(){return H(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){He(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=I,I.prototype={constructor:I,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(oe.cssNumber[i]?"":"px")},cur:function(){var e=I.propHooks[this.prop];return e&&e.get?e.get(this):I.propHooks._default.get(this)},run:function(e){var t,i=I.propHooks[this.prop];return this.options.duration?this.pos=t=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):I.propHooks._default.set(this),this}},I.prototype.init.prototype=I.prototype,I.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}},I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=I.prototype.init,oe.fx.step={};var rt,ot,st=/^(?:toggle|show|hide)$/,at=/queueHooks$/;oe.Animation=oe.extend(R,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return u(i.elem,e,je.exec(t),i),i}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var i,n=0,r=e.length;n<r;n++)i=e[n],R.tweeners[i]=R.tweeners[i]||[],R.tweeners[i].unshift(t)},prefilters:[M],prefilter:function(e,t){t?R.prefilters.unshift(e):R.prefilters.push(e)}}),oe.speed=function(e,t,i){var n=e&&"object"==typeof e?oe.extend({},e):{complete:i||!i&&t||oe.isFunction(e)&&e,duration:e,easing:i&&t||t&&!oe.isFunction(t)&&t};return n.duration=oe.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in oe.fx.speeds?oe.fx.speeds[n.duration]:oe.fx.speeds._default,null!=n.queue&&n.queue!==!0||(n.queue="fx"),n.old=n.complete,n.complete=function(){oe.isFunction(n.old)&&n.old.call(this),n.queue&&oe.dequeue(this,n.queue)},n},oe.fn.extend({fadeTo:function(e,t,i,n){return this.filter(He).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=oe.isEmptyObject(e),o=oe.speed(t,i,n),s=function(){var t=R(this,oe.extend({},e),o);(r||Te.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=oe.timers,s=Te.get(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&at.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(i),t=!1,o.splice(r,1));!t&&i||oe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=Te.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],o=oe.timers,s=n?n.length:0;for(i.finish=!0,oe.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<s;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var i=oe.fn[t];oe.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(D(t,!0),e,n,r)}}),oe.each({slideDown:D("show"),slideUp:D("hide"),slideToggle:D("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,i=oe.timers;for(rt=oe.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||oe.fx.stop(),rt=void 0},oe.fx.timer=function(e){
oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){ot||(ot=e.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){e.clearInterval(ot),ot=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,i){return t=oe.fx?oe.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,n){var r=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(r)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),i=t.appendChild(Q.createElement("option"));e.type="checkbox",ne.checkOn=""!==e.value,ne.optSelected=i.selected,t.disabled=!0,ne.optDisabled=!i.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",ne.radioValue="t"===e.value}();var lt,ut=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return Ce(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?oe.prop(e,t,i):(1===o&&oe.isXMLDoc(e)||(t=t.toLowerCase(),r=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?lt:void 0)),void 0!==i?null===i?void oe.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:(n=oe.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n,r=0,o=t&&t.match(we);if(o&&1===e.nodeType)for(;i=o[r++];)n=oe.propFix[i]||i,oe.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)}}),lt={set:function(e,t,i){return t===!1?oe.removeAttr(e,i):e.setAttribute(i,i),i}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ut[t]||oe.find.attr;ut[t]=function(e,t,n){var r,o;return n||(o=ut[t],ut[t]=r,r=null!=i(e,t,n)?t.toLowerCase():null,ut[t]=o),r}});var dt=/^(?:input|select|textarea|button)$/i,ht=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Ce(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,r=oe.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):dt.test(e.nodeName)||ht.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ne.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this});var ct=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,i,n,r,o,s,a,l=0;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,F(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];i=this[l++];)if(r=F(i),n=1===i.nodeType&&(" "+r+" ").replace(ct," ")){for(s=0;o=t[s++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");a=oe.trim(n),r!==a&&i.setAttribute("class",a)}return this},removeClass:function(e){var t,i,n,r,o,s,a,l=0;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,F(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];i=this[l++];)if(r=F(i),n=1===i.nodeType&&(" "+r+" ").replace(ct," ")){for(s=0;o=t[s++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");a=oe.trim(n),r!==a&&i.setAttribute("class",a)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):oe.isFunction(e)?this.each(function(i){oe(this).toggleClass(e.call(this,i,F(this),t),t)}):this.each(function(){var t,n,r,o;if("string"===i)for(n=0,r=oe(this),o=e.match(we)||[];t=o[n++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||(t=F(this),t&&Te.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Te.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+F(i)+" ").replace(ct," ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g,ft=/[\x20\t\r\n\f]+/g;oe.fn.extend({val:function(e){var t,i,n,r=this[0];{if(arguments.length)return n=oe.isFunction(e),this.each(function(i){var r;1===this.nodeType&&(r=n?e.call(this,i,oe(this).val()):e,null==r?r="":"number"==typeof r?r+="":oe.isArray(r)&&(r=oe.map(r,function(e){return null==e?"":e+""})),t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=oe.valHooks[r.type]||oe.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(pt,""):null==i?"":i)}}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e)).replace(ft," ")}},select:{get:function(e){for(var t,i,n=e.options,r=e.selectedIndex,o="select-one"===e.type||r<0,s=o?null:[],a=o?r+1:n.length,l=r<0?a:o?r:0;l<a;l++)if(i=n[l],(i.selected||l===r)&&(ne.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!oe.nodeName(i.parentNode,"optgroup"))){if(t=oe(i).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,o=oe.makeArray(t),s=r.length;s--;)n=r[s],(n.selected=oe.inArray(oe.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){if(oe.isArray(t))return e.checked=oe.inArray(oe(e).val(),t)>-1}},ne.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var mt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(t,i,n,r){var o,s,a,l,u,d,h,c=[n||Q],p=ie.call(t,"type")?t.type:t,f=ie.call(t,"namespace")?t.namespace.split("."):[];if(s=a=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!mt.test(p+oe.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),u=p.indexOf(":")<0&&"on"+p,t=t[oe.expando]?t:new oe.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:oe.makeArray(i,[t]),h=oe.event.special[p]||{},r||!h.trigger||h.trigger.apply(n,i)!==!1)){if(!r&&!h.noBubble&&!oe.isWindow(n)){for(l=h.delegateType||p,mt.test(l+p)||(s=s.parentNode);s;s=s.parentNode)c.push(s),a=s;a===(n.ownerDocument||Q)&&c.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=c[o++])&&!t.isPropagationStopped();)t.type=o>1?l:h.bindType||p,d=(Te.get(s,"events")||{})[t.type]&&Te.get(s,"handle"),d&&d.apply(s,i),d=u&&s[u],d&&d.apply&&Ee(s)&&(t.result=d.apply(s,i),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||h._default&&h._default.apply(c.pop(),i)!==!1||!Ee(n)||u&&oe.isFunction(n[p])&&!oe.isWindow(n)&&(a=n[u],a&&(n[u]=null),oe.event.triggered=p,n[p](),oe.event.triggered=void 0,a&&(n[u]=a)),t.result}},simulate:function(e,t,i){var n=oe.extend(new oe.Event,i,{type:e,isSimulated:!0});oe.event.trigger(n,null,t)}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return oe.event.trigger(e,t,i,!0)}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ne.focusin="onfocusin"in e,ne.focusin||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){oe.event.simulate(t,e.target,oe.event.fix(e))};oe.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=Te.access(n,t);r||n.addEventListener(e,i,!0),Te.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=Te.access(n,t)-1;r?Te.access(n,t,r):(n.removeEventListener(e,i,!0),Te.remove(n,t))}}});var gt=e.location,vt=oe.now(),yt=/\?/;oe.parseJSON=function(e){return JSON.parse(e+"")},oe.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(n){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+t),i};var bt=/#.*$/,_t=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,xt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ct=/^(?:GET|HEAD)$/,Et=/^\/\//,Tt={},kt={},St="*/".concat("*"),Nt=Q.createElement("a");Nt.href=gt.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gt.href,type:"GET",isLocal:xt.test(gt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":St,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,oe.ajaxSettings),t):z(oe.ajaxSettings,e)},ajaxPrefilter:V(Tt),ajaxTransport:V(kt),ajax:function(t,i){function n(t,i,n,a){var u,h,y,b,w,C=i;2!==_&&(_=2,l&&e.clearTimeout(l),r=void 0,s=a||"",x.readyState=t>0?4:0,u=t>=200&&t<300||304===t,n&&(b=W(c,x,n)),b=$(c,b,x,u),u?(c.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(oe.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(oe.etag[o]=w)),204===t||"HEAD"===c.type?C="nocontent":304===t?C="notmodified":(C=b.state,h=b.data,y=b.error,u=!y)):(y=C,!t&&C||(C="error",t<0&&(t=0))),x.status=t,x.statusText=(i||C)+"",u?m.resolveWith(p,[h,C,x]):m.rejectWith(p,[x,C,y]),x.statusCode(v),v=void 0,d&&f.trigger(u?"ajaxSuccess":"ajaxError",[x,c,u?h:y]),g.fireWith(p,[x,C]),d&&(f.trigger("ajaxComplete",[x,c]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=void 0),i=i||{};var r,o,s,a,l,u,d,h,c=oe.ajaxSetup({},i),p=c.context||c,f=c.context&&(p.nodeType||p.jquery)?oe(p):oe.event,m=oe.Deferred(),g=oe.Callbacks("once memory"),v=c.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!a)for(a={};t=wt.exec(s);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return _||(e=b[i]=b[i]||e,y[e]=t),this},overrideMimeType:function(e){return _||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),n(0,t),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,c.url=((t||c.url||gt.href)+"").replace(bt,"").replace(Et,gt.protocol+"//"),c.type=i.method||i.type||c.method||c.type,c.dataTypes=oe.trim(c.dataType||"*").toLowerCase().match(we)||[""],null==c.crossDomain){u=Q.createElement("a");try{u.href=c.url,u.href=u.href,c.crossDomain=Nt.protocol+"//"+Nt.host!=u.protocol+"//"+u.host}catch(C){c.crossDomain=!0}}if(c.data&&c.processData&&"string"!=typeof c.data&&(c.data=oe.param(c.data,c.traditional)),q(Tt,c,i,x),2===_)return x;d=oe.event&&c.global,d&&0===oe.active++&&oe.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Ct.test(c.type),o=c.url,c.hasContent||(c.data&&(o=c.url+=(yt.test(o)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=_t.test(o)?o.replace(_t,"$1_="+vt++):o+(yt.test(o)?"&":"?")+"_="+vt++)),c.ifModified&&(oe.lastModified[o]&&x.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&x.setRequestHeader("If-None-Match",oe.etag[o])),(c.data&&c.hasContent&&c.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+St+"; q=0.01":""):c.accepts["*"]);for(h in c.headers)x.setRequestHeader(h,c.headers[h]);if(c.beforeSend&&(c.beforeSend.call(p,x,c)===!1||2===_))return x.abort();w="abort";for(h in{success:1,error:1,complete:1})x[h](c[h]);if(r=q(kt,c,i,x)){if(x.readyState=1,d&&f.trigger("ajaxSend",[x,c]),2===_)return x;c.async&&c.timeout>0&&(l=e.setTimeout(function(){x.abort("timeout")},c.timeout));try{_=1,r.send(y,n)}catch(C){if(!(_<2))throw C;n(-1,C)}}else n(-1,"No Transport");return x},getJSON:function(e,t,i){return oe.get(e,t,i,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,i,n,r){return oe.isFunction(i)&&(r=r||n,n=i,i=void 0),oe.ajax(oe.extend({url:e,type:t,dataType:r,data:i,success:n},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(e){var t;return oe.isFunction(e)?this.each(function(t){oe(this).wrapAll(e.call(this,t))}):(this[0]&&(t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return oe.isFunction(e)?this.each(function(t){oe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=oe(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(i){oe(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return!oe.expr.filters.visible(e)},oe.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var At=/%20/g,jt=/\[\]$/,Ot=/\r?\n/g,Ht=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var i,n=[],r=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){r(this.name,this.value)});else for(i in e)U(i,e[i],t,r);return n.join("&").replace(At,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&It.test(this.nodeName)&&!Ht.test(e)&&(this.checked||!Ie.test(e))}).map(function(e,t){var i=oe(this).val();return null==i?null:oe.isArray(i)?oe.map(i,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:i.replace(Ot,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Lt={0:200,1223:204},Dt=oe.ajaxSettings.xhr();ne.cors=!!Dt&&"withCredentials"in Dt,ne.ajax=Dt=!!Dt,oe.ajaxTransport(function(t){var i,n;if(ne.cors||Dt&&!t.crossDomain)return{send:function(r,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(s in r)a.setRequestHeader(s,r[s]);i=function(e){return function(){i&&(i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Lt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=i(),n=a.onerror=i("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{a.send(t.hasContent&&t.data||null)}catch(l){if(i)throw l}},abort:function(){i&&i()}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=oe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Pt=[],Mt=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pt.pop()||oe.expando+"_"+vt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,i,n){var r,o,s,a=t.jsonp!==!1&&(Mt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Mt,"$1"+r):t.jsonp!==!1&&(t.url+=(yt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||oe.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){s=arguments},n.always(function(){void 0===o?oe(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=i.jsonpCallback,Pt.push(r)),s&&oe.isFunction(o)&&o(s[0]),s=o=void 0}),"script"}),oe.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||Q;var n=fe.exec(e),r=!i&&[];return n?[t.createElement(n[1])]:(n=c([e],t,r),r&&r.length&&oe(r).remove(),oe.merge([],n.childNodes))};var Bt=oe.fn.load;oe.fn.load=function(e,t,i){if("string"!=typeof e&&Bt)return Bt.apply(this,arguments);var n,r,o,s=this,a=e.indexOf(" ");return a>-1&&(n=oe.trim(e.slice(a)),e=e.slice(0,a)),oe.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&oe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(n?oe("<div>").append(oe.parseHTML(e)).find(n):e)}).always(i&&function(e,t){s.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length},oe.offset={setOffset:function(e,t,i){var n,r,o,s,a,l,u,d=oe.css(e,"position"),h=oe(e),c={};"static"===d&&(e.style.position="relative"),a=h.offset(),o=oe.css(e,"top"),l=oe.css(e,"left"),u=("absolute"===d||"fixed"===d)&&(o+l).indexOf("auto")>-1,u?(n=h.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),oe.isFunction(t)&&(t=t.call(e,i,oe.extend({},a))),null!=t.top&&(c.top=t.top-a.top+s),null!=t.left&&(c.left=t.left-a.left+r),"using"in t?t.using.call(e,c):h.css(c)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,i,n=this[0],r={top:0,left:0},o=n&&n.ownerDocument;if(o)return t=o.documentElement,oe.contains(t,n)?(r=n.getBoundingClientRect(),i=J(o),{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===oe.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(n=e.offset()),n.top+=oe.css(e[0],"borderTopWidth",!0),n.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-oe.css(i,"marginTop",!0),left:t.left-n.left-oe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||Ke})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;oe.fn[e]=function(n){return Ce(this,function(e,n,r){var o=J(e);return void 0===r?o?o[t]:e[n]:void(o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):e[n]=r)},e,n,arguments.length)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=S(ne.pixelPosition,function(e,i){if(i)return i=k(e,t),Qe.test(i)?oe(e).position()[t]+"px":i})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){oe.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||r===!0?"margin":"border");return Ce(this,function(t,i,n){var r;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===n?oe.css(t,i,s):oe.style(t,i,n,s)},t,o?n:void 0,o,null)}})}),oe.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},size:function(){return this.length}}),oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var Rt=e.jQuery,Ft=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=Ft),t&&e.jQuery===oe&&(e.jQuery=Rt),oe},t||(e.jQuery=e.$=oe),oe}),!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var n;n=function(e){"use strict";var t=i(1),n=i(2),r=i(3),o=i(6),s=i(7);t.sceditor=n,n.commands=i(9),n.defaultOptions=i(10),n.RangeHelper=i(4),n.dom=i(5),n.ie=o.ie,n.ios=o.ios,n.isWysiwygSupported=o.isWysiwygSupported,n.regexEscape=s.regex,n.escapeEntities=s.entities,n.escapeUriScheme=s.uriScheme,n.PluginManager=r,n.plugins=r.plugins,t.fn.sceditor=function(e){var i,r,s=[];if(e=e||{},e.runWithoutWysiwygSupport||o.isWysiwygSupported)return this.each(function(){i=this.jquery?this:t(this),r=i.data("sceditor"),i.parents(".sceditor-container").length>0||("state"===e?s.push(!!r):"instance"===e?s.push(r):r||new n(this,e))}),s.length?1===s.length?s[0]:t(s):this}}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t){e.exports=jQuery},function(e,t,i){var n;n=function(e){"use strict";var t=i(1),n=i(3),r=i(4),o=i(5),s=i(7),a=i(6),l=i(8),u=window,d=document,h=t(u),c=t(d),p=a.ie,f=p&&p<11,m=function(e,i){var g,v,y,b,_,w,x,C,E,T,k,S,N,A,j,O,H,I,L,D,P,M,B,R,F,V,q,z,W,$,U,J,X,Q,G,Y,K,Z,ee,te,ie,ne,re,oe,se,ae,le,ue,de,he,ce,pe,fe,me,ge,ve,ye,be,_e=this,we=e.get?e.get(0):e,xe=t(we),Ce=[],Ee=[],Te=[],ke={},Se=[],Ne={};_e.commands=t.extend(!0,{},i.commands||m.commands),_e.opts=i=t.extend({},m.defaultOptions,i),P=function(){xe.data("sceditor",_e),t.each(i,function(e,n){t.isPlainObject(n)&&(i[e]=t.extend(!0,{},n))}),i.locale&&"en"!==i.locale&&q(),g=t('<div class="sceditor-container" />').insertAfter(xe).css("z-index",i.zIndex),p&&g.addClass("ie ie"+p),I=!!xe.attr("required"),xe.removeAttr("required"),V(),X(),z(),F(),U(),W(),$(),a.isWysiwygSupported||_e.toggleSourceMode(),ae();var e=function(){h.unbind("load",e),i.autofocus&&ce(),i.autoExpand&&_e.expandToContent(),oe(),N.call("ready")};h.load(e),d.readyState&&"complete"===d.readyState&&e()},V=function(){var e=i.plugins;e=e?e.toString().split(","):[],N=new n(_e),t.each(e,function(e,i){N.register(t.trim(i))})},q=function(){var e;k=m.locale[i.locale],k||(e=i.locale.split("-"),k=m.locale[e[0]]),k&&k.dateFormat&&(i.dateFormat=k.dateFormat)},F=function(){var e,n;x=t("<textarea></textarea>").hide(),y=t('<iframe frameborder="0" allowfullscreen="true"></iframe>'),i.spellcheck||x.attr("spellcheck","false"),"https:"===u.location.protocol&&y.attr("src","javascript:false"),g.append(y).append(x),b=y[0],C=x[0],_e.dimensions(i.width||xe.width(),i.height||xe.height()),e=Q(),e.open(),e.write(l("html",{attrs:p?' class="ie ie'+p+'"':"",spellcheck:i.spellcheck?"":'spellcheck="false"',charset:i.charset,style:i.style})),e.close(),w=t(e),_=t(e.body),_e.readOnly(!!i.readOnly),(a.ios||p)&&(_.height("100%"),p||_.bind("touchend",_e.focus)),n=xe.attr("tabindex"),x.attr("tabindex",n),y.attr("tabindex",n),S=new r(b.contentWindow),_e.val(xe.hide().val())},W=function(){i.autoUpdate&&(_.bind("blur",be),x.bind("blur",be)),null===i.rtl&&(i.rtl="rtl"===x.css("direction")),_e.rtl(!!i.rtl),i.autoExpand&&w.bind("keyup",_e.expandToContent),i.resizeEnabled&&J(),g.attr("id",i.id),_e.emoticons(i.emoticonsEnabled)},$=function(){var e=p?"selectionchange":"keyup focus blur contextmenu mouseup touchend click",n="keydown keyup keypress focus blur contextmenu";c.click(re),t(we.form).bind("reset",te).submit(_e.updateOriginal),h.bind("resize orientationChanged",oe),_.keypress(ee).keydown(K).keydown(Z).keyup(ue).blur(ve).keyup(ye).bind("paste",G).bind(e,de).bind(n,ne),i.emoticonsCompat&&u.getSelection&&_.keyup(fe),x.blur(ve).keyup(ye).keydown(K).bind(n,ne),w.mousedown(ie).blur(ve).bind(e,de).bind("beforedeactivate keyup mouseup",R).keyup(ue).focus(function(){T=null}),g.bind("selectionchanged",he).bind("selectionchanged",ae).bind("selectionchanged valuechanged nodechanged",ne)},z=function(){var e,n=_e.commands,r=(i.toolbarExclude||"").split(","),o=i.toolbar.split("|");v=t('<div class="sceditor-toolbar" unselectable="on" />'),t.each(o,function(i,o){e=t('<div class="sceditor-group" />'),t.each(o.split(","),function(i,o){var s,a,u=n[o];!u||t.inArray(o,r)>-1||(a=u.shortcut,s=l("toolbarButton",{name:o,dispName:_e._(u.name||u.tooltip||o)},!0),s.data("sceditor-txtmode",!!u.txtExec).data("sceditor-wysiwygmode",!!u.exec).toggleClass("disabled",!u.exec).mousedown(function(){(!p||p<9)&&(D=!0)}).click(function(){var e=t(this);return e.hasClass("disabled")||B(e,u),ae(),!1}),u.tooltip&&s.attr("title",_e._(u.tooltip)+(a?" ("+a+")":"")),a&&_e.addShortcut(a,o),u.state?Te.push({name:o,state:u.state}):"string"==typeof u.exec&&Te.push({name:o,state:u.exec}),e.append(s),Ne[o]=s)}),e[0].firstChild&&v.append(e)}),t(i.toolbarContainer||g).append(v)},U=function(){t.each(_e.commands,function(e,i){i.forceNewLineAfter&&t.isArray(i.forceNewLineAfter)&&(Ee=t.merge(Ee,i.forceNewLineAfter))}),ue()},J=function(){var e,n,r,o,s,a,l=t('<div class="sceditor-grip" />'),d=t('<div class="sceditor-resize-cover" />'),h="touchmove mousemove",f="touchcancel touchend mouseup",m=0,v=0,y=0,b=0,_=0,w=0,x=g.width(),C=g.height(),E=!1,T=_e.rtl();e=i.resizeMinHeight||C/1.5,n=i.resizeMaxHeight||2.5*C,r=i.resizeMinWidth||x/1.25,o=i.resizeMaxWidth||1.25*x,s=function(t){"touchmove"===t.type?(t=u.event,y=t.changedTouches[0].pageX,b=t.changedTouches[0].pageY):(y=t.pageX,b=t.pageY);var s=w+(b-v),a=T?_-(y-m):_+(y-m);o>0&&a>o&&(a=o),r>0&&a<r&&(a=r),i.resizeWidth||(a=!1),n>0&&s>n&&(s=n),e>0&&s<e&&(s=e),i.resizeHeight||(s=!1),(a||s)&&(_e.dimensions(a,s),p<7&&g.height(s)),t.preventDefault()},a=function(e){E&&(E=!1,d.hide(),g.removeClass("resizing").height("auto"),c.unbind(h,s),c.unbind(f,a),e.preventDefault())},g.append(l),g.append(d.hide()),l.bind("touchstart mousedown",function(e){"touchstart"===e.type?(e=u.event,m=e.touches[0].pageX,v=e.touches[0].pageY):(m=e.pageX,v=e.pageY),_=g.width(),w=g.height(),E=!0,g.addClass("resizing"),d.show(),c.bind(h,s),c.bind(f,a),p<7&&g.height(w),e.preventDefault()})},X=function(){var e,n=i.emoticons,r=i.emoticonsRoot;t.isPlainObject(n)&&i.emoticonsEnabled&&t.each(n,function(i,o){t.each(o,function(t,o){r&&(o={url:r+(o.url||o),tooltip:o.tooltip||t},n[i][t]=o),e=d.createElement("img"),e.src=o.url||o,Ce.push(e)})})},ce=function(){var e,n,r=w[0],s=_[0],a=s.firstChild,l=!!i.autofocusEnd;if(g.is(":visible")){if(_e.sourceMode())return n=l?C.value.length:0,void(C.setSelectionRange?C.setSelectionRange(n,n):(e=C.createTextRange(),e.moveEnd("character",n),e.collapse(!1),e.select()));if(o.removeWhiteSpace(s),l)for((a=s.lastChild)||(a=r.createElement("p"),_.append(a));a.lastChild;)a=a.lastChild,!f&&t(a).is("br")&&a.previousSibling&&(a=a.previousSibling);r.createRange?(e=r.createRange(),o.canHaveChildren(a)?e.selectNodeContents(a):(e.setStartBefore(a),l&&e.setStartAfter(a))):(e=s.createTextRange(),e.moveToElementText(3!==a.nodeType?a:a.parentNode)),e.collapse(!l),S.selectRange(e),O=e,l&&(w.scrollTop(s.scrollHeight),_.scrollTop(s.scrollHeight)),_e.focus()}},_e.readOnly=function(e){return"boolean"!=typeof e?"readonly"===x.attr("readonly"):(_[0].contentEditable=!e,e?x.attr("readonly","readonly"):x.removeAttr("readonly"),se(e),_e)},_e.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===x.attr("dir"):(_.attr("dir",t),x.attr("dir",t),g.removeClass("rtl").removeClass("ltr").addClass(t),_e)},se=function(e){var i=_e.inSourceMode()?"txtmode":"wysiwygmode";t.each(Ne,function(t,n){e!==!0&&n.data("sceditor-"+i)?n.removeClass("disabled"):n.addClass("disabled")})},_e.width=function(e,t){return e||0===e?(_e.dimensions(e,null,t),_e):g.width()},_e.dimensions=function(e,t,n){var r,o=p<8||d.documentMode<8?2:0;return e=!(!e&&0!==e)&&e,t=!(!t&&0!==t)&&t,e===!1&&t===!1?{width:_e.width(),height:_e.height()}:(y.data("outerWidthOffset")===r&&_e.updateStyleCache(),e!==!1&&(n!==!1&&(i.width=e),t===!1&&(t=g.height(),n=!1),g.width(e),e&&e.toString().indexOf("%")>-1&&(e=g.width()),y.width(e-y.data("outerWidthOffset")),x.width(e-x.data("outerWidthOffset")),a.ios&&_&&_.width(e-y.data("outerWidthOffset")-(_.outerWidth(!0)-_.width()))),t!==!1&&(n!==!1&&(i.height=t),t&&t.toString().indexOf("%")>-1&&(t=g.height(t).height(),g.height("auto")),t-=i.toolbarContainer?0:v.outerHeight(!0),y.height(t-y.data("outerHeightOffset")),x.height(t-o-x.data("outerHeightOffset"))),_e)},_e.updateStyleCache=function(){y.data("outerWidthOffset",y.outerWidth(!0)-y.width()),x.data("outerWidthOffset",x.outerWidth(!0)-x.width()),y.data("outerHeightOffset",y.outerHeight(!0)-y.height()),x.data("outerHeightOffset",x.outerHeight(!0)-x.height())},_e.height=function(e,t){return e||0===e?(_e.dimensions(null,e,t),_e):g.height()},_e.maximize=function(e){return"undefined"==typeof e?g.is(".sceditor-maximize"):(e=!!e,p<7&&t("html, body").toggleClass("sceditor-maximize",e),g.toggleClass("sceditor-maximize",e),_e.width(e?"100%":i.width,!1),_e.height(e?"100%":i.height,!1),_e)},_e.expandToContent=function(e){var t=g.height(),n=t-y.height(),r=_[0].scrollHeight||w[0].documentElement.scrollHeight,o=i.resizeMaxHeight||2*(i.height||xe.height());r+=n,(e===!0||r<=o)&&r>t&&_e.height(r)},_e.destroy=function(){N&&(N.destroy(),S=null,T=null,N=null,E&&E.unbind().remove(),c.unbind("click",re),h.unbind("resize orientationChanged",oe),t(we.form).unbind("reset",te).unbind("submit",_e.updateOriginal),_.unbind(),w.unbind().find("*").remove(),x.unbind().remove(),v.remove(),g.unbind().find("*").unbind().remove(),g.remove(),xe.removeData("sceditor").removeData("sceditorbbcode").show(),I&&xe.attr("required","required"))},_e.createDropDown=function(e,n,r,o){var s,a="sceditor-"+n,l=E&&E.is("."+a);_e.closeDropDown(!0),l||(o!==!1&&t(r).find(":not(input,textarea)").filter(function(){return 1===this.nodeType}).attr("unselectable","on"),s={top:e.offset().top,left:e.offset().left,marginTop:e.outerHeight()},t.extend(s,i.dropDownCss),E=t('<div class="sceditor-dropdown '+a+'" />').css(s).append(r).appendTo(t("body")).on("click focusin",function(e){e.stopPropagation()}),setTimeout(function(){E.find("input,textarea").first().focus()}))},re=function(e){3!==e.which&&E&&(be(),_e.closeDropDown())},G=function(e){
var t,n,r,o=_[0],s=w[0],a=0,l=d.createElement("div"),u=s.createDocumentFragment(),h=!!e&&e.clipboardData;if(i.disablePasting)return!1;if(i.enablePasteFiltering){if(S.saveRange(),d.body.appendChild(l),h&&h.getData&&((t=h.getData("text/html"))||(t=h.getData("text/plain"))))return l.innerHTML=t,Y(o,l),!1;for(r=_.scrollTop()||w.scrollTop();o.firstChild;)u.appendChild(o.firstChild);return n=function(e,t){if(e.childNodes.length>0||a>25){for(;e.firstChild;)t.appendChild(e.firstChild);for(;u.firstChild;)e.appendChild(u.firstChild);_.scrollTop(r),w.scrollTop(r),t.childNodes.length>0?Y(e,t):S.restoreRange()}else a++,setTimeout(function(){n(e,t)},20)},n(o,l),_e.focus(),!0}},Y=function(e,i){o.fixNesting(i);var n=i.innerHTML;N.hasHandler("toSource")&&(n=N.callOnlyFirst("toSource",n,t(i))),i.parentNode.removeChild(i),N.hasHandler("toWysiwyg")&&(n=N.callOnlyFirst("toWysiwyg",n,!0)),S.restoreRange(),_e.wysiwygEditorInsertHtml(n,null,!0)},_e.closeDropDown=function(e){E&&(E.unbind().remove(),E=null),e===!0&&_e.focus()},Q=function(){return b.contentDocument?b.contentDocument:b.contentWindow&&b.contentWindow.document?b.contentWindow.document:b.document},_e.wysiwygEditorInsertHtml=function(e,i,n){var r,s,a,l=y.height();_e.focus(),(n||!t(j).is("code")&&0===t(j).parents("code").length)&&(S.insertHTML(e,i),S.saveRange(),M(_[0]),r=_.find("#sceditor-end-marker").show(),s=_.scrollTop()||w.scrollTop(),a=o.getOffset(r[0]).top+1.5*r.outerHeight(!0)-l,r.hide(),(a>s||a+l<s)&&(_.scrollTop(a),w.scrollTop(a)),ge(!1),S.restoreRange(),ue())},_e.wysiwygEditorInsertText=function(e,t){_e.wysiwygEditorInsertHtml(s.entities(e),s.entities(t))},_e.insertText=function(e,t){return _e.inSourceMode()?_e.sourceEditorInsertText(e,t):_e.wysiwygEditorInsertText(e,t),_e},_e.sourceEditorInsertText=function(e,t){var i,n,r,o=C.selectionStart,s=C.selectionEnd;n=C.scrollTop,C.focus(),"undefined"!=typeof o?(r=C.value,t&&(e+=r.substring(o,s)+t),C.value=r.substring(0,o)+e+r.substring(s,r.length),C.selectionStart=o+e.length-(t?t.length:0),C.selectionEnd=C.selectionStart):(i=d.selection.createRange(),t&&(e+=i.text+t),i.text=e,t&&i.moveEnd("character",0-t.length),i.moveStart("character",i.End-i.Start),i.select()),C.scrollTop=n,C.focus(),ge()},_e.getRangeHelper=function(){return S},_e.sourceEditorCaret=function(e){var t,i={};return C.focus(),"undefined"!=typeof C.selectionStart?e?(C.selectionStart=e.start,C.selectionEnd=e.end):(i.start=C.selectionStart,i.end=C.selectionEnd):(t=d.selection.createRange(),e?(t.moveEnd("character",e.end),t.moveStart("character",e.start),t.select()):(i.start=t.Start,i.end=t.End)),e?this:i},_e.val=function(e,t){return"string"!=typeof e?_e.inSourceMode()?_e.getSourceEditorValue(!1):_e.getWysiwygEditorValue(t):(_e.inSourceMode()?_e.setSourceEditorValue(e):(t!==!1&&N.hasHandler("toWysiwyg")&&(e=N.callOnlyFirst("toWysiwyg",e)),_e.setWysiwygEditorValue(e)),_e)},_e.insert=function(e,i,n,r,o){if(_e.inSourceMode())return _e.sourceEditorInsertText(e,i),_e;if(i){var s=S.selectedHtml(),a=t("<div>").appendTo(t("body")).hide().html(s);n!==!1&&N.hasHandler("toSource")&&(s=N.callOnlyFirst("toSource",s,a)),a.remove(),e+=s+i}return n!==!1&&N.hasHandler("toWysiwyg")&&(e=N.callOnlyFirst("toWysiwyg",e,!0)),n!==!1&&o===!0&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),_e.wysiwygEditorInsertHtml(e),_e},_e.getWysiwygEditorValue=function(e){var i,n=t("<div>").appendTo(document.body).append(t(_[0].childNodes).clone());return o.fixNesting(n[0]),i=n.html(),e!==!1&&N.hasHandler("toSource")&&(i=N.callOnlyFirst("toSource",i,n)),n.remove(),i},_e.getBody=function(){return _},_e.getContentAreaContainer=function(){return y},_e.getSourceEditorValue=function(e){var t=x.val();return e!==!1&&N.hasHandler("toWysiwyg")&&(t=N.callOnlyFirst("toWysiwyg",t)),t},_e.setWysiwygEditorValue=function(e){e||(e="<p>"+(p?"":"<br />")+"</p>"),_[0].innerHTML=e,M(_[0]),ue(),ge()},_e.setSourceEditorValue=function(e){x.val(e),ge()},_e.updateOriginal=function(){xe.val(_e.val())},M=function(e){if(i.emoticonsEnabled&&!t(e).parents("code").length){var n=e.ownerDocument,r="\\s| | | | |&nbsp;",a=[],u=[],d=t.extend({},i.emoticons.more,i.emoticons.dropdown,i.emoticons.hidden);t.each(d,function(e){i.emoticonsCompat&&(u[e]=new RegExp("(>|^|"+r+")"+s.regex(e)+"($|<|"+r+")")),a.push(e)});var h=function(e){for(e=e.firstChild;e;){var r,s,c,p,f,m,g,v=e.parentNode,y=e.nodeValue;if(3!==e.nodeType)t(e).is("code")||h(e);else if(y)for(f=a.length;f--;)s=a[f],g=i.emoticonsCompat?y.search(u[s]):y.indexOf(s),g>-1&&(m=e.nextSibling,c=d[s],r=y.substr(g).split(s),y=y.substr(0,g)+r.shift(),e.nodeValue=y,p=o.parseHTML(l("emoticon",{key:s,url:c.url||c,tooltip:c.tooltip||s}),n),v.insertBefore(p[0],m),v.insertBefore(n.createTextNode(r.join(s)),m));e=e.nextSibling}};h(e),i.emoticonsCompat&&(Se=_.find("img[data-sceditor-emoticon]"))}},_e.inSourceMode=function(){return g.hasClass("sourceMode")},_e.sourceMode=function(e){var t=_e.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&_e.toggleSourceMode(),_e)},_e.toggleSourceMode=function(){var e=_e.inSourceMode();!a.isWysiwygSupported&&e||(e||(S.saveRange(),S.clear()),_e.blur(),e?_e.setWysiwygEditorValue(_e.getSourceEditorValue()):_e.setSourceEditorValue(_e.getWysiwygEditorValue()),T=null,x.toggle(),y.toggle(),g.toggleClass("wysiwygMode",e).toggleClass("sourceMode",!e),se(),ae())},le=function(){return C.focus(),"undefined"!=typeof C.selectionStart?C.value.substring(C.selectionStart,C.selectionEnd):d.selection.createRange().text},B=function(e,i){_e.inSourceMode()?i.txtExec&&(t.isArray(i.txtExec)?_e.sourceEditorInsertText.apply(_e,i.txtExec):i.txtExec.call(_e,e,le())):i.exec&&(t.isFunction(i.exec)?i.exec.call(_e,e):_e.execCommand(i.exec,i.hasOwnProperty("execParam")?i.execParam:null))},R=function(){p&&(T=S.selectedRange())},_e.execCommand=function(e,i){var n=!1,r=_e.commands[e],o=t(S.parentNode());if(_e.focus(),!o.is("code")&&0===o.parents("code").length){try{n=w[0].execCommand(e,!1,i)}catch(s){}!n&&r&&r.errorMessage&&alert(_e._(r.errorMessage)),ae()}},de=function(){function e(){S&&!S.compare(O)&&(O=S.cloneSelected(),g.trigger(t.Event("selectionchanged"))),H=!1}H||(H=!0,p?e():setTimeout(e,100))},he=function(){var e,i=S.parentNode();A!==i&&(e=A,A=i,j=S.getFirstBlockParent(i),g.trigger(t.Event("nodechanged",{oldNode:e,newNode:A})))},_e.currentNode=function(){return A},_e.currentBlockNode=function(){return j},ae=function(e){var t,i,n="active",r=w[0],o=_e.sourceMode();if(_e.readOnly())return void v.find(n).removeClass(n);o||(i=e?e.newNode:S.parentNode(),t=S.getFirstBlockParent(i));for(var s=0;s<Te.length;s++){var a=0,l=Ne[Te[s].name],u=Te[s].state,d=o&&!l.data("sceditor-txtmode")||!o&&!l.data("sceditor-wysiwygmode");if("string"==typeof u){if(!o)try{a=r.queryCommandEnabled(u)?0:-1,a>-1&&(a=r.queryCommandState(u)?1:0)}catch(h){}}else d||(a=u.call(_e,i,t));l.toggleClass("disabled",d||a<0).toggleClass(n,a>0)}},ee=function(e){var i,n,r,s,a="code,blockquote,pre",l="li,ul,ol";if(!e.originalEvent.defaultPrevented)return _e.closeDropDown(),i=t(j).closest(a+","+l).first(),13===e.which&&i.length&&!i.is(l)?(T=null,n=w[0].createElement("br"),S.insertNode(n),f||(r=n.parentNode,s=r.lastChild,s&&3===s.nodeType&&""===s.nodeValue&&(r.removeChild(s),s=r.lastChild),!o.isInline(r,!0)&&s===n&&o.isInline(n.previousSibling)&&S.insertHTML("<br>")),!1):void 0},ue=function(){var e,i,n,r=_[0];o.rTraverse(r,function(s){if(e=s.nodeName.toLowerCase(),t.inArray(e,Ee)>-1&&(i=!0),3===s.nodeType&&!/^\s*$/.test(s.nodeValue)||"br"===e||f&&!s.firstChild&&!o.isInline(s,!1))return i&&(n=w[0].createElement("p"),n.className="sceditor-nlf",n.innerHTML=f?"":"<br />",r.appendChild(n)),!1})},te=function(){_e.val(xe.val())},ie=function(){_e.closeDropDown(),T=null},oe=function(){var e=i.height,t=i.width;_e.maximize()?_e.dimensions("100%","100%",!1):(e&&e.toString().indexOf("%")>-1||t&&t.toString().indexOf("%")>-1)&&_e.dimensions(t,e)},_e._=function(){var e,t=arguments;return k&&k[t[0]]&&(t[0]=k[t[0]]),t[0].replace(/\{(\d+)\}/g,function(i,n){return t[n-0+1]!==e?t[n-0+1]:"{"+n+"}"})},ne=function(e){N.call(e.type+"Event",e,_e);var i=e.target===C?"scesrc":"scewys",n=t.Event(e);n.type=i+e.type,g.trigger(n,_e)},_e.bind=function(e,i,n,r){e=e.split(" ");for(var o=e.length;o--;)t.isFunction(i)&&(n||g.bind("scewys"+e[o],i),r||g.bind("scesrc"+e[o],i),"valuechanged"===e[o]&&(ge.hasHandler=!0));return _e},_e.unbind=function(e,i,n,r){e=e.split(" ");for(var o=e.length;o--;)t.isFunction(i)&&(n||g.unbind("scewys"+e[o],i),r||g.unbind("scesrc"+e[o],i));return _e},_e.blur=function(e,i,n){return t.isFunction(e)?_e.bind("blur",e,i,n):_e.sourceMode()?x.blur():_.blur(),_e},_e.focus=function(e,i,n){if(t.isFunction(e))_e.bind("focus",e,i,n);else if(_e.inSourceMode())C.focus();else{var r,o=S.selectedRange();O||S.hasSelection()||ce(),!f&&o&&1===o.endOffset&&o.collapsed&&(r=o.endContainer,r&&1===r.childNodes.length&&t(r.firstChild).is("br")&&(o.setStartBefore(r.firstChild),o.collapse(!0),S.selectRange(o))),b.contentWindow.focus(),_[0].focus(),T&&(S.selectRange(T),T=null)}return ae(),_e},_e.keyDown=function(e,t,i){return _e.bind("keydown",e,t,i)},_e.keyPress=function(e,t,i){return _e.bind("keypress",e,t,i)},_e.keyUp=function(e,t,i){return _e.bind("keyup",e,t,i)},_e.nodeChanged=function(e){return _e.bind("nodechanged",e,!1,!0)},_e.selectionChanged=function(e){return _e.bind("selectionchanged",e,!1,!0)},_e.valueChanged=function(e,t,i){return _e.bind("valuechanged",e,t,i)},pe=function(e){var n,r=0,o=_e.emoticonsCache,s=String.fromCharCode(e.which);if(!t(j).is("code")&&!t(j).parents("code").length)return o||(o=[],t.each(t.extend({},i.emoticons.more,i.emoticons.dropdown,i.emoticons.hidden),function(e,t){o[r++]=[e,l("emoticon",{key:e,url:t.url||t,tooltip:t.tooltip||e})]}),o.sort(function(e,t){return e[0].length-t[0].length}),_e.emoticonsCache=o,_e.longestEmoticonCode=o[o.length-1][0].length),n=S.replaceKeyword(_e.emoticonsCache,!0,!0,_e.longestEmoticonCode,i.emoticonsCompat,s),n&&i.emoticonsCompat?(Se=_.find("img[data-sceditor-emoticon]"),/^\s$/.test(s)):!n},fe=function(){if(Se.length){var e,i,n,r,o,s,a=_e.currentBlockNode(),l=!1,u=/[^\s\xA0\u2002\u2003\u2009\u00a0]+/;Se=t.map(Se,function(d){return d&&d.parentNode?t.contains(a,d)?(e=d.previousSibling,i=d.nextSibling,o=e.nodeValue,null===o&&(o=e.innerText||""),e&&u.test(e.nodeValue.slice(-1))||i&&u.test((i.nodeValue||"")[0])?(n=d.parentNode,r=S.cloneSelected(),s=r.startContainer,o+=t(d).data("sceditor-emoticon"),s===i?l=o.length+r.startOffset:s===a&&a.childNodes[r.startOffset]===i?l=o.length:s===e&&(l=r.startOffset),i&&3===i.nodeType||(i=n.insertBefore(n.ownerDocument.createTextNode(""),i)),i.insertData(0,o),n.removeChild(e),n.removeChild(d),l!==!1&&(r.setStart(i,l),r.collapse(!0),S.selectRange(r)),null):d):d:null})}},_e.emoticons=function(e){return e||e===!1?(i.emoticonsEnabled=e,e?(_.keypress(pe),_e.sourceMode()||(S.saveRange(),M(_[0]),Se=_.find("img[data-sceditor-emoticon]"),ge(!1),S.restoreRange())):(_.find("img[data-sceditor-emoticon]").replaceWith(function(){return t(this).data("sceditor-emoticon")}),Se=[],_.unbind("keypress",pe),ge()),_e):i.emoticonsEnabled},_e.css=function(e){return L||(L=t('<style id="#inline" />',w[0]).appendTo(w.find("head"))[0]),"string"!=typeof e?L.styleSheet?L.styleSheet.cssText:L.innerHTML:(L.styleSheet?L.styleSheet.cssText=e:L.innerHTML=e,_e)},K=function(e){var t=[],i={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},n={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},o=e.which,s=n[o]||String.fromCharCode(o).toLowerCase();if(e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),r[o]?s=r[o]:i[s]&&(s=i[s])),s&&(o<16||o>18)&&t.push(s),t=t.join("+"),ke[t])return ke[t].call(_e)},_e.addShortcut=function(e,t){return e=e.toLowerCase(),"string"==typeof t?ke[e]=function(){return B(Ne[t],_e.commands[t]),!1}:ke[e]=t,_e},_e.removeShortcut=function(e){return delete ke[e.toLowerCase()],_e},Z=function(e){var n,r,o,s,a;if(!i.disableBlockRemove&&8===e.which&&(s=S.selectedRange())&&(u.getSelection?(n=s.startContainer,r=s.startOffset):(n=s.parentElement(),o=w[0].selection.createRange(),o.moveToElementText(n),o.setEndPoint("EndToStart",s),r=o.text.length),0===r&&(a=me()))){for(;n!==a;){for(;n.previousSibling;)if(n=n.previousSibling,3!==n.nodeType||n.nodeValue)return;if(!(n=n.parentNode))return}if(a&&!t(a).is("body"))return _e.clearBlockFormatting(a),!1}},me=function(){for(var e=j;!o.hasStyling(e)||o.isInline(e,!0);)if(!(e=e.parentNode)||t(e).is("body"))return;return e},_e.clearBlockFormatting=function(e){return e=e||me(),!e||t(e).is("body")?_e:(S.saveRange(),e.className="",T=null,t(e).attr("style",""),t(e).is("p,div,td")||o.convertElement(e,"p"),S.restoreRange(),_e)},ge=function(e){if(N&&(N.hasHandler("valuechangedEvent")||ge.hasHandler)){var i,n=_e.sourceMode(),r=!n&&S.hasSelection();e=e!==!1&&!w[0].getElementById("sceditor-start-marker"),ye.timer&&(clearTimeout(ye.timer),ye.timer=!1),r&&e&&S.saveRange(),i=n?x.val():_.html(),i!==ge.lastHtmlValue&&(ge.lastHtmlValue=i,g.trigger(t.Event("valuechanged",{rawValue:n?_e.val():i}))),r&&e&&S.removeMarkers()}},ve=function(){ye.timer&&ge()},ye=function(e){var t=e.which,i=ye.lastChar,n=13===i||32===i,r=8===i||46===i;ye.lastChar=t,13===t||32===t?n?ye.triggerNextChar=!0:ge():8===t||46===t?r?ye.triggerNextChar=!0:ge():ye.triggerNextChar&&(ge(),ye.triggerNextChar=!1),ye.timer&&clearTimeout(ye.timer),ye.timer=setTimeout(function(){ge()},1500)},be=function(){D||_e.updateOriginal(),D=!1},P()};return m.locale={},m.command={get:function(e){return m.commands[e]||null},set:function(e,i){return!(!e||!i)&&(i=t.extend(m.commands[e]||{},i),i.remove=function(){m.command.remove(e)},m.commands[e]=i,this)},remove:function(e){return m.commands[e]&&delete m.commands[e],this}},m}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n;n=function(){"use strict";var e={},t=function(t){var i=this,n=[],r=function(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)},o=function(e,i){e=[].slice.call(e);var o,s,a=r(e.shift());for(o=0;o<n.length;o++)if(a in n[o]&&(s=n[o][a].apply(t,e),i))return s};i.call=function(){o(arguments,!1)},i.callOnlyFirst=function(){return o(arguments,!0)},i.hasHandler=function(e){var t=n.length;for(e=r(e);t--;)if(e in n[t])return!0;return!1},i.exists=function(t){return t in e&&(t=e[t],"function"==typeof t&&"object"==typeof t.prototype)},i.isRegistered=function(t){if(i.exists(t))for(var r=n.length;r--;)if(n[r]instanceof e[t])return!0;return!1},i.register=function(r){return!(!i.exists(r)||i.isRegistered(r)||(r=new e[r],n.push(r),"init"in r&&r.init.call(t),0))},i.deregister=function(r){var o,s=n.length,a=!1;if(!i.isRegistered(r))return a;for(;s--;)n[s]instanceof e[r]&&(o=n.splice(s,1)[0],a=!0,"destroy"in o&&o.destroy.call(t));return a},i.destroy=function(){for(var e=n.length;e--;)"destroy"in n[e]&&n[e].destroy.call(t);n=[],t=null}};return t.plugins=e,t}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n;n=function(e){"use strict";var t=i(1),n=i(5),r=i(7),o=i(6),s=o.ie,a=s&&s<11,l=function(e){return t("<p>",e.ownerDocument).append(e).html()},u=function(e,t,i){var n,r,o,s,a,l="",u=e.startContainer,d=e.startOffset;for(u&&3!==u.nodeType&&(u=u.childNodes[d],d=0),o=s=d;i>l.length&&u&&3===u.nodeType;)n=u.nodeValue,r=i-l.length,a&&(s=n.length,o=0),a=u,t?(o=Math.max(s-r,0),d=o,l=n.substr(o,s-o)+l,u=a.previousSibling):(s=Math.min(r,n.length),d=o+s,l+=n.substr(o,s),u=a.nextSibling);return{node:a||u,offset:d,text:l}},d=function(e,i){var o,d,h,c=i||e.contentDocument||e.document,p=e,f=!!e.getSelection,m="sceditor-start-marker",g="sceditor-end-marker",v="character",y=this;y.insertHTML=function(e,t){var i,n,r=y.selectedRange();if(!r)return!1;if(f){for(t&&(e+=y.selectedHtml()+t),n=c.createElement("p"),i=c.createDocumentFragment(),n.innerHTML=e;n.firstChild;)i.appendChild(n.firstChild);y.insertNode(i)}else r.pasteHTML(h(e,t,!0)),y.restoreRange()},h=function(e,i,r){var a,l,u=c.createElement("div"),d=t(u);if("string"==typeof e?(i&&(e+=y.selectedHtml()+i),d.html(e)):(d.append(e),i&&d.append(y.selectedRange().extractContents()).append(i)),a=u.lastChild){for(;!n.isInline(a.lastChild,!0);)a=a.lastChild;return n.canHaveChildren(a)&&(l=t(a),a.lastChild||l.append("​")),s&&s<9&&t(a).is("img")&&d.append("​"),y.removeMarkers(),(l||d).append(o(m)).append(o(g)),r?d.html():t(c.createDocumentFragment()).append(d.contents())[0]}},y.insertNode=function(e,t){if(f){var i=h(e,t),r=y.selectedRange(),o=r.commonAncestorContainer;if(!i)return!1;r.deleteContents(),o&&3!==o.nodeType&&!n.canHaveChildren(o)?o.parentNode.insertBefore(i,o):r.insertNode(i),y.restoreRange()}else y.insertHTML(l(e),t?l(t):null)},y.cloneSelected=function(){var e=y.selectedRange();if(e)return f?e.cloneRange():e.duplicate()},y.selectedRange=function(){var e,t,i=f?p.getSelection():c.selection;if(i){if(i.getRangeAt&&i.rangeCount<=0){for(t=c.body;t.firstChild;)t=t.firstChild;e=c.createRange(),e.setStartBefore(t),i.addRange(e)}return f&&(e=i.getRangeAt(0)),f||"Control"===i.type||(e=i.createRange()),d(e)?e:null}},d=function(e){var t;return e&&!f&&(t=e.parentElement()),!t||t.ownerDocument===c},y.hasSelection=function(){var e=f?p.getSelection():c.selection;return f||!e?e&&e.rangeCount>0:"None"!==e.type&&d(e.createRange())},y.selectedHtml=function(){var e,t=y.selectedRange();if(t){if(f)return e=c.createElement("p"),e.appendChild(t.cloneContents()),e.innerHTML;if(""!==t.text&&t.htmlText)return t.htmlText}return""},y.parentNode=function(){var e=y.selectedRange();if(e)return e.parentElement?e.parentElement():e.commonAncestorContainer},y.getFirstBlockParent=function(e){var t=function(e){return n.isInline(e,!0)?(e=e?e.parentNode:null,e?t(e):e):e};return t(e||y.parentNode())},y.insertNodeAt=function(e,t){var i=y.selectedRange(),n=y.cloneSelected();return!!n&&(n.collapse(e),f?n.insertNode(t):n.pasteHTML(l(t)),void y.selectRange(i))},o=function(e){y.removeMarker(e);var t=c.createElement("span");return t.id=e,t.style.lineHeight="0",t.style.display="none",t.className="sceditor-selection sceditor-ignore",t.innerHTML=" ",t},y.insertMarkers=function(){y.insertNodeAt(!0,o(m)),y.insertNodeAt(!1,o(g))},y.getMarker=function(e){return c.getElementById(e)},y.removeMarker=function(e){var t=y.getMarker(e);t&&t.parentNode.removeChild(t)},y.removeMarkers=function(){y.removeMarker(m),y.removeMarker(g)},y.saveRange=function(){y.insertMarkers()},y.selectRange=function(e){if(f){var i,r=p.getSelection(),o=e.endContainer;if(!a&&e.collapsed&&o&&!n.isInline(o,!0)){for(i=o.lastChild;i&&t(i).is(".sceditor-ignore");)i=i.previousSibling;if(t(i).is("br")){var s=c.createRange();s.setEndAfter(i),s.collapse(!1),y.compare(e,s)&&(e.setStartBefore(i),e.collapse(!0))}}r&&(y.clear(),r.addRange(e))}else e.select()},y.restoreRange=function(){var e,i,r,o=y.selectedRange(),s=y.getMarker(m),a=y.getMarker(g);return!!(s&&a&&o)&&(i=s.nextSibling===a,f?(o=c.createRange(),o.setStartBefore(s),o.setEndAfter(a)):(o=c.body.createTextRange(),e=c.body.createTextRange(),r=s.previousSibling,s.nextSibling!==a||r&&n.isInline(r,!0)&&!t(r).is("br")||t(s).before("​"),e.moveToElementText(s),o.setEndPoint("StartToStart",e),o.moveStart(v,0),e.moveToElementText(a),o.setEndPoint("EndToStart",e),o.moveEnd(v,0)),i&&o.collapse(!0),y.selectRange(o),void y.removeMarkers())},y.selectOuterText=function(e,t){var i,n,r=y.cloneSelected();return!!r&&(r.collapse(!1),f?(i=u(r,!0,e),n=u(r,!1,t),r.setStart(i.node,i.offset),r.setEnd(n.node,n.offset)):(r.moveStart(v,0-e),r.moveEnd(v,t)),void y.selectRange(r))},y.getOuterText=function(e,t){var i=y.cloneSelected();return i?(i.collapse(!e),f?u(i,e,t).text:(e?i.moveStart(v,0-t):i.moveEnd(v,t),i.text)):""},y.replaceKeyword=function(e,t,i,n,o,s){i||e.sort(function(e,t){return e[0].length-t[0].length});var a,l,u,d,h,c,p,m="[\\s    ]",g=e.length,v=o?1:0,b=n||e[g-1][0].length;if(o){if(!f)return!1;b++}for(s=s||"",a=y.getOuterText(!0,b),d=a.length,a+=s,t&&(a+=y.getOuterText(!1,b));g--;)if(c=e[g][0],p=c.length,u=Math.max(0,d-p-v),l=o?a.substr(u).search(new RegExp("(?:"+m+")"+r.regex(c)+"(?="+m+")")):a.indexOf(c,u),l>-1&&(o&&(l+=u+1),l<=d&&l+p+v>=d))return h=d-l,y.selectOuterText(h,p-h-(/^\S/.test(s)?1:0)),y.insertHTML(e[g][1]),!0;return!1},y.compare=function(e,t){var i=f?Range.END_TO_END:"EndToEnd",n=f?Range.START_TO_START:"StartToStart",r=f?"compareBoundaryPoints":"compareEndPoints";return t||(t=y.selectedRange()),e&&t?d(e)&&d(t)&&0===e[r](i,t)&&0===e[r](n,t):!e&&!t},y.clear=function(){var e=f?p.getSelection():c.selection;e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())}};return d}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n;n=function(e){"use strict";var t=i(1),n=i(6),r={},o={traverse:function(e,t,i,n,r){if(e)for(e=r?e.lastChild:e.firstChild;e;){var s=r?e.previousSibling:e.nextSibling;if(!i&&t(e)===!1||!n&&o.traverse(e,t,i,n,r)===!1||i&&t(e)===!1)return!1;e=s}},rTraverse:function(e,t,i,n){this.traverse(e,t,i,n,!0)},parseHTML:function(e,i){var n=[],r=(i||document).createElement("div");return r.innerHTML=e,t.merge(n,r.childNodes),n},hasStyling:function(e){var i=t(e);return e&&(!i.is("p,div")||e.className||i.attr("style")||!t.isEmptyObject(i.data()))},convertElement:function(e,t){for(var i,r,s=e.attributes,a=s.length,l=e.ownerDocument.createElement(t);a--;)if(r=s[a],!n.ie||r.specified)if(n.ie<8&&/style/i.test(r.name))o.copyCSS(e,l);else try{l.setAttribute(r.name,r.value)}catch(u){}for(;i=e.firstChild;)l.appendChild(i);return e.parentNode.replaceChild(l,e),l},blockLevelList:"|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|",canHaveChildren:function(e){return!!/11?|9/.test(e.nodeType)&&"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf("|"+e.nodeName.toLowerCase()+"|")<0},isInline:function(e,t){var i,n=(e||{}).nodeType||3;return 1!==n?3===n:(i=e.tagName.toLowerCase(),"code"===i?!t:o.blockLevelList.indexOf("|"+i+"|")<0)},copyCSS:function(e,t){t.style.cssText=e.style.cssText+t.style.cssText},fixNesting:function(e){var t=function(e){for(;o.isInline(e.parentNode,!0);)e=e.parentNode;return e};o.traverse(e,function(e){if(1===e.nodeType&&!o.isInline(e,!0)&&o.isInline(e.parentNode,!0)){var i=t(e),n=i.parentNode,r=o.extractContents(i,e),s=e;o.copyCSS(i,s),n.insertBefore(r,i),n.insertBefore(s,i)}})},findCommonAncestor:function(e,i){return t(e).parents().has(t(i)).first()},getSibling:function(e,t){return e?(t?e.previousSibling:e.nextSibling)||o.getSibling(e.parentNode,t):null},removeWhiteSpace:function(e,i){for(var n,r,s,a,l,u,d,h,c=o.getSibling,p=o.isInline,f=e.firstChild;f;){if(d=f.nextSibling,n=f.nodeValue,r=f.nodeType,1===r&&f.firstChild&&(u=t(f).css("whiteSpace"),/pre(\-wrap)?$/i.test(u)||o.removeWhiteSpace(f,/line$/i.test(u))),3===r&&n){for(s=c(f),a=c(f,!0),h=!1;t(a).hasClass("sceditor-ignore");)a=c(a,!0);if(p(f)&&a){for(l=a;l.lastChild;)l=l.lastChild;h=3===l.nodeType?/[\t\n\r ]$/.test(l.nodeValue):!p(l)}n=n.replace(/\u200B/g,""),a&&p(a)&&!h||(n=n.replace(i?/^[\t ]+/:/^[\t\n\r ]+/,"")),s&&p(s)||(n=n.replace(i?/[\t ]+$/:/[\t\n\r ]+$/,"")),n.length?f.nodeValue=n.replace(i?/[\t ]+/g:/[\t\n\r ]+/g," "):e.removeChild(f)}f=d}},extractContents:function(e,i){var n,r=o.findCommonAncestor(e,i).get(0),s=!1,a=!1;return(n=function(r){var l,u=e.ownerDocument.createDocumentFragment();return o.traverse(r,function(r){return a||r===i?(a=!0,!1):(r===e&&(s=!0),void(t.contains(r,e)||s&&t.contains(r,i)?(l=r.cloneNode(!1),l.appendChild(n(r)),u.appendChild(l)):s&&!t.contains(u,r)&&u.appendChild(r)))},!1),u})(r)},getOffset:function(e){for(var t=0,i=0;e;)t+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:t,top:i}},getStyle:function(e,i){var n,o,s,a=e.style;if(!a)return"";if(r[i]||(r[i]=t.camelCase(i)),i=r[i],s=a[i],"textAlign"===i){if(n=t(e),o=a.direction,s=s||n.css(i),n.parent().css(i)===s||"block"!==n.css("display")||n.is("hr")||n.is("th"))return"";if(/right/i.test(s)&&"rtl"===o||/left/i.test(s)&&"ltr"===o)return""}return s},hasStyle:function(e,i,n){var r=o.getStyle(e,i);return!!r&&(!n||r===n||t.isArray(n)&&t.inArray(r,n)>-1)}};return o}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n;n=function(e,t){"use strict";var n=i(1),r=navigator.userAgent;t.ie=function(){var e,t=3,i=document,n=i.createElement("div"),r=n.getElementsByTagName("i");do n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->";while(r[0]);return i.documentMode&&i.all&&window.atob&&(t=10),4===t&&i.documentMode&&(t=11),t>4?t:e}(),t.ios=/iPhone|iPod|iPad| wosbrowser\//i.test(r),t.isWysiwygSupported=function(){var e,i,o,s=n('<p contenteditable="true">')[0].contentEditable;return s!==o&&"inherit"!==s&&(i=/Opera Mobi|Opera Mini/i.test(r),/Android/i.test(r)&&(i=!0,/Safari/.test(r)&&(e=/Safari\/(\d+)/.exec(r),i=!e||!e[1]||e[1]<534)),/ Silk\//i.test(r)&&(e=/AppleWebKit\/(\d+)/.exec(r),i=!e||!e[1]||e[1]<534),t.ios&&(i=/OS [0-4](_\d)+ like Mac/i.test(r)),/Firefox/i.test(r)&&(i=!1),/OneBrowser/i.test(r)&&(i=!1),"UCWEB"===navigator.vendor&&(i=!1),!i)}()}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n;n=function(e,t){"use strict";var i=/^(?:https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(?:\/\/)/i;t.regex=function(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},t.entities=function(e,t){if(!e)return e;var i={"&":"&amp;","<":"&lt;",">":"&gt;","  ":" &nbsp;","\r\n":"\n","\r":"\n","\n":"<br />"};return t!==!1&&(i['"']="&#34;",i["'"]="&#39;",i["`"]="&#96;"),e=e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return i[e]||e})},t.uriScheme=function(e){var t,n=/^[^\/]*:/i,r=window.location;return e&&n.test(e)&&!i.test(e)?(t=r.pathname.split("/"),t.pop(),r.protocol+"//"+r.host+t.join("/")+"/"+e):e}}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n;n=function(){"use strict";var e={html:'<!DOCTYPE html><html{attrs}><head><style>.ie * {min-height: auto !important} .ie table td {height:15px}</style><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="link">{url}</label> <input type="text" id="image" placeholder="http://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" placeholder="http://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" placeholder="https://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" src="https://www.youtube.com/embed/{id}?wmode=opaque" data-youtube-id="{id}" frameborder="0" allowfullscreen></iframe>'};return function(t,i,n){var r=e[t];return $.each(i,function(e,t){r=r.replace(new RegExp("\\{"+e+"\\}","g"),t)}),n&&(r=$(r)),r}}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n;n=function(e){"use strict";var t=i(1),n=i(6).ie,r=i(8),o=n&&n<11,s={bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(e,i,n){for(var o=0,s=e.opts.fonts.split(","),a=t("<div />"),l=function(){return n(t(this).data("font")),e.closeDropDown(!0),!1};o<s.length;o++)a.append(r("fontOpt",{font:s[o]},!0).click(l));e.createDropDown(i,"font-picker",a)},exec:function(e){var t=this;s.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(e,i,n){for(var o=t("<div />"),s=function(i){n(t(this).data("size")),e.closeDropDown(!0),i.preventDefault()},a=1;a<=7;a++)o.append(r("sizeOpt",{size:a},!0).click(s));e.createDropDown(i,"fontsize-picker",o)},exec:function(e){var t=this;s.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(e,i,n){var r,o,a,l,u={r:255,g:255,b:255},d=t("<div />"),h=e.opts.colors?e.opts.colors.split("|"):new Array(21),c=[],p=s.color;if(!p._htmlCache){for(r=0;r<h.length;++r){for(l=h[r]?h[r].split(","):new Array(21),c.push('<div class="sceditor-color-column">'),o=0;o<l.length;++o)a=l[o]||"#"+u.r.toString(16)+u.g.toString(16)+u.b.toString(16),c.push('<a href="#" class="sceditor-color-option" style="background-color: '+a+'" data-color="'+a+'"></a>'),o%5===0?(u.g-=51,u.b=255):u.b-=51;c.push("</div>"),r%5===0?(u.r-=51,u.g=255,u.b=255):(u.g=255,u.b=255)}p._htmlCache=c.join("")}d.append(p._htmlCache).find("a").click(function(i){n(t(this).attr("data-color")),e.closeDropDown(!0),i.preventDefault()}),e.createDropDown(i,"color-picker",d)},exec:function(e){var t=this;s.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,i,n=this;i=r("pastetext",{label:n._("Paste your text inside the following box:"),insert:n._("Insert")},!0),i.find(".button").click(function(e){t=i.find("#txt").val(),t&&n.wysiwygEditorInsertText(t),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"pastetext",i)},tooltip:"Paste Text"},bulletlist:{
exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},indent:{state:function(e,i){var n,r,o,s=t(i),a=s.parents("ul,ol,menu"),l=a.first();if(a.length>1||l.children().length>1)return 0;if(s.is("ul,ol,menu")){if(n=this.getRangeHelper().selectedRange(),!(window.Range&&n instanceof Range))return s.is("li,ul,ol,menu")?0:-1;if(r=n.startContainer.parentNode,o=n.endContainer.parentNode,r!==r.parentNode.firstElementChild||t(o).is("li")&&o!==o.parentNode.lastElementChild)return 0}return-1},exec:function(){var e=this,i=t(e.getRangeHelper().getFirstBlockParent());e.focus(),i.parents("ul,ol,menu")&&e.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(e,i){return t(i).is("ul,ol,menu")||t(i).parents("ul,ol,menu").length>0?0:-1},exec:function(){var e=this,i=t(e.getRangeHelper().getFirstBlockParent());i.parents("ul,ol,menu")&&e.execCommand("outdent")},tooltip:"Remove one indent"},table:{forceNewLineAfter:["table"],exec:function(e){var t=this,i=r("table",{rows:t._("Rows:"),cols:t._("Cols:"),insert:t._("Insert")},!0);i.find(".button").click(function(e){var n,r,s=i.find("#rows").val()-0,a=i.find("#cols").val()-0,l="<table>";if(!(s<1||a<1)){for(n=0;n<s;n++){for(l+="<tr>",r=0;r<a;r++)l+="<td>"+(o?"":"<br />")+"</td>";l+="</tr>"}l+="</table>",t.wysiwygEditorInsertHtml(l),t.closeDropDown(!0),e.preventDefault()}}),t.createDropDown(e,"inserttable",i)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{forceNewLineAfter:["code"],exec:function(){this.wysiwygEditorInsertHtml("<code>",(o?"":"<br />")+"</code>")},tooltip:"Code"},image:{exec:function(e){var t=this,i=r("image",{url:t._("URL:"),width:t._("Width (optional):"),height:t._("Height (optional):"),insert:t._("Insert")},!0);i.find(".button").click(function(e){var n=i.find("#image").val(),r=i.find("#width").val(),o=i.find("#height").val(),s="";r&&(s+=' width="'+r+'"'),o&&(s+=' height="'+o+'"'),n&&t.wysiwygEditorInsertHtml("<img"+s+' src="'+n+'" />'),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertimage",i)},tooltip:"Insert an image"},email:{exec:function(e){var t=this,i=r("email",{label:t._("E-mail:"),desc:t._("Description (optional):"),insert:t._("Insert")},!0);i.find(".button").click(function(e){var n=i.find("#email").val(),r=i.find("#des").val();n&&(t.focus(),!t.getRangeHelper().selectedHtml()||r?(r=r||n,t.wysiwygEditorInsertHtml('<a href="mailto:'+n+'">'+r+"</a>")):t.execCommand("createlink","mailto:"+n)),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertemail",i)},tooltip:"Insert an email"},link:{exec:function(e){var t=this,i=r("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0);i.find(".button").click(function(e){var n=i.find("#link").val(),r=i.find("#des").val();n&&(t.focus(),!t.getRangeHelper().selectedHtml()||r?(r=r||n,t.wysiwygEditorInsertHtml('<a href="'+n+'">'+r+"</a>")):t.execCommand("createlink",n)),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertlink",i)},tooltip:"Insert a link"},unlink:{state:function(){var e=t(this.currentNode());return e.is("a")||e.parents("a").length>0?0:-1},exec:function(){var e=t(this.currentNode()),i=e.is("a")?e:e.parents("a").first();i.length&&i.replaceWith(i.contents())},tooltip:"Unlink"},quote:{forceNewLineAfter:["blockquote"],exec:function(e,t,i){var n="<blockquote>",r="</blockquote>";t?(i=i?"<cite>"+i+"</cite>":"",n=n+i+t+r,r=null):""===this.getRangeHelper().selectedHtml()&&(r=(o?"":"<br />")+r),this.wysiwygEditorInsertHtml(n,r)},tooltip:"Insert a Quote"},emoticon:{exec:function(e){var i=this,n=function(r){var o,s=i.opts.emoticonsCompat,a=i.getRangeHelper(),l=s&&" "!==a.getOuterText(!0,1)?" ":"",u=s&&" "!==a.getOuterText(!1,1)?" ":"",d=t("<div />"),h=t("<div />").appendTo(d),c=0,p=t.extend({},i.opts.emoticons.dropdown,r?i.opts.emoticons.more:{});return t.each(p,function(){c++}),c=Math.sqrt(c),t.each(p,function(e,n){h.append(t("<img />").attr({src:n.url||n,alt:e,title:n.tooltip||e}).click(function(){return i.insert(l+t(this).attr("alt")+u,null,!1).closeDropDown(!0),!1})),h.children().length>=c&&(h=t("<div />").appendTo(d))}),!r&&i.opts.emoticons.more&&(o=t('<a class="sceditor-more">'+i._("More")+"</a>").click(function(){return i.createDropDown(e,"more-emoticons",n(!0)),!1}),d.append(o)),d};i.createDropDown(e,"emoticons",n(!1))},txtExec:function(e){s.emoticon.exec.call(this,e)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(e,t,i){var n,o=r("youtubeMenu",{label:e._("Video URL:"),insert:e._("Insert")},!0);o.find(".button").click(function(t){var r=o.find("#link").val();r&&(n=r.match(/(?:v=|v\/|embed\/|youtu.be\/)(.{11})/),n&&(r=n[1]),/^[a-zA-Z0-9_\-]{11}$/.test(r)?i(r):alert("Invalid YouTube video")),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertlink",o)},exec:function(e){var t=this;s.youtube._dropDown(t,e,function(e){t.wysiwygEditorInsertHtml(r("youtube",{id:e}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,i=t.getYear(),n=t.getMonth()+1,r=t.getDate();return i<2e3&&(i=1900+i),n<10&&(n="0"+n),r<10&&(r="0"+r),e.opts.dateFormat.replace(/year/i,i).replace(/month/i,n).replace(/day/i,r)},exec:function(){this.insertText(s.date._date(this))},txtExec:function(){this.insertText(s.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),i=e.getMinutes(),n=e.getSeconds();return t<10&&(t="0"+t),i<10&&(i="0"+i),n<10&&(n="0"+n),t+":"+i+":"+n},exec:function(){this.insertText(s.time._time())},txtExec:function(){this.insertText(s.time._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var e=this,i=e.getRangeHelper().getFirstBlockParent(),n=t(i);e.focus(),(i&&!n.is("body")||(e.execCommand("formatBlock","p"),i=e.getRangeHelper().getFirstBlockParent(),n=t(i),i&&!n.is("body")))&&("ltr"===n.css("direction")?n.css("direction",""):n.css("direction","ltr"))},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var e=this,i=e.getRangeHelper().getFirstBlockParent(),n=t(i);e.focus(),(i&&!n.is("body")||(e.execCommand("formatBlock","p"),i=e.getRangeHelper().getFirstBlockParent(),n=t(i),i&&!n.is("body")))&&("rtl"===n.css("direction")?n.css("direction",""):n.css("direction","rtl"))},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize())},txtExec:function(){this.maximize(!this.maximize())},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode()},txtExec:function(){this.toggleSourceMode()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},ignore:{}};return s}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n;n=function(e){"use strict";var t=i(1);return{toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,locale:t("html").attr("lang")||"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,parserOptions:{},dropDownCss:{}}}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))}]),function(e){"use strict";var t=e.sceditor,i=t.plugins,n=t.dom,r={bold:{txtExec:["<strong>","</strong>"]},italic:{txtExec:["<em>","</em>"]},underline:{txtExec:['<span style="text-decoration: underline;">',"</span>"]},strike:{txtExec:['<span style="text-decoration: line-through;">',"</span>"]},subscript:{txtExec:["<sub>","</sub>"]},superscript:{txtExec:["<sup>","</sup>"]},left:{txtExec:['<div style="text-align: left;">',"</div>"]},center:{txtExec:['<div style="text-align: center;">',"</div>"]},right:{txtExec:['<div style="text-align: right;">',"</div>"]},justify:{txtExec:['<div style="text-align: justify;">',"</div>"]},font:{txtExec:function(e){var i=this;t.command.get("font")._dropDown(i,e,function(e){i.insertText('<span style="font-family: '+e+';">',"</span>")})}},size:{txtExec:function(e){var i=this;t.command.get("size")._dropDown(i,e,function(e){i.insertText('<span style="font-size: '+e+';">',"</span>")})}},color:{txtExec:function(e){var i=this;t.command.get("color")._dropDown(i,e,function(e){i.insertText('<span style="color: '+e+';">',"</span>")})}},bulletlist:{txtExec:["<ul><li>","</li></ul>"]},orderedlist:{txtExec:["<ol><li>","</li></ol>"]},table:{txtExec:["<table><tr><td>","</td></tr></table>"]},horizontalrule:{txtExec:["<hr />"]},code:{txtExec:["<code>","</code>"]},image:{txtExec:function(e,t){var i=prompt(this._("Enter the image URL:"),t);i&&this.insertText('<img src="'+i+'" />')}},email:{txtExec:function(e,t){var i,n,r=t&&t.indexOf("@")>-1?null:t;i=prompt(this._("Enter the e-mail address:"),r?"":t),n=prompt(this._("Enter the displayed text:"),r||i)||i,i&&this.insertText('<a href="mailto:'+i+'">'+n+"</a>")}},link:{txtExec:function(e,t){var i=t&&t.indexOf("http://")>-1?null:t,n=prompt(this._("Enter URL:"),i?"http://":t),r=prompt(this._("Enter the displayed text:"),i||n)||n;n&&this.insertText('<a href="'+n+'">'+r+"</a>")}},quote:{txtExec:["<blockquote>","</blockquote>"]},youtube:{txtExec:function(e){var i=this;t.command.get("youtube")._dropDown(i,e,function(e){i.insertText('<iframe width="560" height="315" src="https://www.youtube.com/embed/{id}?wmode=opaque" data-youtube-id="'+e+'" frameborder="0" allowfullscreen></iframe>')})}},rtl:{txtExec:['<div stlye="direction: rtl;">',"</div>"]},ltr:{txtExec:['<div stlye="direction: ltr;">',"</div>"]}};t.XHTMLSerializer=function(){var i,r,o,s,a,l,u,d,h,c,p=this,f={indentStr:"\t"},m=[],g=0;i=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};return e?e.replace(/[&<>"]/g,function(e){return t[e]||e}):""},r=function(e){return e.replace(/[\r\n]/," ").replace(/[^\S|\u00A0]+/g," ")},p.serialize=function(e,t){if(m=[],t)for(e=e.firstChild;e;)o(e),e=e.nextSibling;else o(e);return m.join("")},o=function(e,t){switch(e.nodeType){case 1:var i=e.nodeName.toLowerCase();"!"===i?u(e):a(e,t);break;case 3:d(e,t);break;case 4:l(e);break;case 8:u(e);break;case 9:case 11:s(e);break;case 2:case 5:case 6:case 7:case 10:case 12:}},s=function(e){for(var t=e.firstChild;t;)o(t),t=t.nextSibling},a=function(r,s){var a,l,u,d=r.nodeName.toLowerCase(),p="iframe"===d,f=r.attributes.length,m=r.firstChild,v=s||/pre(?:\-wrap)?$/i.test(e(r).css("whiteSpace")),y=!r.firstChild&&!n.canHaveChildren(r)&&!p;if(!e(r).hasClass("sceditor-ignore")){for(h("<"+d,!s&&c(r));f--;)l=r.attributes[f],(!t.ie||l.specified||"input"===d&&"value"===l.name)&&(u=t.ie<8&&/style/i.test(l.name)?r.style.cssText:l.value,h(" "+l.name.toLowerCase()+'="'+i(u)+'"',!1));for(h(y?" />":">",!1),p||(a=m);a;)g++,o(a,v),a=a.nextSibling,g--;y||h("</"+d+">",!v&&!p&&c(r)&&m&&c(m))}},l=function(e){h("<![CDATA["+i(e.nodeValue)+"]]>")},u=function(e){h("<!-- "+i(e.nodeValue)+" -->")},d=function(e,t){var n=e.nodeValue;t||(n=r(n)),n&&h(i(n),!t&&c(e))},h=function(e,t){var i=g;if(t!==!1)for(m.length&&m.push("\n");i--;)m.push(f.indentStr);m.push(e)},c=function(e){var t=e.previousSibling;return 1!==e.nodeType&&t?!n.isInline(t):!t&&!n.isInline(e.parentNode)||!n.isInline(e)}},i.xhtml=function(){var o,s,a,l,u,d,h,c=this,p={},f={};c.init=function(){e.isEmptyObject(i.xhtml.converters||{})||e.each(i.xhtml.converters,function(t,i){e.each(i.tags,function(e){p[e]||(p[e]=[]),p[e].push(i)})}),this.commands=e.extend(!0,{},r,this.commands)},c.signalToSource=function(e,i){return i=i.jquery?i[0]:i,o(i),l(i),d(i),h(i),(new t.XHTMLSerializer).serialize(i,!0)},c.signalToWysiwyg=function(e){return e},c.convertTagTo=n.convertElement,s=function(i,n,r){p[i]&&e.each(p[i],function(o,s){s.tags[i]?e.each(s.tags[i],function(i,o){r.getAttributeNode&&(i=r.getAttributeNode(i),!i||t.ie<8&&!i.specified||o&&e.inArray(i.value,o)<0||s.conv.call(c,r,n))}):s.conv&&s.conv.call(c,r,n)})},o=function(t){n.traverse(t,function(t){var i=e(t),n=t.nodeName.toLowerCase();s("*",i,t),s(n,i,t)},!0)},a=function(e,t){var i=e.childNodes,r=e.nodeName.toLowerCase(),o=e.nodeValue,s=i.length;if(t&&"br"===r)return!0;if(!n.canHaveChildren(e))return!1;if(o&&/\S|\u00A0/.test(o))return!1;for(;s--;)if(!a(i[s],!e.previousSibling&&!e.nextSibling))return!1;return!0},l=function(t){n.traverse(t,function(t){var r,o=t.nodeName.toLowerCase(),s="iframe"!==o&&a(t),l=t.parentNode,u=t.nodeType,d=!n.isInline(t),h=t.previousSibling,c=t.nextSibling,p=t.ownerDocument,f=i.xhtml.allowedTags,m=i.xhtml.disallowedTags;if(3!==u&&(4===u?o="!cdata":"!"!==o&&8!==u||(o="!comment"),s?r=!0:f&&f.length?r=e.inArray(o,f)<0:m&&m.length&&(r=e.inArray(o,m)>-1),r)){if(!s){for(d&&h&&n.isInline(h)&&l.insertBefore(p.createTextNode(" "),t);t.firstChild;)l.insertBefore(t.firstChild,c);d&&c&&n.isInline(c)&&l.insertBefore(p.createTextNode(" "),c)}l.removeChild(t)}},!0)},u=function(t,i){var n={};return t&&e.extend(n,t),i?(e.each(i,function(t,i){e.isArray(i)?n[t]=e.merge(n[t]||[],i):n[t]||(n[t]=null)}),n):n},h=function(t){var i=[],r=function(){i.length&&(e("<p>",t.ownerDocument).insertBefore(i[0]).append(i),i=[])};n.removeWhiteSpace(t);for(var o=t.firstChild;o;)n.isInline(o)&&!e(o).is(".sceditor-ignore")?i.push(o):r(),o=o.nextSibling;r()},d=function(t){var r,o,s,a,l,d,h=i.xhtml.allowedAttribs,c=h&&!e.isEmptyObject(h),p=i.xhtml.disallowedAttribs,m=p&&!e.isEmptyObject(p);f={},n.traverse(t,function(t){if(t.attributes&&(r=t.nodeName.toLowerCase(),a=t.attributes.length))for(f[r]||(c?f[r]=u(h["*"],h[r]):f[r]=u(p["*"],p[r]));a--;)o=t.attributes[a],s=o.name,l=f[r][s],d=!1,c?d=null!==l&&(!e.isArray(l)||e.inArray(o.value,l)<0):m&&(d=null===l||e.isArray(l)&&e.inArray(o.value,l)>-1),d&&t.removeAttribute(s)})}},i.xhtml.converters=[{tags:{"*":{width:null}},conv:function(e,t){t.css("width",t.attr("width")).removeAttr("width")}},{tags:{"*":{height:null}},conv:function(e,t){t.css("height",t.attr("height")).removeAttr("height")}},{tags:{li:{value:null}},conv:function(e,i){t.ie<8?e.removeAttribute("value"):i.removeAttr("value")}},{tags:{"*":{text:null}},conv:function(e,t){t.css("color",t.attr("text")).removeAttr("text")}},{tags:{"*":{color:null}},conv:function(e,t){t.css("color",t.attr("color")).removeAttr("color")}},{tags:{"*":{face:null}},conv:function(e,t){t.css("fontFamily",t.attr("face")).removeAttr("face")}},{tags:{"*":{align:null}},conv:function(e,t){t.css("textAlign",t.attr("align")).removeAttr("align")}},{tags:{"*":{border:null}},conv:function(e,t){t.css("borderWidth",t.attr("border")).removeAttr("border")}},{tags:{applet:{name:null},img:{name:null},layer:{name:null},map:{name:null},object:{name:null},param:{name:null}},conv:function(e,t){t.attr("id")||t.attr("id",t.attr("name")),t.removeAttr("name")}},{tags:{"*":{vspace:null}},conv:function(e,t){t.css("marginTop",t.attr("vspace")-0).css("marginBottom",t.attr("vspace")-0).removeAttr("vspace")}},{tags:{"*":{hspace:null}},conv:function(e,t){t.css("marginLeft",t.attr("hspace")-0).css("marginRight",t.attr("hspace")-0).removeAttr("hspace")}},{tags:{hr:{noshade:null}},conv:function(e,t){t.css("borderStyle","solid").removeAttr("noshade")}},{tags:{"*":{nowrap:null}},conv:function(e,t){t.css("white-space","nowrap").removeAttr("nowrap")}},{tags:{big:null},conv:function(t){e(this.convertTagTo(t,"span")).css("fontSize","larger")}},{tags:{small:null},conv:function(t){e(this.convertTagTo(t,"span")).css("fontSize","smaller")}},{tags:{b:null},conv:function(t){e(this.convertTagTo(t,"strong"))}},{tags:{u:null},conv:function(t){e(this.convertTagTo(t,"span")).css("textDecoration","underline")}},{tags:{i:null},conv:function(t){e(this.convertTagTo(t,"em"))}},{tags:{s:null,strike:null},conv:function(t){e(this.convertTagTo(t,"span")).css("textDecoration","line-through")}},{tags:{dir:null},conv:function(e){this.convertTagTo(e,"ul")}},{tags:{center:null},conv:function(t){e(this.convertTagTo(t,"div")).css("textAlign","center")}},{tags:{font:{size:null}},conv:function(e,i){var n=i.css("fontSize"),r=n;"+0"!==r&&(t.ie<9&&(r=10,n>1&&(r=13),n>2&&(r=16),n>3&&(r=18),n>4&&(r=24),n>5&&(r=32),n>6&&(r=48)),i.css("fontSize",r)),i.removeAttr("size")}},{tags:{font:null},conv:function(e){this.convertTagTo(e,"span")}},{tags:{"*":{type:["_moz"]}},conv:function(e,t){t.removeAttr("type")}},{tags:{"*":{_moz_dirty:null}},conv:function(e,t){t.removeAttr("_moz_dirty")}},{tags:{"*":{_moz_editor_bogus_node:null}},conv:function(e,t){t.remove()}}],i.xhtml.allowedAttribs={},i.xhtml.disallowedAttribs={},i.xhtml.allowedTags=[],i.xhtml.disallowedTags=[]}(jQuery),function(){var e;!function(){var t=!1,i=/xyz/.test(function(){window.postMessage("xyz")})?/\b_super\b/:/.*/;return e=function(){},e.extend=function n(e){function r(){!t&&this.init&&this.init.apply(this,arguments)}var o=this.prototype;t=!0;var s=new this;t=!1;for(var a in e)s[a]="function"==typeof e[a]&&"function"==typeof o[a]&&i.test(e[a])?function(e,t){return function(){var i=this._super;this._super=o[e];var n=t.apply(this,arguments);return this._super=i,n}}(a,e[a]):e[a];return r.prototype=s,r.prototype.constructor=r,r.extend=n,r},e}(),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),o=window.setTimeout(function(){t(n+r)},r);return e=n+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})}();var t=function(e){return!("object"!=typeof e||e.nodeType||null!==e&&e===e.window)&&!(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))},i=function(e){var n,r,o;for(r=1;r<arguments.length;r++){n=arguments[r];for(o in n)n.hasOwnProperty(o)&&(n[o]&&t(n[o])?(e.hasOwnProperty(o)||(e[o]={}),i(e[o],n[o])):e[o]=n[o])}return e},n=function(e,t){if(e&&"object"==typeof e){var i;if(Array.isArray(e)||"number"==typeof e.length&&e.length>0&&e.length-1 in e){for(i=0;i<e.length;i++)if(t(i,e[i])===!1)return}else if(Object.keys){var n=Object.keys(e);for(i=0;i<n.length;i++)if(t(n[i],e[n[i]])===!1)return}else for(i in e)if(e.hasOwnProperty(i)&&t(i,e[i])===!1)return}},r=function(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)},o=function(e,t){if(!(e instanceof Element))throw new Error("element should be an instance of Element");t=i({},o.defaults.options,t||{}),this.element=e,this.options=t,this.init()};o.prototype={constructor:o,init:function(){var e=this;this.ready=!1;var t=o.defaults.themes[this.options.theme||o.defaults.theme];if(!t)throw"Unknown theme "+(this.options.theme||o.defaults.theme);this.schema=this.options.schema,this.theme=new t,this.template=this.options.template,this.refs=this.options.refs||{},this.uuid=0,this.__data={};var i=o.defaults.iconlibs[this.options.iconlib||o.defaults.iconlib];i&&(this.iconlib=new i),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.translate=this.options.translate||o.defaults.translate,this._loadExternalRefs(this.schema,function(){e._getDefinitions(e.schema);var t={};e.options.custom_validators&&(t.custom_validators=e.options.custom_validators),e.validator=new o.Validator(e,null,t);var i=e.getEditorClass(e.schema);e.root=e.createEditor(i,{jsoneditor:e,schema:e.schema,required:!0,container:e.root_container}),e.root.preBuild(),e.root.build(),e.root.postBuild(),e.options.startval&&e.root.setValue(e.options.startval),e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors(e.validation_results),e.ready=!0,window.requestAnimationFrame(function(){e.ready&&(e.validation_results=e.validator.validate(e.root.getValue()),e.root.showValidationErrors(e.validation_results),e.trigger("ready"),e.trigger("change"))})})},getValue:function(){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before getting the value";return this.root.getValue()},setValue:function(e){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before setting the value";return this.root.setValue(e),this},validate:function(e){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before validating";return 1===arguments.length?this.validator.validate(e):this.validation_results},destroy:function(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.destroyed=!0)},on:function(e,t){return this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[],this.callbacks[e].push(t),this},off:function(e,t){if(e&&t){this.callbacks=this.callbacks||{},this.callbacks[e]=this.callbacks[e]||[];for(var i=[],n=0;n<this.callbacks[e].length;n++)this.callbacks[e][n]!==t&&i.push(this.callbacks[e][n]);this.callbacks[e]=i}else e?(this.callbacks=this.callbacks||{},this.callbacks[e]=[]):this.callbacks={};return this},trigger:function(e){if(this.callbacks&&this.callbacks[e]&&this.callbacks[e].length)for(var t=0;t<this.callbacks[e].length;t++)this.callbacks[e][t]();return this},setOption:function(e,t){if("show_errors"!==e)throw"Option "+e+" must be set during instantiation and cannot be changed later";return this.options.show_errors=t,this.onChange(),this},getEditorClass:function(e){var t;if(e=this.expandSchema(e),n(o.defaults.resolvers,function(i,n){var r=n(e);if(r&&o.defaults.editors[r])return t=r,!1}),!t)throw"Unknown editor for schema "+JSON.stringify(e);if(!o.defaults.editors[t])throw"Unknown editor "+t;return o.defaults.editors[t]},createEditor:function(e,t){return t=i({},e.options||{},t),new e(t)},onChange:function(){if(this.ready&&!this.firing_change){this.firing_change=!0;var e=this;return window.requestAnimationFrame(function(){e.firing_change=!1,e.ready&&(e.validation_results=e.validator.validate(e.root.getValue()),"never"!==e.options.show_errors?e.root.showValidationErrors(e.validation_results):e.root.showValidationErrors([]),e.trigger("change"))}),this}},compileTemplate:function(e,t){t=t||o.defaults.template;var i;if("string"==typeof t){if(!o.defaults.templates[t])throw"Unknown template engine "+t;if(i=o.defaults.templates[t](),!i)throw"Template engine "+t+" missing required library."}else i=t;if(!i)throw"No template engine set";if(!i.compile)throw"Invalid template engine set";return i.compile(e)},_data:function(e,t,i){if(3!==arguments.length)return e.hasAttribute("data-jsoneditor-"+t)?this.__data[e.getAttribute("data-jsoneditor-"+t)]:null;var n;e.hasAttribute("data-jsoneditor-"+t)?n=e.getAttribute("data-jsoneditor-"+t):(n=this.uuid++,e.setAttribute("data-jsoneditor-"+t,n)),this.__data[n]=i},registerEditor:function(e){return this.editors=this.editors||{},this.editors[e.path]=e,this},unregisterEditor:function(e){return this.editors=this.editors||{},this.editors[e.path]=null,this},getEditor:function(e){if(this.editors)return this.editors[e]},watch:function(e,t){return this.watchlist=this.watchlist||{},this.watchlist[e]=this.watchlist[e]||[],this.watchlist[e].push(t),this},unwatch:function(e,t){if(!this.watchlist||!this.watchlist[e])return this;if(!t)return this.watchlist[e]=null,this;for(var i=[],n=0;n<this.watchlist[e].length;n++)this.watchlist[e][n]!==t&&i.push(this.watchlist[e][n]);return this.watchlist[e]=i.length?i:null,this},notifyWatchers:function(e){if(!this.watchlist||!this.watchlist[e])return this;for(var t=0;t<this.watchlist[e].length;t++)this.watchlist[e][t]()},isEnabled:function(){return!this.root||this.root.isEnabled()},enable:function(){this.root.enable()},disable:function(){this.root.disable()},_getDefinitions:function(e,t){if(t=t||"#/definitions/",e.definitions)for(var i in e.definitions)e.definitions.hasOwnProperty(i)&&(this.refs[t+i]=e.definitions[i],e.definitions[i].definitions&&this._getDefinitions(e.definitions[i],t+i+"/definitions/"))},_getExternalRefs:function(e){var t={},i=function(e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=!0)};e.$ref&&"object"!=typeof e.$ref&&"#"!==e.$ref.substr(0,1)&&!this.refs[e.$ref]&&(t[e.$ref]=!0);for(var n in e)if(e.hasOwnProperty(n))if(e[n]&&"object"==typeof e[n]&&Array.isArray(e[n]))for(var r=0;r<e[n].length;r++)"object"==typeof e[n][r]&&i(this._getExternalRefs(e[n][r]));else e[n]&&"object"==typeof e[n]&&i(this._getExternalRefs(e[n]));return t},_loadExternalRefs:function(e,t){var i=this,r=this._getExternalRefs(e),o=0,s=0,a=!1;n(r,function(e){if(!i.refs[e]){if(!i.options.ajax)throw"Must set ajax option to true to load external ref "+e;i.refs[e]="loading",s++;var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){if(4==n.readyState){if(200!==n.status)throw window.console.log(n),"Failed to fetch ref via ajax- "+e;var r;try{r=JSON.parse(n.responseText)}catch(l){throw window.console.log(l),"Failed to parse external ref "+e}if(!r||"object"!=typeof r)throw"External ref does not contain a valid schema - "+e;i.refs[e]=r,i._loadExternalRefs(r,function(){o++,o>=s&&!a&&(a=!0,t())})}},n.send()}}),s||t()},expandRefs:function(e){for(e=i({},e);e.$ref;){var t=e.$ref;delete e.$ref,this.refs[t]||(t=decodeURIComponent(t)),e=this.extendSchemas(e,this.refs[t])}return e},expandSchema:function(e){var t,r=this,o=i({},e);if("object"==typeof e.type&&(Array.isArray(e.type)?n(e.type,function(t,i){"object"==typeof i&&(e.type[t]=r.expandSchema(i))}):e.type=r.expandSchema(e.type)),"object"==typeof e.disallow&&(Array.isArray(e.disallow)?n(e.disallow,function(t,i){"object"==typeof i&&(e.disallow[t]=r.expandSchema(i))}):e.disallow=r.expandSchema(e.disallow)),e.anyOf&&n(e.anyOf,function(t,i){e.anyOf[t]=r.expandSchema(i)}),e.dependencies&&n(e.dependencies,function(t,i){"object"!=typeof i||Array.isArray(i)||(e.dependencies[t]=r.expandSchema(i))}),e.not&&(e.not=this.expandSchema(e.not)),e.allOf){for(t=0;t<e.allOf.length;t++)o=this.extendSchemas(o,this.expandSchema(e.allOf[t]));delete o.allOf}if(e["extends"]){if(Array.isArray(e["extends"]))for(t=0;t<e["extends"].length;t++)o=this.extendSchemas(o,this.expandSchema(e["extends"][t]));else o=this.extendSchemas(o,this.expandSchema(e["extends"]));delete o["extends"]}if(e.oneOf){var s=i({},o);for(delete s.oneOf,t=0;t<e.oneOf.length;t++)o.oneOf[t]=this.extendSchemas(this.expandSchema(e.oneOf[t]),s)}return this.expandRefs(o)},extendSchemas:function(e,t){e=i({},e),t=i({},t);var r=this,o={};return n(e,function(e,i){"undefined"!=typeof t[e]?"required"!==e&&"defaultProperties"!==e||"object"!=typeof i||!Array.isArray(i)?"type"!==e||"string"!=typeof i&&!Array.isArray(i)?"object"==typeof i&&Array.isArray(i)?o[e]=i.filter(function(i){return t[e].indexOf(i)!==-1}):"object"==typeof i&&null!==i?o[e]=r.extendSchemas(i,t[e]):o[e]=i:("string"==typeof i&&(i=[i]),"string"==typeof t.type&&(t.type=[t.type]),t.type&&t.type.length?o.type=i.filter(function(e){return t.type.indexOf(e)!==-1}):o.type=i,1===o.type.length&&"string"==typeof o.type[0]?o.type=o.type[0]:0===o.type.length&&delete o.type):o[e]=i.concat(t[e]).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]):o[e]=i}),n(t,function(t,i){"undefined"==typeof e[t]&&(o[t]=i)}),o}},o.defaults={themes:{},templates:{},iconlibs:{},editors:{},languages:{},resolvers:[],custom_validators:[]},o.Validator=e.extend({init:function(e,t,i){this.jsoneditor=e,this.schema=t||this.jsoneditor.schema,this.options=i||{},this.translate=this.jsoneditor.translate||o.defaults.translate},validate:function(e){return this._validateSchema(this.schema,e)},_validateSchema:function(e,t,r){var s,a,l,u=this,d=[],h=JSON.stringify(t);if(r=r||"root",e=i({},this.jsoneditor.expandRefs(e)),e.required&&e.required===!0){if("undefined"==typeof t)return d.push({path:r,property:"required",message:this.translate("error_notset")}),d}else if("undefined"==typeof t){if(!this.jsoneditor.options.required_by_default)return d;d.push({path:r,property:"required",message:this.translate("error_notset")})}if(e["enum"]){for(s=!1,a=0;a<e["enum"].length;a++)h===JSON.stringify(e["enum"][a])&&(s=!0);s||d.push({path:r,property:"enum",message:this.translate("error_enum")})}if(e["extends"])for(a=0;a<e["extends"].length;a++)d=d.concat(this._validateSchema(e["extends"][a],t,r));if(e.allOf)for(a=0;a<e.allOf.length;a++)d=d.concat(this._validateSchema(e.allOf[a],t,r));if(e.anyOf){for(s=!1,a=0;a<e.anyOf.length;a++)if(!this._validateSchema(e.anyOf[a],t,r).length){s=!0;break}s||d.push({path:r,property:"anyOf",message:this.translate("error_anyOf")})}if(e.oneOf){s=0;var c=[];for(a=0;a<e.oneOf.length;a++){var p=this._validateSchema(e.oneOf[a],t,r);for(p.length||s++,l=0;l<p.length;l++)p[l].path=r+".oneOf["+a+"]"+p[l].path.substr(r.length);c=c.concat(p)}1!==s&&(d.push({path:r,property:"oneOf",message:this.translate("error_oneOf",[s])}),d=d.concat(c))}if(e.not&&(this._validateSchema(e.not,t,r).length||d.push({path:r,property:"not",message:this.translate("error_not")})),e.type)if(Array.isArray(e.type)){for(s=!1,a=0;a<e.type.length;a++)if(this._checkType(e.type[a],t)){s=!0;break}s||d.push({path:r,property:"type",message:this.translate("error_type_union")})}else this._checkType(e.type,t)||d.push({path:r,property:"type",message:this.translate("error_type",[e.type])});if(e.disallow)if(Array.isArray(e.disallow)){for(s=!0,a=0;a<e.disallow.length;a++)if(this._checkType(e.disallow[a],t)){s=!1;break}s||d.push({path:r,property:"disallow",message:this.translate("error_disallow_union")})}else this._checkType(e.disallow,t)&&d.push({path:r,property:"disallow",message:this.translate("error_disallow",[e.disallow])});if("number"==typeof t){if(e.multipleOf||e.divisibleBy){var f=e.multipleOf||e.divisibleBy;s=t/f===Math.floor(t/f),window.math?s=window.math.mod(window.math.bignumber(t),window.math.bignumber(f)).equals(0):window.Decimal&&(s=new window.Decimal(t).mod(new window.Decimal(f)).equals(0)),
s||d.push({path:r,property:e.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[f])})}e.hasOwnProperty("maximum")&&(s=e.exclusiveMaximum?t<e.maximum:t<=e.maximum,window.math?s=window.math[e.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(t),window.math.bignumber(e.maximum)):window.Decimal&&(s=new window.Decimal(t)[e.exclusiveMaximum?"lt":"lte"](new window.Decimal(e.maximum))),s||d.push({path:r,property:"maximum",message:this.translate(e.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[e.maximum])})),e.hasOwnProperty("minimum")&&(s=e.exclusiveMinimum?t>e.minimum:t>=e.minimum,window.math?s=window.math[e.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(t),window.math.bignumber(e.minimum)):window.Decimal&&(s=new window.Decimal(t)[e.exclusiveMinimum?"gt":"gte"](new window.Decimal(e.minimum))),s||d.push({path:r,property:"minimum",message:this.translate(e.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[e.minimum])}))}else if("string"==typeof t)e.maxLength&&(t+"").length>e.maxLength&&d.push({path:r,property:"maxLength",message:this.translate("error_maxLength",[e.maxLength])}),e.minLength&&(t+"").length<e.minLength&&d.push({path:r,property:"minLength",message:this.translate(1===e.minLength?"error_notempty":"error_minLength",[e.minLength])}),e.pattern&&(new RegExp(e.pattern).test(t)||d.push({path:r,property:"pattern",message:this.translate("error_pattern",[e.pattern])}));else if("object"==typeof t&&null!==t&&Array.isArray(t)){if(e.items)if(Array.isArray(e.items))for(a=0;a<t.length;a++)if(e.items[a])d=d.concat(this._validateSchema(e.items[a],t[a],r+"."+a));else{if(e.additionalItems===!0)break;if(!e.additionalItems){if(e.additionalItems===!1){d.push({path:r,property:"additionalItems",message:this.translate("error_additionalItems")});break}break}d=d.concat(this._validateSchema(e.additionalItems,t[a],r+"."+a))}else for(a=0;a<t.length;a++)d=d.concat(this._validateSchema(e.items,t[a],r+"."+a));if(e.maxItems&&t.length>e.maxItems&&d.push({path:r,property:"maxItems",message:this.translate("error_maxItems",[e.maxItems])}),e.minItems&&t.length<e.minItems&&d.push({path:r,property:"minItems",message:this.translate("error_minItems",[e.minItems])}),e.uniqueItems){var m={};for(a=0;a<t.length;a++){if(s=JSON.stringify(t[a]),m[s]){d.push({path:r,property:"uniqueItems",message:this.translate("error_uniqueItems")});break}m[s]=!0}}}else if("object"==typeof t&&null!==t){if(e.maxProperties){s=0;for(a in t)t.hasOwnProperty(a)&&s++;s>e.maxProperties&&d.push({path:r,property:"maxProperties",message:this.translate("error_maxProperties",[e.maxProperties])})}if(e.minProperties){s=0;for(a in t)t.hasOwnProperty(a)&&s++;s<e.minProperties&&d.push({path:r,property:"minProperties",message:this.translate("error_minProperties",[e.minProperties])})}if(e.required&&Array.isArray(e.required))for(a=0;a<e.required.length;a++)"undefined"==typeof t[e.required[a]]&&d.push({path:r,property:"required",message:this.translate("error_required",[e.required[a]])});var g={};if(e.properties)for(a in e.properties)e.properties.hasOwnProperty(a)&&(g[a]=!0,d=d.concat(this._validateSchema(e.properties[a],t[a],r+"."+a)));if(e.patternProperties)for(a in e.patternProperties)if(e.patternProperties.hasOwnProperty(a)){var v=new RegExp(a);for(l in t)t.hasOwnProperty(l)&&v.test(l)&&(g[l]=!0,d=d.concat(this._validateSchema(e.patternProperties[a],t[l],r+"."+l)))}if("undefined"!=typeof e.additionalProperties||!this.jsoneditor.options.no_additional_properties||e.oneOf||e.anyOf||(e.additionalProperties=!1),"undefined"!=typeof e.additionalProperties)for(a in t)if(t.hasOwnProperty(a)&&!g[a]){if(!e.additionalProperties){d.push({path:r,property:"additionalProperties",message:this.translate("error_additional_properties",[a])});break}if(e.additionalProperties===!0)break;d=d.concat(this._validateSchema(e.additionalProperties,t[a],r+"."+a))}if(e.dependencies)for(a in e.dependencies)if(e.dependencies.hasOwnProperty(a)&&"undefined"!=typeof t[a])if(Array.isArray(e.dependencies[a]))for(l=0;l<e.dependencies[a].length;l++)"undefined"==typeof t[e.dependencies[a][l]]&&d.push({path:r,property:"dependencies",message:this.translate("error_dependency",[e.dependencies[a][l]])});else d=d.concat(this._validateSchema(e.dependencies[a],t,r))}return n(o.defaults.custom_validators,function(i,n){d=d.concat(n.call(u,e,t,r))}),this.options.custom_validators&&n(this.options.custom_validators,function(i,n){d=d.concat(n.call(u,e,t,r))}),d},_checkType:function(e,t){return"string"==typeof e?"string"===e?"string"==typeof t:"number"===e?"number"==typeof t:"integer"===e?"number"==typeof t&&t===Math.floor(t):"boolean"===e?"boolean"==typeof t:"array"===e?Array.isArray(t):"object"===e?null!==t&&!Array.isArray(t)&&"object"==typeof t:"null"!==e||null===t:!this._validateSchema(e,t).length}}),o.AbstractEditor=e.extend({onChildEditorChange:function(e){this.onChange(!0)},notify:function(){this.jsoneditor.notifyWatchers(this.path)},change:function(){this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()},onChange:function(e){this.notify(),this.watch_listener&&this.watch_listener(),e&&this.change()},register:function(){this.jsoneditor.registerEditor(this),this.onChange()},unregister:function(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)},getNumColumns:function(){return 12},init:function(e){this.jsoneditor=e.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||o.defaults.translate,this.original_schema=e.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.options=i({},this.options||{},e.schema.options||{},e),e.path||this.schema.id||(this.schema.id="root"),this.path=e.path||"root",this.formname=e.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.jsoneditor.options.form_name_root&&(this.formname=this.formname.replace(/^root\[/,this.jsoneditor.options.form_name_root+"[")),this.key=this.path.split(".").pop(),this.parent=e.parent,this.link_watchers=[],e.container&&this.setContainer(e.container)},setContainer:function(e){this.container=e,this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&"string"==typeof this.schema.type&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)},preBuild:function(){},build:function(){},postBuild:function(){this.setupWatchListeners(),this.addLinks(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.register(),this.onWatchedFieldChange()},setupWatchListeners:function(){var e=this;if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=function(){e.refreshWatchedFieldValues()&&e.onWatchedFieldChange()},this.register(),this.schema.hasOwnProperty("watch")){var t,i,n,r,o;for(var s in this.schema.watch)if(this.schema.watch.hasOwnProperty(s)){if(t=this.schema.watch[s],Array.isArray(t)){if(t.length<2)continue;i=[t[0]].concat(t[1].split("."))}else i=t.split("."),e.theme.closest(e.container,'[data-schemaid="'+i[0]+'"]')||i.unshift("#");if(n=i.shift(),"#"===n&&(n=e.jsoneditor.schema.id||"root"),r=e.theme.closest(e.container,'[data-schemaid="'+n+'"]'),!r)throw"Could not find ancestor node with id "+n;o=r.getAttribute("data-schemapath")+"."+i.join("."),e.jsoneditor.watch(o,e.watch_listener),e.watched[s]=o}}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))},addLinks:function(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),this.container.appendChild(this.link_holder),this.schema.links))for(var e=0;e<this.schema.links.length;e++)this.addLink(this.getLink(this.schema.links[e]))},getButton:function(e,t,i){var n="json-editor-btn-"+t;t=this.iconlib?this.iconlib.getIcon(t):null,!t&&i&&(e=i,i=null);var r=this.theme.getButton(e,t,i);return r.className+=" "+n+" ",r},setButtonText:function(e,t,i,n){return i=this.iconlib?this.iconlib.getIcon(i):null,!i&&n&&(t=n,n=null),this.theme.setButtonText(e,t,i,n)},addLink:function(e){this.link_holder&&this.link_holder.appendChild(e)},getLink:function(e){var t,i,n=e.mediaType||"application/javascript",r=n.split("/")[0],o=this.jsoneditor.compileTemplate(e.href,this.template_engine),s=null;if(e.download&&(s=e.download),s&&s!==!0&&(s=this.jsoneditor.compileTemplate(s,this.template_engine)),"image"===r){t=this.theme.getBlockLinkHolder(),i=document.createElement("a"),i.setAttribute("target","_blank");var a=document.createElement("img");this.theme.createImageLink(t,i,a),this.link_watchers.push(function(t){var n=o(t);i.setAttribute("href",n),i.setAttribute("title",e.rel||n),a.setAttribute("src",n)})}else if(["audio","video"].indexOf(r)>=0){t=this.theme.getBlockLinkHolder(),i=this.theme.getBlockLink(),i.setAttribute("target","_blank");var l=document.createElement(r);l.setAttribute("controls","controls"),this.theme.createMediaLink(t,i,l),this.link_watchers.push(function(t){var n=o(t);i.setAttribute("href",n),i.textContent=e.rel||n,l.setAttribute("src",n)})}else i=t=this.theme.getBlockLink(),t.setAttribute("target","_blank"),t.textContent=e.rel,this.link_watchers.push(function(i){var n=o(i);t.setAttribute("href",n),t.textContent=e.rel||n});return s&&i&&(s===!0?i.setAttribute("download",""):this.link_watchers.push(function(e){i.setAttribute("download",s(e))})),e["class"]&&(i.className=i.className+" "+e["class"]),t},refreshWatchedFieldValues:function(){if(this.watched_values){var e={},t=!1,i=this;if(this.watched){var n,r;for(var o in this.watched)this.watched.hasOwnProperty(o)&&(r=i.jsoneditor.getEditor(this.watched[o]),n=r?r.getValue():null,i.watched_values[o]!==n&&(t=!0),e[o]=n)}return e.self=this.getValue(),this.watched_values.self!==e.self&&(t=!0),this.watched_values=e,t}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){if(this.header)if(this.header.children.length){for(var e=0;e<this.header.childNodes.length;e++)if(3===this.header.childNodes[e].nodeType){this.header.childNodes[e].nodeValue=this.getHeaderText();break}}else this.header.textContent=this.getHeaderText()},getHeaderText:function(e){return this.header_text?this.header_text:e?this.schema.title:this.getTitle()},onWatchedFieldChange:function(){var e;if(this.header_template){e=i(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:1*this.key,i1:1*this.key+1,title:this.getTitle()});var t=this.header_template(e);t!==this.header_text&&(this.header_text=t,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){e=this.getWatchedFieldValues();for(var n=0;n<this.link_watchers.length;n++)this.link_watchers[n](e)}},setValue:function(e){this.value=e},getValue:function(){return this.value},refreshValue:function(){},getChildEditors:function(){return!1},destroy:function(){var e=this;this.unregister(this),n(this.watched,function(t,i){e.jsoneditor.unwatch(i,e.watch_listener)}),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null},getDefault:function(){if(this.schema["default"])return this.schema["default"];if(this.schema["enum"])return this.schema["enum"][0];var e=this.schema.type||this.schema.oneOf;if(e&&Array.isArray(e)&&(e=e[0]),e&&"object"==typeof e&&(e=e.type),e&&Array.isArray(e)&&(e=e[0]),"string"==typeof e){if("number"===e)return 0;if("boolean"===e)return!1;if("integer"===e)return 0;if("string"===e)return"";if("object"===e)return{};if("array"===e)return[]}return null},getTitle:function(){return this.schema.title||this.key},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},isEnabled:function(){return!this.disabled},isRequired:function(){return"boolean"==typeof this.schema.required?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.indexOf(this.key)>-1:!!this.jsoneditor.options.required_by_default},getDisplayText:function(e){var t=[],i={};n(e,function(e,t){t.title&&(i[t.title]=i[t.title]||0,i[t.title]++),t.description&&(i[t.description]=i[t.description]||0,i[t.description]++),t.format&&(i[t.format]=i[t.format]||0,i[t.format]++),t.type&&(i[t.type]=i[t.type]||0,i[t.type]++)}),n(e,function(e,n){var r;r="string"==typeof n?n:n.title&&i[n.title]<=1?n.title:n.format&&i[n.format]<=1?n.format:n.type&&i[n.type]<=1?n.type:n.description&&i[n.description]<=1?n.descripton:n.title?n.title:n.format?n.format:n.type?n.type:n.description?n.description:JSON.stringify(n).length<50?JSON.stringify(n):"type",t.push(r)});var r={};return n(t,function(e,n){r[n]=r[n]||0,r[n]++,i[n]>1&&(t[e]=n+" "+r[n])}),t},getOption:function(e){try{throw"getOption is deprecated"}catch(t){window.console.error(t)}return this.options[e]},showValidationErrors:function(e){}}),o.defaults.editors["null"]=o.AbstractEditor.extend({getValue:function(){return null},setValue:function(){this.onChange()},getNumColumns:function(){return 2}}),o.defaults.editors.string=o.AbstractEditor.extend({register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},setValue:function(e,t,i){if((!this.template||i)&&(null===e||"undefined"==typeof e?e="":"object"==typeof e?e=JSON.stringify(e):"string"!=typeof e&&(e=""+e),e!==this.serialized)){var n=this.sanitize(e);if(this.input.value!==n){this.input.value=n,this.sceditor_instance?this.sceditor_instance.val(n):this.epiceditor?this.epiceditor.importFile(null,n):this.ace_editor&&this.ace_editor.setValue(n);var r=i||this.getValue()!==e;this.refreshValue(),t?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(r)}}},getNumColumns:function(){var e,t=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);return e="textarea"===this.input_type?6:["text","email"].indexOf(this.input_type)>=0?4:2,Math.min(12,Math.max(t,e))},build:function(){var e=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if("textarea"===this.format)this.input_type="textarea",this.input=this.theme.getTextareaInput();else if("range"===this.format){this.input_type="range";var t=this.schema.minimum||0,i=this.schema.maximum||Math.max(100,t+1),n=1;this.schema.multipleOf&&(t%this.schema.multipleOf&&(t=Math.ceil(t/this.schema.multipleOf)*this.schema.multipleOf),i%this.schema.multipleOf&&(i=Math.floor(i/this.schema.multipleOf)*this.schema.multipleOf),n=this.schema.multipleOf),this.input=this.theme.getRangeInput(t,i,n)}else["actionscript","batchfile","bbcode","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","markdown","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","r","ruby","sass","scala","scss","smarty","sql","stylus","svg","twig","vbscript","xml","yaml"].indexOf(this.format)>=0?(this.input_type=this.format,this.source_code=!0,this.input=this.theme.getTextareaInput()):(this.input_type=this.format,this.input=this.theme.getFormInputField(this.input_type));else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);"undefined"!=typeof this.schema.maxLength&&this.input.setAttribute("maxlength",this.schema.maxLength),"undefined"!=typeof this.schema.pattern?this.input.setAttribute("pattern",this.schema.pattern):"undefined"!=typeof this.schema.minLength&&this.input.setAttribute("pattern",".{"+this.schema.minLength+",}"),this.options.compact?this.container.className+=" compact":this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),e.schema.template)return void(this.value=e.value);var i=this.value,n=e.sanitize(i);i!==n&&(this.value=n),e.is_dirty=!0,e.refreshValue(),e.onChange(!0)}),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=function(e){if(e){var t,i=e.offsetHeight;if(e.offsetHeight<e.scrollHeight)for(t=0;e.offsetHeight<e.scrollHeight+3&&!(t>100);)t++,i++,e.style.height=i+"px";else{for(t=0;e.offsetHeight>=e.scrollHeight+3&&!(t>100);)t++,i--,e.style.height=i+"px";e.style.height=i+1+"px"}}},this.input.addEventListener("keyup",function(t){e.adjust_height(this)}),this.input.addEventListener("change",function(t){e.adjust_height(this)}),this.adjust_height()),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),window.requestAnimationFrame(function(){e.input.parentNode&&e.afterInputReady(),e.adjust_height&&e.adjust_height(e.input)}),this.schema.template?(this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()):this.refreshValue()},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(){this.input.disabled=!0,this._super()},afterInputReady:function(){var e,t=this;if(this.source_code)if(this.options.wysiwyg&&["html","bbcode"].indexOf(this.input_type)>=0&&window.jQuery&&window.jQuery.fn&&window.jQuery.fn.sceditor)e=i({},{plugins:"html"===t.input_type?"xhtml":"bbcode",emoticonsEnabled:!1,width:"100%",height:300},o.plugins.sceditor,t.options.sceditor_options||{}),window.jQuery(t.input).sceditor(e),t.sceditor_instance=window.jQuery(t.input).sceditor("instance"),t.sceditor_instance.blur(function(){var e=window.jQuery("<div>"+t.sceditor_instance.val()+"</div>");window.jQuery("#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf",e).remove(),t.input.value=e.html(),t.value=t.input.value,t.is_dirty=!0,t.onChange(!0)});else if("markdown"===this.input_type&&window.EpicEditor)this.epiceditor_container=document.createElement("div"),this.input.parentNode.insertBefore(this.epiceditor_container,this.input),this.input.style.display="none",e=i({},o.plugins.epiceditor,{container:this.epiceditor_container,clientSideStorage:!1}),this.epiceditor=new window.EpicEditor(e).load(),this.epiceditor.importFile(null,this.getValue()),this.epiceditor.on("update",function(){var e=t.epiceditor.exportFile();t.input.value=e,t.value=e,t.is_dirty=!0,t.onChange(!0)});else if(window.ace){var n=this.input_type;"cpp"!==n&&"c++"!==n&&"c"!==n||(n="c_cpp"),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.ace_container.style.height="400px",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor=window.ace.edit(this.ace_container),this.ace_editor.setValue(this.getValue()),o.plugins.ace.theme&&this.ace_editor.setTheme("ace/theme/"+o.plugins.ace.theme),n=window.ace.require("ace/mode/"+n),n&&this.ace_editor.getSession().setMode(new n.Mode),this.ace_editor.on("change",function(){var e=t.ace_editor.getValue();t.input.value=e,t.refreshValue(),t.is_dirty=!0,t.onChange(!0)})}t.theme.afterInputReady(t.input)},refreshValue:function(){this.value=this.input.value,"string"!=typeof this.value&&(this.value=""),this.serialized=this.value},destroy:function(){this.sceditor_instance?this.sceditor_instance.destroy():this.epiceditor?this.epiceditor.unload():this.ace_editor&&this.ace_editor.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this._super()},sanitize:function(e){return e},onWatchedFieldChange:function(){var e;this.template&&(e=this.getWatchedFieldValues(),this.setValue(this.template(e),!1,!0)),this._super()},showValidationErrors:function(e){var t=this;if("always"===this.jsoneditor.options.show_errors);else if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return;this.previous_error_setting=this.jsoneditor.options.show_errors;var i=[];n(e,function(e,n){n.path===t.path&&i.push(n.message)}),i.length?this.theme.addInputError(this.input,i.join(". ")+"."):this.theme.removeInputError(this.input)}}),o.defaults.editors.number=o.defaults.editors.string.extend({sanitize:function(e){return(e+"").replace(/[^0-9\.\-eE]/g,"")},getNumColumns:function(){return 2},getValue:function(){return 1*this.value}}),o.defaults.editors.integer=o.defaults.editors.number.extend({sanitize:function(e){return e+="",e.replace(/[^0-9\-]/g,"")},getNumColumns:function(){return 2}}),o.defaults.editors.object=o.AbstractEditor.extend({getDefault:function(){return i({},this.schema["default"]||{})},getChildEditors:function(){return this.editors},register:function(){if(this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].register()},unregister:function(){if(this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.maxwidth),3)},enable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].enable()},disable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),this._super(),this.editors)for(var e in this.editors)this.editors.hasOwnProperty(e)&&this.editors[e].disable()},layoutEditors:function(){var e,t,i=this;if(this.row_container){this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(e,t){var n=i.editors[e].schema.propertyOrder,r=i.editors[t].schema.propertyOrder;return"number"!=typeof n&&(n=1e3),"number"!=typeof r&&(r=1e3),n-r});var r;if("grid"===this.format){var o=[];for(n(this.property_order,function(e,t){var n=i.editors[t];if(!n.property_removed){for(var r=!1,s=n.options.hidden?0:n.options.grid_columns||n.getNumColumns(),a=n.options.hidden?0:n.container.offsetHeight,l=0;l<o.length;l++)o[l].width+s<=12&&(!a||.5*o[l].minh<a&&2*o[l].maxh>a)&&(r=l);r===!1&&(o.push({width:0,minh:999999,maxh:0,editors:[]}),r=o.length-1),o[r].editors.push({key:t,width:s,height:a}),o[r].width+=s,o[r].minh=Math.min(o[r].minh,a),o[r].maxh=Math.max(o[r].maxh,a)}}),e=0;e<o.length;e++)if(o[e].width<12){var s=!1,a=0;for(t=0;t<o[e].editors.length;t++)s===!1?s=t:o[e].editors[t].width>o[e].editors[s].width&&(s=t),o[e].editors[t].width*=12/o[e].width,o[e].editors[t].width=Math.floor(o[e].editors[t].width),a+=o[e].editors[t].width;a<12&&(o[e].editors[s].width+=12-a),o[e].width=12}if(this.layout===JSON.stringify(o))return!1;for(this.layout=JSON.stringify(o),r=document.createElement("div"),e=0;e<o.length;e++){var l=this.theme.getGridRow();for(r.appendChild(l),t=0;t<o[e].editors.length;t++){var u=o[e].editors[t].key,d=this.editors[u];d.options.hidden?d.container.style.display="none":this.theme.setGridColumnSize(d.container,o[e].editors[t].width),l.appendChild(d.container)}}}else r=document.createElement("div"),n(this.property_order,function(e,t){var n=i.editors[t];if(!n.property_removed){var o=i.theme.getGridRow();r.appendChild(o),n.options.hidden?n.container.style.display="none":i.theme.setGridColumnSize(n.container,12),o.appendChild(n.container)}});this.row_container.innerHTML="",this.row_container.appendChild(r)}},getPropertySchema:function(e){var t=this.schema.properties[e]||{};t=i({},t);var n=!!this.schema.properties[e];if(this.schema.patternProperties)for(var r in this.schema.patternProperties)if(this.schema.patternProperties.hasOwnProperty(r)){var o=new RegExp(r);o.test(e)&&(t.allOf=t.allOf||[],t.allOf.push(this.schema.patternProperties[r]),n=!0)}return!n&&this.schema.additionalProperties&&"object"==typeof this.schema.additionalProperties&&(t=i({},this.schema.additionalProperties)),t},preBuild:function(){this._super(),this.editors={},this.cached_editors={};var e=this;if(this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)n(this.schema.properties,function(t,i){var n=e.jsoneditor.getEditorClass(i);e.editors[t]=e.jsoneditor.createEditor(n,{jsoneditor:e.jsoneditor,schema:i,path:e.path+"."+t,parent:e,compact:!0,required:!0}),e.editors[t].preBuild();var r=e.editors[t].options.hidden?0:e.editors[t].options.grid_columns||e.editors[t].getNumColumns();e.minwidth+=r,e.maxwidth+=r}),this.no_link_holder=!0;else{if(this.options.table)throw"Not supported yet";this.schema.defaultProperties||(this.jsoneditor.options.display_required_only||this.options.display_required_only?(this.schema.defaultProperties=[],n(this.schema.properties,function(t,i){e.isRequired({key:t,schema:i})&&e.schema.defaultProperties.push(t)})):e.schema.defaultProperties=Object.keys(e.schema.properties)),e.maxwidth+=1,n(this.schema.defaultProperties,function(t,i){e.addObjectProperty(i,!0),e.editors[i]&&(e.minwidth=Math.max(e.minwidth,e.editors[i].options.grid_columns||e.editors[i].getNumColumns()),e.maxwidth+=e.editors[i].options.grid_columns||e.editors[i].getNumColumns())})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(t,i){var n=e.editors[t].schema.propertyOrder,r=e.editors[i].schema.propertyOrder;return"number"!=typeof n&&(n=1e3),"number"!=typeof r&&(r=1e3),n-r})},build:function(){var e=this;if(this.options.table_row)this.editor_holder=this.container,n(this.editors,function(t,i){var n=e.theme.getTableCell();e.editor_holder.appendChild(n),i.setContainer(n),i.build(),i.postBuild(),e.editors[t].options.hidden&&(n.style.display="none"),e.editors[t].options.input_width&&(n.style.width=e.editors[t].options.input_width)});else{if(this.options.table)throw"Not supported yet";this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.container.style.position="relative",this.editjson_holder=this.theme.getModal(),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.style.height="170px",this.editjson_textarea.style.width="300px",this.editjson_textarea.style.display="block",this.editjson_save=this.getButton("Save","save","Save"),this.editjson_save.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.saveJSON()}),this.editjson_cancel=this.getButton("Cancel","cancel","Cancel"),this.editjson_cancel.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.style.width="295px",this.addproperty_list.style.maxHeight="160px",this.addproperty_list.style.padding="5px 0",this.addproperty_list.style.overflowY="auto",this.addproperty_list.style.overflowX="hidden",this.addproperty_list.style.paddingLeft="5px",this.addproperty_list.setAttribute("class","property-selector"),this.addproperty_add=this.getButton("add","add","add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input.style.width="220px",this.addproperty_input.style.marginBottom="0",this.addproperty_input.style.display="inline-block",this.addproperty_add.addEventListener("click",function(t){if(t.preventDefault(),t.stopPropagation(),e.addproperty_input.value){if(e.editors[e.addproperty_input.value])return void window.alert("there is already a property with that name");e.addObjectProperty(e.addproperty_input.value),e.editors[e.addproperty_input.value]&&e.editors[e.addproperty_input.value].disable(),e.onChange(!0)}}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);var t=document.createElement("div");t.style.clear="both",this.addproperty_holder.appendChild(t),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),this.editor_holder.appendChild(this.row_container),n(this.editors,function(t,i){var n=e.theme.getGridColumn();e.row_container.appendChild(n),i.setContainer(n),i.build(),i.postBuild()}),this.title_controls=this.theme.getHeaderButtonHolder(),this.editjson_controls=this.theme.getHeaderButtonHolder(),this.addproperty_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.title.appendChild(this.editjson_controls),this.title.appendChild(this.addproperty_controls),this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.collapsed?(e.editor_holder.style.display="",e.collapsed=!1,e.setButtonText(e.toggle_button,"","collapse",e.translate("button_collapse"))):(e.editor_holder.style.display="none",e.collapsed=!0,e.setButtonText(e.toggle_button,"","expand",e.translate("button_expand")))}),this.options.collapsed&&r(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.editjson_button=this.getButton("JSON","edit","Edit JSON"),this.editjson_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.toggleEditJSON()}),this.editjson_controls.appendChild(this.editjson_button),this.editjson_controls.appendChild(this.editjson_holder),this.schema.options&&"undefined"!=typeof this.schema.options.disable_edit_json?this.schema.options.disable_edit_json&&(this.editjson_button.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_button.style.display="none"),this.addproperty_button=this.getButton("Properties","edit","Object Properties"),this.addproperty_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.toggleAddProperty()}),this.addproperty_controls.appendChild(this.addproperty_button),this.addproperty_controls.appendChild(this.addproperty_holder),this.refreshAddProperties()}this.options.table_row?(this.editor_holder=this.container,
n(this.property_order,function(t,i){e.editor_holder.appendChild(e.editors[i].container)})):(this.layoutEditors(),this.layoutEditors())},showEditJSON:function(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=this.editjson_button.offsetLeft+"px",this.editjson_holder.style.top=this.editjson_button.offsetTop+this.editjson_button.offsetHeight+"px",this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_button.disabled=!1,this.editing_json=!0)},hideEditJSON:function(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)},saveJSON:function(){if(this.editjson_holder)try{var e=JSON.parse(this.editjson_textarea.value);this.setValue(e),this.hideEditJSON()}catch(t){throw window.alert("invalid JSON"),t}},toggleEditJSON:function(){this.editing_json?this.hideEditJSON():this.showEditJSON()},insertPropertyControlUsingPropertyOrder:function(e,t,i){var n;this.schema.properties[e]&&(n=this.schema.properties[e].propertyOrder),"number"!=typeof n&&(n=1e3),t.propertyOrder=n;for(var r=0;r<i.childNodes.length;r++){var o=i.childNodes[r];if(t.propertyOrder<o.propertyOrder){this.addproperty_list.insertBefore(t,o),t=null;break}}t&&this.addproperty_list.appendChild(t)},addPropertyCheckbox:function(e){var t,i,n,r,o=this;return t=o.theme.getCheckbox(),t.style.width="auto",n=this.schema.properties[e]&&this.schema.properties[e].title?this.schema.properties[e].title:e,i=o.theme.getCheckboxLabel(n),r=o.theme.getFormControl(i,t),r.style.paddingBottom=r.style.marginBottom=r.style.paddingTop=r.style.marginTop=0,r.style.height="auto",this.insertPropertyControlUsingPropertyOrder(e,r,this.addproperty_list),t.checked=e in this.editors,t.addEventListener("change",function(){t.checked?o.addObjectProperty(e):o.removeObjectProperty(e),o.onChange(!0)}),o.addproperty_checkboxes[e]=t,t},showAddProperty:function(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=this.addproperty_button.offsetLeft+"px",this.addproperty_holder.style.top=this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight+"px",this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())},hideAddProperty:function(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)},toggleAddProperty:function(){this.adding_property?this.hideAddProperty():this.showAddProperty()},removeObjectProperty:function(e){this.editors[e]&&(this.editors[e].unregister(),delete this.editors[e],this.refreshValue(),this.layoutEditors())},addObjectProperty:function(e,t){var i=this;if(!this.editors[e]){if(this.cached_editors[e]){if(this.editors[e]=this.cached_editors[e],t)return;this.editors[e].register()}else{if(!(this.canHaveAdditionalProperties()||this.schema.properties&&this.schema.properties[e]))return;var n=i.getPropertySchema(e),r=i.jsoneditor.getEditorClass(n);if(i.editors[e]=i.jsoneditor.createEditor(r,{jsoneditor:i.jsoneditor,schema:n,path:i.path+"."+e,parent:i}),i.editors[e].preBuild(),!t){var o=i.theme.getChildEditorHolder();i.editor_holder.appendChild(o),i.editors[e].setContainer(o),i.editors[e].build(),i.editors[e].postBuild()}i.cached_editors[e]=i.editors[e]}t||(i.refreshValue(),i.layoutEditors())}},onChildEditorChange:function(e){this.refreshValue(),this._super(e)},canHaveAdditionalProperties:function(){return"boolean"==typeof this.schema.additionalProperties?this.schema.additionalProperties:!this.jsoneditor.options.no_additional_properties},destroy:function(){n(this.cached_editors,function(e,t){t.destroy()}),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,this._super()},getValue:function(){var e=this._super();if(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)for(var t in e)e.hasOwnProperty(t)&&(e[t]||delete e[t]);return e},refreshValue:function(){this.value={};for(var e in this.editors)this.editors.hasOwnProperty(e)&&(this.value[e]=this.editors[e].getValue());this.adding_property&&this.refreshAddProperties()},refreshAddProperties:function(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties)return void(this.addproperty_controls.style.display="none");var e,t=!1,i=!1,n=0,r=!1;for(e in this.editors)this.editors.hasOwnProperty(e)&&n++;t=this.canHaveAdditionalProperties()&&!("undefined"!=typeof this.schema.maxProperties&&n>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={};for(e in this.cached_editors)this.cached_editors.hasOwnProperty(e)&&(this.addPropertyCheckbox(e),this.isRequired(this.cached_editors[e])&&e in this.editors&&(this.addproperty_checkboxes[e].disabled=!0),"undefined"!=typeof this.schema.minProperties&&n<=this.schema.minProperties?(this.addproperty_checkboxes[e].disabled=this.addproperty_checkboxes[e].checked,this.addproperty_checkboxes[e].checked||(r=!0)):e in this.editors?(r=!0,i=!0):t||this.schema.properties.hasOwnProperty(e)?(this.addproperty_checkboxes[e].disabled=!1,r=!0):this.addproperty_checkboxes[e].disabled=!0);this.canHaveAdditionalProperties()&&(r=!0);for(e in this.schema.properties)this.schema.properties.hasOwnProperty(e)&&(this.cached_editors[e]||(r=!0,this.addPropertyCheckbox(e)));r?this.canHaveAdditionalProperties()?t?this.addproperty_add.disabled=!1:this.addproperty_add.disabled=!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_controls.style.display="none")},isRequired:function(e){return"boolean"==typeof e.schema.required?e.schema.required:Array.isArray(this.schema.required)?this.schema.required.indexOf(e.key)>-1:!!this.jsoneditor.options.required_by_default},setValue:function(e,t){var i=this;e=e||{},("object"!=typeof e||Array.isArray(e))&&(e={}),n(this.cached_editors,function(n,r){"undefined"!=typeof e[n]?(i.addObjectProperty(n),r.setValue(e[n],t)):t||i.isRequired(r)?r.setValue(r.getDefault(),t):i.removeObjectProperty(n)}),n(e,function(e,n){i.cached_editors[e]||(i.addObjectProperty(e),i.editors[e]&&i.editors[e].setValue(n,t))}),this.refreshValue(),this.layoutEditors(),this.onChange()},showValidationErrors:function(e){var t=this,i=[],r=[];if(n(e,function(e,n){n.path===t.path?i.push(n):r.push(n)}),this.error_holder)if(i.length){this.error_holder.innerHTML="",this.error_holder.style.display="",n(i,function(e,i){t.error_holder.appendChild(t.theme.getErrorMessage(i.message))})}else this.error_holder.style.display="none";this.options.table_row&&(i.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),n(this.editors,function(e,t){t.showValidationErrors(r)})}}),o.defaults.editors.array=o.AbstractEditor.extend({getDefault:function(){return this.schema["default"]||[]},register:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].register()},unregister:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].unregister()},getNumColumns:function(){var e=this.getItemInfo(0);return this.tabs_holder?Math.max(Math.min(12,e.width+2),4):e.width},enable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!1),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!1),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!1),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].enable(),this.rows[e].moveup_button&&(this.rows[e].moveup_button.disabled=!1),this.rows[e].movedown_button&&(this.rows[e].movedown_button.disabled=!1),this.rows[e].delete_button&&(this.rows[e].delete_button.disabled=!1);this._super()},disable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!0),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!0),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!0),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].disable(),this.rows[e].moveup_button&&(this.rows[e].moveup_button.disabled=!0),this.rows[e].movedown_button&&(this.rows[e].movedown_button.disabled=!0),this.rows[e].delete_button&&(this.rows[e].delete_button.disabled=!0);this._super()},preBuild:function(){this._super(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows,this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add},build:function(){this.options.compact?(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),"tabs"===this.schema.format?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls))),this.addControls()},onChildEditorChange:function(e){this.refreshValue(),this.refreshTabs(!0),this._super(e)},getItemTitle:function(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){var e=this.jsoneditor.expandRefs(this.schema.items);this.item_title=e.title||"item"}else this.item_title="item";return this.item_title},getItemSchema:function(e){return Array.isArray(this.schema.items)?e>=this.schema.items.length?this.schema.additionalItems===!0?{}:this.schema.additionalItems?i({},this.schema.additionalItems):void 0:i({},this.schema.items[e]):this.schema.items?i({},this.schema.items):{}},getItemInfo:function(e){var t=this.getItemSchema(e);this.item_info=this.item_info||{};var i=JSON.stringify(t);return"undefined"!=typeof this.item_info[i]?this.item_info[i]:(t=this.jsoneditor.expandRefs(t),this.item_info[i]={title:t.title||"item","default":t["default"],width:12,child_editors:t.properties||t.items},this.item_info[i])},getElementEditor:function(e){var t=this.getItemInfo(e),i=this.getItemSchema(e);i=this.jsoneditor.expandRefs(i),i.title=t.title+" "+(e+1);var n,r=this.jsoneditor.getEditorClass(i);n=this.tabs_holder?this.theme.getTabContent():t.child_editors?this.theme.getChildEditorHolder():this.theme.getIndentedPanel(),this.row_holder.appendChild(n);var o=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:i,container:n,path:this.path+"."+e,parent:this,required:!0});return o.preBuild(),o.build(),o.postBuild(),o.title_controls||(o.array_controls=this.theme.getButtonHolder(),n.appendChild(o.array_controls)),o},destroy:function(){this.empty(!0),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.controls&&this.controls.parentNode&&this.controls.parentNode.removeChild(this.controls),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,this._super()},empty:function(e){if(this.rows){var t=this;n(this.rows,function(i,n){e&&(n.tab&&n.tab.parentNode&&n.tab.parentNode.removeChild(n.tab),t.destroyRow(n,!0),t.row_cache[i]=null),t.rows[i]=null}),t.rows=[],e&&(t.row_cache=[])}},destroyRow:function(e,t){var i=e.container;t?(e.destroy(),i.parentNode&&i.parentNode.removeChild(i),e.tab&&e.tab.parentNode&&e.tab.parentNode.removeChild(e.tab)):(e.tab&&(e.tab.style.display="none"),i.style.display="none",e.unregister())},getMax:function(){return Array.isArray(this.schema.items)&&this.schema.additionalItems===!1?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0},refreshTabs:function(e){var t=this;n(this.rows,function(i,n){n.tab&&(e?n.tab_text.textContent=n.getHeaderText():n.tab===t.active_tab?(t.theme.markTabActive(n.tab),n.container.style.display=""):(t.theme.markTabInactive(n.tab),n.container.style.display="none"))})},setValue:function(e,t){e=e||[],Array.isArray(e)||(e=[e]);var i=JSON.stringify(e);if(i!==this.serialized){if(this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemInfo(e.length)["default"]);this.getMax()&&e.length>this.getMax()&&(e=e.slice(0,this.getMax()));var r=this;n(e,function(e,i){r.rows[e]?r.rows[e].setValue(i,t):r.row_cache[e]?(r.rows[e]=r.row_cache[e],r.rows[e].setValue(i,t),r.rows[e].container.style.display="",r.rows[e].tab&&(r.rows[e].tab.style.display=""),r.rows[e].register()):r.addRow(i,t)});for(var o=e.length;o<r.rows.length;o++)r.destroyRow(r.rows[o]),r.rows[o]=null;r.rows=r.rows.slice(0,e.length);var s=null;n(r.rows,function(e,t){if(t.tab===r.active_tab)return s=t.tab,!1}),!s&&r.rows.length&&(s=r.rows[0].tab),r.active_tab=s,r.refreshValue(t),r.refreshTabs(!0),r.refreshTabs(),r.onChange()}},refreshValue:function(e){var t=this,i=this.value?this.value.length:0;if(this.value=[],n(this.rows,function(e,i){t.value[e]=i.getValue()}),i!==this.value.length||e){var r=this.schema.minItems&&this.schema.minItems>=this.rows.length;n(this.rows,function(e,i){i.movedown_button&&(e===t.rows.length-1?i.movedown_button.style.display="none":i.movedown_button.style.display=""),i.delete_button&&(r?i.delete_button.style.display="none":i.delete_button.style.display=""),t.value[e]=i.getValue()});var o=!1;this.value.length?1===this.value.length?(this.remove_all_rows_button.style.display="none",r||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",o=!0)):(r||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",o=!0),r||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",o=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"),this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",o=!0),!this.collapsed&&o?this.controls.style.display="inline-block":this.controls.style.display="none"}},addRow:function(e,t){var i=this,r=this.rows.length;i.rows[r]=this.getElementEditor(r),i.row_cache[r]=i.rows[r],i.tabs_holder&&(i.rows[r].tab_text=document.createElement("span"),i.rows[r].tab_text.textContent=i.rows[r].getHeaderText(),i.rows[r].tab=i.theme.getTab(i.rows[r].tab_text),i.rows[r].tab.addEventListener("click",function(e){i.active_tab=i.rows[r].tab,i.refreshTabs(),e.preventDefault(),e.stopPropagation()}),i.theme.addTab(i.tabs_holder,i.rows[r].tab));var o=i.rows[r].title_controls||i.rows[r].array_controls;i.hide_delete_buttons||(i.rows[r].delete_button=this.getButton(i.getItemTitle(),"delete",this.translate("button_delete_row_title",[i.getItemTitle()])),i.rows[r].delete_button.className+=" delete",i.rows[r].delete_button.setAttribute("data-i",r),i.rows[r].delete_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i"),r=i.getValue(),o=[],s=null;n(r,function(e,n){return e===t?void(i.rows[e].tab===i.active_tab&&(i.rows[e+1]?s=i.rows[e].tab:e&&(s=i.rows[e-1].tab))):void o.push(n)}),i.setValue(o),s&&(i.active_tab=s,i.refreshTabs()),i.onChange(!0)}),o&&o.appendChild(i.rows[r].delete_button)),r&&!i.hide_move_buttons&&(i.rows[r].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),i.rows[r].moveup_button.className+=" moveup",i.rows[r].moveup_button.setAttribute("data-i",r),i.rows[r].moveup_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i");if(!(t<=0)){var n=i.getValue(),r=n[t-1];n[t-1]=n[t],n[t]=r,i.setValue(n),i.active_tab=i.rows[t-1].tab,i.refreshTabs(),i.onChange(!0)}}),o&&o.appendChild(i.rows[r].moveup_button)),i.hide_move_buttons||(i.rows[r].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),i.rows[r].movedown_button.className+=" movedown",i.rows[r].movedown_button.setAttribute("data-i",r),i.rows[r].movedown_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=1*this.getAttribute("data-i"),n=i.getValue();if(!(t>=n.length-1)){var r=n[t+1];n[t+1]=n[t],n[t]=r,i.setValue(n),i.active_tab=i.rows[t+1].tab,i.refreshTabs(),i.onChange(!0)}}),o&&o.appendChild(i.rows[r].movedown_button)),e&&i.rows[r].setValue(e,t),i.refreshTabs()},addControls:function(){var e=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls.appendChild(this.toggle_button);var t=e.row_holder.style.display,i=e.controls.style.display;this.toggle_button.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.collapsed?(e.collapsed=!1,e.panel&&(e.panel.style.display=""),e.row_holder.style.display=t,e.tabs_holder&&(e.tabs_holder.style.display=""),e.controls.style.display=i,e.setButtonText(this,"","collapse",e.translate("button_collapse"))):(e.collapsed=!0,e.row_holder.style.display="none",e.tabs_holder&&(e.tabs_holder.style.display="none"),e.controls.style.display="none",e.panel&&(e.panel.style.display="none"),e.setButtonText(this,"","expand",e.translate("button_expand")))}),this.options.collapsed&&r(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()])),this.add_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.rows.length;e.row_cache[i]?(e.rows[i]=e.row_cache[i],e.rows[i].setValue(e.rows[i].getDefault()),e.rows[i].container.style.display="",e.rows[i].tab&&(e.rows[i].tab.style.display=""),e.rows[i].register()):e.addRow(),e.active_tab=e.rows[i].tab,e.refreshTabs(),e.refreshValue(),e.onChange(!0)}),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()])),this.delete_last_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.getValue(),n=null;e.rows.length>1&&e.rows[e.rows.length-1].tab===e.active_tab&&(n=e.rows[e.rows.length-2].tab),i.pop(),e.setValue(i),n&&(e.active_tab=n,e.refreshTabs()),e.onChange(!0)}),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title")),this.remove_all_rows_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.setValue([]),e.onChange(!0)}),e.controls.appendChild(this.remove_all_rows_button),e.tabs&&(this.add_row_button.style.width="100%",this.add_row_button.style.textAlign="left",this.add_row_button.style.marginBottom="3px",this.delete_last_row_button.style.width="100%",this.delete_last_row_button.style.textAlign="left",this.delete_last_row_button.style.marginBottom="3px",this.remove_all_rows_button.style.width="100%",this.remove_all_rows_button.style.textAlign="left",this.remove_all_rows_button.style.marginBottom="3px")},showValidationErrors:function(e){var t=this,i=[],r=[];if(n(e,function(e,n){n.path===t.path?i.push(n):r.push(n)}),this.error_holder)if(i.length){this.error_holder.innerHTML="",this.error_holder.style.display="",n(i,function(e,i){t.error_holder.appendChild(t.theme.getErrorMessage(i.message))})}else this.error_holder.style.display="none";n(this.rows,function(e,t){t.showValidationErrors(r)})}}),o.defaults.editors.table=o.defaults.editors.array.extend({register:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].register()},unregister:function(){if(this._super(),this.rows)for(var e=0;e<this.rows.length;e++)this.rows[e].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.width),3)},preBuild:function(){var e=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=e.title||"row",this.item_default=e["default"]||null,this.item_has_child_editors=e.properties||e.items,this.width=12,this._super()},build:function(){var e=this;this.table=this.theme.getTable(),this.container.appendChild(this.table),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);var t=this.getElementEditor(0,!0);if(this.item_default=t.getDefault(),this.width=t.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.title=this.theme.getHeader(this.getTitle()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.table),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.item_has_child_editors)for(var i=t.getChildEditors(),n=t.property_order||Object.keys(i),r=0;r<n.length;r++){var o=e.theme.getTableHeaderCell(i[n[r]].getTitle());i[n[r]].options.hidden&&(o.style.display="none"),e.header_row.appendChild(o)}else e.header_row.appendChild(e.theme.getTableHeaderCell(this.item_title));t.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=e.theme.getTableHeaderCell(" "),e.header_row.appendChild(this.controls_header_cell),this.addControls()},onChildEditorChange:function(e){this.refreshValue(),this._super()},getItemDefault:function(){return i({},{"default":this.item_default})["default"]},getItemTitle:function(){return this.item_title},getElementEditor:function(e,t){var n=i({},this.schema.items),r=this.jsoneditor.getEditorClass(n,this.jsoneditor),o=this.row_holder.appendChild(this.theme.getTableRow()),s=o;this.item_has_child_editors||(s=this.theme.getTableCell(),o.appendChild(s));var a=this.jsoneditor.createEditor(r,{jsoneditor:this.jsoneditor,schema:n,container:s,path:this.path+"."+e,parent:this,compact:!0,table_row:!0});return a.preBuild(),t||(a.build(),a.postBuild(),a.controls_cell=o.appendChild(this.theme.getTableCell()),a.row=o,a.table_controls=this.theme.getButtonHolder(),a.controls_cell.appendChild(a.table_controls),a.table_controls.style.margin=0,a.table_controls.style.padding=0),a},destroy:function(){this.innerHTML="",this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.table&&this.table.parentNode&&this.table.parentNode.removeChild(this.table),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,this._super()},setValue:function(e,t){if(e=e||[],this.schema.minItems)for(;e.length<this.schema.minItems;)e.push(this.getItemDefault());this.schema.maxItems&&e.length>this.schema.maxItems&&(e=e.slice(0,this.schema.maxItems));var i=JSON.stringify(e);if(i!==this.serialized){var r=!1,o=this;n(e,function(e,t){o.rows[e]?o.rows[e].setValue(t):(o.addRow(t),r=!0)});for(var s=e.length;s<o.rows.length;s++){var a=o.rows[s].container;o.item_has_child_editors||o.rows[s].row.parentNode.removeChild(o.rows[s].row),o.rows[s].destroy(),a.parentNode&&a.parentNode.removeChild(a),o.rows[s]=null,r=!0}o.rows=o.rows.slice(0,e.length),o.refreshValue(),(r||t)&&o.refreshRowButtons(),o.onChange()}},refreshRowButtons:function(){var e=this,t=this.schema.minItems&&this.schema.minItems>=this.rows.length,i=!1;n(this.rows,function(n,r){r.movedown_button&&(n===e.rows.length-1?r.movedown_button.style.display="none":(i=!0,r.movedown_button.style.display="")),r.delete_button&&(t?r.delete_button.style.display="none":(i=!0,r.delete_button.style.display="")),r.moveup_button&&(i=!0)}),n(this.rows,function(e,t){i?t.controls_cell.style.display="":t.controls_cell.style.display="none"}),i?this.controls_header_cell.style.display="":this.controls_header_cell.style.display="none";var r=!1;this.value.length?1===this.value.length?(this.table.style.display="",this.remove_all_rows_button.style.display="none",t||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",r=!0)):(this.table.style.display="",t||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",r=!0),t||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",r=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none",this.table.style.display="none"),this.schema.maxItems&&this.schema.maxItems<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",r=!0),r?this.controls.style.display="":this.controls.style.display="none"},refreshValue:function(){var e=this;this.value=[],n(this.rows,function(t,i){e.value[t]=i.getValue()}),this.serialized=JSON.stringify(this.value)},addRow:function(e){var t=this,i=this.rows.length;t.rows[i]=this.getElementEditor(i);var r=t.rows[i].table_controls;this.hide_delete_buttons||(t.rows[i].delete_button=this.getButton("","delete",this.translate("button_delete_row_title_short")),t.rows[i].delete_button.className+=" delete",t.rows[i].delete_button.setAttribute("data-i",i),t.rows[i].delete_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i"),r=t.getValue(),o=[];n(r,function(e,t){e!==i&&o.push(t)}),t.setValue(o),t.onChange(!0)}),r.appendChild(t.rows[i].delete_button)),i&&!this.hide_move_buttons&&(t.rows[i].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),t.rows[i].moveup_button.className+=" moveup",t.rows[i].moveup_button.setAttribute("data-i",i),t.rows[i].moveup_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i");if(!(i<=0)){var n=t.getValue(),r=n[i-1];n[i-1]=n[i],n[i]=r,t.setValue(n),t.onChange(!0)}}),r.appendChild(t.rows[i].moveup_button)),this.hide_move_buttons||(t.rows[i].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),t.rows[i].movedown_button.className+=" movedown",t.rows[i].movedown_button.setAttribute("data-i",i),t.rows[i].movedown_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i"),n=t.getValue();if(!(i>=n.length-1)){var r=n[i+1];n[i+1]=n[i],n[i]=r,t.setValue(n),t.onChange(!0)}}),r.appendChild(t.rows[i].movedown_button)),e&&t.rows[i].setValue(e)},addControls:function(){var e=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls&&(this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.collapsed?(e.collapsed=!1,e.panel.style.display="",e.setButtonText(this,"","collapse",this.translate("button_collapse"))):(e.collapsed=!0,e.panel.style.display="none",e.setButtonText(this,"","expand",this.translate("button_expand")))}),this.options.collapsed&&r(this.toggle_button,"click"),this.schema.options&&"undefined"!=typeof this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()])),this.add_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.addRow(),e.refreshValue(),e.refreshRowButtons(),e.onChange(!0)}),e.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()])),this.delete_last_row_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var i=e.getValue();i.pop(),e.setValue(i),e.onChange(!0)}),e.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title")),this.remove_all_rows_button.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.setValue([]),e.onChange(!0)}),e.controls.appendChild(this.remove_all_rows_button)}}),o.defaults.editors.multiple=o.AbstractEditor.extend({register:function(){if(this.editors){for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister();this.editors[this.type]&&this.editors[this.type].register()}this._super()},unregister:function(){if(this._super(),this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].unregister()},getNumColumns:function(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4},enable:function(){if(this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].enable();this.switcher.disabled=!1,this._super()},disable:function(){if(this.editors)for(var e=0;e<this.editors.length;e++)this.editors[e]&&this.editors[e].disable();this.switcher.disabled=!0,this._super()},switchEditor:function(e){var t=this;this.editors[e]||this.buildChildEditor(e);
var i=t.getValue();t.type=e,t.register(),n(t.editors,function(e,n){n&&(t.type===e?(t.keep_values&&n.setValue(i,!0),n.container.style.display=""):n.container.style.display="none")}),t.refreshValue(),t.refreshHeaderText()},buildChildEditor:function(e){var t=this,n=this.types[e],r=t.theme.getChildEditorHolder();t.editor_holder.appendChild(r);var o;"string"==typeof n?(o=i({},t.schema),o.type=n):(o=i({},t.schema,n),o=t.jsoneditor.expandRefs(o),n.required&&Array.isArray(n.required)&&t.schema.required&&Array.isArray(t.schema.required)&&(o.required=t.schema.required.concat(n.required)));var s=t.jsoneditor.getEditorClass(o);t.editors[e]=t.jsoneditor.createEditor(s,{jsoneditor:t.jsoneditor,schema:o,container:r,path:t.path,parent:t,required:!0}),t.editors[e].preBuild(),t.editors[e].build(),t.editors[e].postBuild(),t.editors[e].header&&(t.editors[e].header.style.display="none"),t.editors[e].option=t.switcher_options[e],r.addEventListener("change_header_text",function(){t.refreshHeaderText()}),e!==t.type&&(r.style.display="none")},preBuild:function(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,"undefined"!=typeof this.jsoneditor.options.keep_oneof_values&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),"undefined"!=typeof this.options.keep_oneof_values&&(this.keep_values=this.options.keep_oneof_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else{if(this.schema.type&&"any"!==this.schema.type)Array.isArray(this.schema.type)?this.types=this.schema.type:this.types=[this.schema.type];else if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){var e=this.schema.disallow;"object"==typeof e&&Array.isArray(e)||(e=[e]);var t=[];n(this.types,function(i,n){e.indexOf(n)===-1&&t.push(n)}),this.types=t}delete this.schema.type}this.display_text=this.getDisplayText(this.types)},build:function(){var e=this,t=this.container;this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.header),this.switcher=this.theme.getSwitcher(this.display_text),t.appendChild(this.switcher),this.switcher.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.switchEditor(e.display_text.indexOf(this.value)),e.onChange(!0)}),this.editor_holder=document.createElement("div"),t.appendChild(this.editor_holder);var r={};e.jsoneditor.options.custom_validators&&(r.custom_validators=e.jsoneditor.options.custom_validators),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),n(this.types,function(t,n){e.editors[t]=!1;var s;"string"==typeof n?(s=i({},e.schema),s.type=n):(s=i({},e.schema,n),n.required&&Array.isArray(n.required)&&e.schema.required&&Array.isArray(e.schema.required)&&(s.required=e.schema.required.concat(n.required))),e.validators[t]=new o.Validator(e.jsoneditor,s,r)}),this.switchEditor(0)},onChildEditorChange:function(e){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),this._super()},refreshHeaderText:function(){var e=this.getDisplayText(this.types);n(this.switcher_options,function(t,i){i.textContent=e[t]})},refreshValue:function(){this.value=this.editors[this.type].getValue()},setValue:function(e,t){var i=this;n(this.validators,function(t,n){if(!n.validate(e).length)return i.type=t,i.switcher.value=i.display_text[t],!1}),this.switchEditor(this.type),this.editors[this.type].setValue(e,t),this.refreshValue(),i.onChange()},destroy:function(){n(this.editors,function(e,t){t&&t.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()},showValidationErrors:function(e){var t=this;if(this.oneOf||this.anyOf){var r=this.oneOf?"oneOf":"anyOf";n(this.editors,function(o,s){if(s){var a=t.path+"."+r+"["+o+"]",l=[];n(e,function(e,n){if(n.path.substr(0,a.length)===a){var r=i({},n);r.path=t.path+r.path.substr(a.length),l.push(r)}}),s.showValidationErrors(l)}})}else n(this.editors,function(t,i){i&&i.showValidationErrors(e)})}}),o.defaults.editors["enum"]=o.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){this.container;this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this["enum"]=this.schema["enum"],this.selected=0,this.select_options=[],this.html_values=[];for(var e=this,t=0;t<this["enum"].length;t++)this.select_options[t]=this.options.enum_titles[t]||"Value "+(t+1),this.html_values[t]=this.getHTML(this["enum"][t]);this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",function(){e.selected=e.select_options.indexOf(this.value),e.value=e["enum"][e.selected],e.refreshValue(),e.onChange(!0)}),this.value=this["enum"][0],this.refreshValue(),1===this["enum"].length&&(this.switcher.style.display="none")},refreshValue:function(){var e=this;e.selected=-1;var t=JSON.stringify(this.value);return n(this["enum"],function(i,n){if(t===JSON.stringify(n))return e.selected=i,!1}),e.selected<0?void e.setValue(e["enum"][0]):(this.switcher.value=this.select_options[this.selected],void(this.display_area.innerHTML=this.html_values[this.selected]))},enable:function(){this.always_disabled||(this.switcher.disabled=!1),this._super()},disable:function(){this.switcher.disabled=!0,this._super()},getHTML:function(e){var t=this;if(null===e)return"<em>null</em>";if("object"==typeof e){var i="";return n(e,function(n,r){var o=t.getHTML(r);Array.isArray(e)||(o="<div><em>"+n+"</em>: "+o+"</div>"),i+="<li>"+o+"</li>"}),i=Array.isArray(e)?"<ol>"+i+"</ol>":"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>"+i+"</ul>"}return"boolean"==typeof e?e?"true":"false":"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},setValue:function(e){this.value!==e&&(this.value=e,this.refreshValue(),this.onChange())},destroy:function(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()}}),o.defaults.editors.select=o.AbstractEditor.extend({setValue:function(e,t){e=this.typecast(e||"");var i=e;this.enum_values.indexOf(i)<0&&(i=this.enum_values[0]),this.value!==i&&(this.input.value=this.enum_options[this.enum_values.indexOf(i)],this.select2&&this.select2.select2("val",this.input.value),this.value=i,this.onChange())},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var e=this.getTitle().length,t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))},typecast:function(e){return"boolean"===this.schema.type?!!e:"number"===this.schema.type?1*e:"integer"===this.schema.type?Math.floor(1*e):""+e},getValue:function(){return this.value},preBuild:function(){var e=this;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];var t;if(this.schema["enum"]){var r=this.schema.options&&this.schema.options.enum_titles||[];n(this.schema["enum"],function(t,i){e.enum_options[t]=""+i,e.enum_display[t]=""+(r[t]||i),e.enum_values[t]=e.typecast(i)}),this.isRequired()||(e.enum_display.unshift(" "),e.enum_options.unshift("undefined"),e.enum_values.unshift(void 0))}else if("boolean"===this.schema.type)e.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],e.enum_options=["1",""],e.enum_values=[!0,!1],this.isRequired()||(e.enum_display.unshift(" "),e.enum_options.unshift("undefined"),e.enum_values.unshift(void 0));else{if(!this.schema.enumSource)throw"'select' editor requires the enum property to be set.";if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(t=0;t<this.schema.enumSource.length;t++)"string"==typeof this.schema.enumSource[t]?this.enumSource[t]={source:this.schema.enumSource[t]}:Array.isArray(this.schema.enumSource[t])?this.enumSource[t]=this.schema.enumSource[t]:this.enumSource[t]=i({},this.schema.enumSource[t]);else this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];for(t=0;t<this.enumSource.length;t++)this.enumSource[t].value&&(this.enumSource[t].value=this.jsoneditor.compileTemplate(this.enumSource[t].value,this.template_engine)),this.enumSource[t].title&&(this.enumSource[t].title=this.jsoneditor.compileTemplate(this.enumSource[t].title,this.template_engine)),this.enumSource[t].filter&&(this.enumSource[t].filter=this.jsoneditor.compileTemplate(this.enumSource[t].filter,this.template_engine))}},build:function(){var e=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getSelectInput(this.enum_options),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0]},onInputChange:function(){var e,t=this.input.value;e=this.enum_options.indexOf(t)===-1?this.enum_values[0]:this.enum_values[this.enum_options.indexOf(t)],e!==this.value&&(this.value=e,this.onChange(!0))},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&(this.enum_options.length>2||this.enum_options.length&&this.enumSource)){var e=i({},o.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(e=i(e,this.schema.options.select2_options)),this.select2=window.jQuery(this.input).select2(e);var t=this;this.select2.on("select2-blur",function(){t.input.value=t.select2.select2("val"),t.onInputChange()}),this.select2.on("change",function(){t.input.value=t.select2.select2("val"),t.onInputChange()})}else this.select2=null},postBuild:function(){this._super(),this.theme.afterInputReady(this.input),this.setupSelect2()},onWatchedFieldChange:function(){var e,t;if(this.enumSource){e=this.getWatchedFieldValues();for(var i=[],n=[],r=0;r<this.enumSource.length;r++)if(Array.isArray(this.enumSource[r]))i=i.concat(this.enumSource[r]),n=n.concat(this.enumSource[r]);else{var o=[];if(o=Array.isArray(this.enumSource[r].source)?this.enumSource[r].source:e[this.enumSource[r].source]){if(this.enumSource[r].slice&&(o=Array.prototype.slice.apply(o,this.enumSource[r].slice)),this.enumSource[r].filter){var s=[];for(t=0;t<o.length;t++)this.enumSource[r].filter({i:t,item:o[t],watched:e})&&s.push(o[t]);o=s}var a=[],l=[];for(t=0;t<o.length;t++){var u=o[t];this.enumSource[r].value?l[t]=this.enumSource[r].value({i:t,item:u}):l[t]=o[t],this.enumSource[r].title?a[t]=this.enumSource[r].title({i:t,item:u}):a[t]=l[t]}i=i.concat(l),n=n.concat(a)}}var d=this.value;this.theme.setSelectOptions(this.input,i,n),this.enum_options=i,this.enum_display=n,this.enum_values=i,this.select2&&this.select2.select2("destroy"),i.indexOf(d)!==-1?(this.input.value=d,this.value=d):(this.input.value=i[0],this.value=i[0]||"",this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path)),this.setupSelect2()}this._super()},enable:function(){this.always_disabled||(this.input.disabled=!1,this.select2&&this.select2.select2("enable",!0)),this._super()},disable:function(){this.input.disabled=!0,this.select2&&this.select2.select2("enable",!1),this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.select2&&(this.select2.select2("destroy"),this.select2=null),this._super()}}),o.defaults.editors.selectize=o.AbstractEditor.extend({setValue:function(e,t){e=this.typecast(e||"");var i=e;this.enum_values.indexOf(i)<0&&(i=this.enum_values[0]),this.value!==i&&(this.input.value=this.enum_options[this.enum_values.indexOf(i)],this.selectize&&this.selectize[0].selectize.addItem(i),this.value=i,this.onChange())},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var e=this.getTitle().length,t=0;t<this.enum_options.length;t++)e=Math.max(e,this.enum_options[t].length+4);return Math.min(12,Math.max(e/7,2))},typecast:function(e){return"boolean"===this.schema.type?!!e:"number"===this.schema.type?1*e:"integer"===this.schema.type?Math.floor(1*e):""+e},getValue:function(){return this.value},preBuild:function(){var e=this;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];var t;if(this.schema["enum"]){var r=this.schema.options&&this.schema.options.enum_titles||[];n(this.schema["enum"],function(t,i){e.enum_options[t]=""+i,e.enum_display[t]=""+(r[t]||i),e.enum_values[t]=e.typecast(i)})}else if("boolean"===this.schema.type)e.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],e.enum_options=["1","0"],e.enum_values=[!0,!1];else{if(!this.schema.enumSource)throw"'select' editor requires the enum property to be set.";if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(t=0;t<this.schema.enumSource.length;t++)"string"==typeof this.schema.enumSource[t]?this.enumSource[t]={source:this.schema.enumSource[t]}:Array.isArray(this.schema.enumSource[t])?this.enumSource[t]=this.schema.enumSource[t]:this.enumSource[t]=i({},this.schema.enumSource[t]);else this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];for(t=0;t<this.enumSource.length;t++)this.enumSource[t].value&&(this.enumSource[t].value=this.jsoneditor.compileTemplate(this.enumSource[t].value,this.template_engine)),this.enumSource[t].title&&(this.enumSource[t].title=this.jsoneditor.compileTemplate(this.enumSource[t].title,this.template_engine)),this.enumSource[t].filter&&(this.enumSource[t].filter=this.jsoneditor.compileTemplate(this.enumSource[t].filter,this.template_engine))}},build:function(){var e=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getSelectInput(this.enum_options),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0]},onInputChange:function(){var e=this.input.value,t=e;this.enum_options.indexOf(e)===-1&&(t=this.enum_options[0]),this.value=this.enum_values[this.enum_options.indexOf(e)],this.onChange(!0)},setupSelectize:function(){var e=this;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&(this.enum_options.length>=2||this.enum_options.length&&this.enumSource)){var t=i({},o.plugins.selectize);this.schema.options&&this.schema.options.selectize_options&&(t=i(t,this.schema.options.selectize_options)),this.selectize=window.jQuery(this.input).selectize(i(t,{create:!0,onChange:function(){e.onInputChange()}}))}else this.selectize=null},postBuild:function(){this._super(),this.theme.afterInputReady(this.input),this.setupSelectize()},onWatchedFieldChange:function(){var e,t;if(this.enumSource){e=this.getWatchedFieldValues();for(var i=[],n=[],r=0;r<this.enumSource.length;r++)if(Array.isArray(this.enumSource[r]))i=i.concat(this.enumSource[r]),n=n.concat(this.enumSource[r]);else if(e[this.enumSource[r].source]){var o=e[this.enumSource[r].source];if(this.enumSource[r].slice&&(o=Array.prototype.slice.apply(o,this.enumSource[r].slice)),this.enumSource[r].filter){var s=[];for(t=0;t<o.length;t++)this.enumSource[r].filter({i:t,item:o[t]})&&s.push(o[t]);o=s}var a=[],l=[];for(t=0;t<o.length;t++){var u=o[t];this.enumSource[r].value?l[t]=this.enumSource[r].value({i:t,item:u}):l[t]=o[t],this.enumSource[r].title?a[t]=this.enumSource[r].title({i:t,item:u}):a[t]=l[t]}i=i.concat(l),n=n.concat(a)}var d=this.value;this.theme.setSelectOptions(this.input,i,n),this.enum_options=i,this.enum_display=n,this.enum_values=i,i.indexOf(d)!==-1?(this.input.value=d,this.value=d):(this.input.value=i[0],this.value=i[0]||"",this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path)),this.selectize?this.updateSelectizeOptions(i):this.setupSelectize(),this._super()}},updateSelectizeOptions:function(e){var t=this.selectize[0].selectize,i=this;t.off(),t.clearOptions();for(var n in e)t.addOption({value:e[n],text:e[n]});t.addItem(this.value),t.on("change",function(){i.onInputChange()})},enable:function(){this.always_disabled||(this.input.disabled=!1,this.selectize&&this.selectize[0].selectize.unlock()),this._super()},disable:function(){this.input.disabled=!0,this.selectize&&this.selectize[0].selectize.lock(),this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.selectize&&(this.selectize[0].selectize.destroy(),this.selectize=null),this._super()}}),o.defaults.editors.multiselect=o.AbstractEditor.extend({preBuild:function(){this._super();var e;this.select_options={},this.select_values={};var t=this.jsoneditor.expandRefs(this.schema.items||{}),i=t["enum"]||[];for(this.option_keys=[],e=0;e<i.length;e++)this.sanitize(i[e])===i[e]&&(this.option_keys.push(i[e]+""),this.select_values[i[e]+""]=i[e])},build:function(){var e,t=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),!this.schema.format&&this.option_keys.length<8||"checkbox"===this.schema.format){for(this.input_type="checkboxes",this.inputs={},this.controls={},e=0;e<this.option_keys.length;e++){this.inputs[this.option_keys[e]]=this.theme.getCheckbox(),this.select_options[this.option_keys[e]]=this.inputs[this.option_keys[e]];var i=this.theme.getCheckboxLabel(this.option_keys[e]);this.controls[this.option_keys[e]]=this.theme.getFormControl(i,this.inputs[this.option_keys[e]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description)}else{for(this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys),this.input.multiple=!0,this.input.size=Math.min(10,this.option_keys.length),e=0;e<this.option_keys.length;e++)this.select_options[this.option_keys[e]]=this.input.children[e];(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.control=this.theme.getFormControl(this.label,this.input,this.description)}this.container.appendChild(this.control),this.control.addEventListener("change",function(i){i.preventDefault(),i.stopPropagation();var n=[];for(e=0;e<t.option_keys.length;e++)(t.select_options[t.option_keys[e]].selected||t.select_options[t.option_keys[e]].checked)&&n.push(t.select_values[t.option_keys[e]]);t.updateValue(n),t.onChange(!0)})},setValue:function(e,t){var i;for(e=e||[],"object"!=typeof e?e=[e]:Array.isArray(e)||(e=[]),i=0;i<e.length;i++)"string"!=typeof e[i]&&(e[i]+="");for(i in this.select_options)this.select_options.hasOwnProperty(i)&&(this.select_options[i]["select"===this.input_type?"selected":"checked"]=e.indexOf(i)!==-1);this.updateValue(e),this.onChange()},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2){var e=window.jQuery.extend({},o.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(e=i(e,this.schema.options.select2_options)),this.select2=window.jQuery(this.input).select2(e);var t=this;this.select2.on("select2-blur",function(){var e=t.select2.select2("val");t.value=e,t.onChange(!0)})}else this.select2=null},onInputChange:function(){this.value=this.input.value,this.onChange(!0)},postBuild:function(){this._super(),this.setupSelect2()},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){var e=this.getTitle().length;for(var t in this.select_values)this.select_values.hasOwnProperty(t)&&(e=Math.max(e,(this.select_values[t]+"").length+4));return Math.min(12,Math.max(e/7,2))},updateValue:function(e){for(var t=!1,i=[],n=0;n<e.length;n++)if(this.select_options[e[n]+""]){var r=this.sanitize(this.select_values[e[n]]);i.push(r),r!==e[n]&&(t=!0)}else t=!0;return this.value=i,this.select2&&this.select2.select2("val",this.value),t},sanitize:function(e){return"number"===this.schema.items.type?1*e:"integer"===this.schema.items.type?Math.floor(1*e):""+e},enable:function(){if(!this.always_disabled){if(this.input)this.input.disabled=!1;else if(this.inputs)for(var e in this.inputs)this.inputs.hasOwnProperty(e)&&(this.inputs[e].disabled=!1);this.select2&&this.select2.select2("enable",!0)}this._super()},disable:function(){if(this.input)this.input.disabled=!0;else if(this.inputs)for(var e in this.inputs)this.inputs.hasOwnProperty(e)&&(this.inputs[e].disabled=!0);this.select2&&this.select2.select2("enable",!1),this._super()},destroy:function(){this.select2&&(this.select2.select2("destroy"),this.select2=null),this._super()}}),o.defaults.editors.base64=o.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var e=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw"FileReader required for base64 editor";this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),this.files&&this.files.length){var i=new FileReader;i.onload=function(t){e.value=t.target.result,e.refreshPreview(),e.onChange(!0),i=null},i.readAsDataURL(this.files[0])}})}this.preview=this.theme.getFormInputDescription(this.schema.description),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.value&&(this.last_preview=this.value,this.preview.innerHTML="",this.value)){var e=this.value.match(/^data:([^;,]+)[;,]/);if(e&&(e=e[1]),e){if(this.preview.innerHTML="<strong>Type:</strong> "+e+", <strong>Size:</strong> "+Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)+" bytes","image"===e.substr(0,5)){this.preview.innerHTML+="<br>";var t=document.createElement("img");t.style.maxWidth="100%",t.style.maxHeight="100px",t.src=this.value,this.preview.appendChild(t)}}else this.preview.innerHTML="<em>Invalid data URI</em>"}},enable:function(){this.uploader&&(this.uploader.disabled=!1),this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.refreshPreview(),this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),o.defaults.editors.upload=o.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var e=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!this.jsoneditor.options.upload)throw"Upload handler required for upload editor";this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),this.files&&this.files.length){var i=new FileReader;i.onload=function(t){e.preview_value=t.target.result,e.refreshPreview(),e.onChange(!0),i=null},i.readAsDataURL(this.files[0])}})}var t=this.schema.description;t||(t=""),this.preview=this.theme.getFormInputDescription(t),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.preview_value&&(this.last_preview=this.preview_value,this.preview.innerHTML="",this.preview_value)){var e=this,t=this.preview_value.match(/^data:([^;,]+)[;,]/);t&&(t=t[1]),t||(t="unknown");var i=this.uploader.files[0];if(this.preview.innerHTML="<strong>Type:</strong> "+t+", <strong>Size:</strong> "+i.size+" bytes","image"===t.substr(0,5)){this.preview.innerHTML+="<br>";var n=document.createElement("img");n.style.maxWidth="100%",n.style.maxHeight="100px",n.src=this.preview_value,this.preview.appendChild(n)}this.preview.innerHTML+="<br>";var r=this.getButton("Upload","upload","Upload");this.preview.appendChild(r),r.addEventListener("click",function(t){t.preventDefault(),r.setAttribute("disabled","disabled"),e.theme.removeInputError(e.uploader),e.theme.getProgressBar&&(e.progressBar=e.theme.getProgressBar(),e.preview.appendChild(e.progressBar)),e.jsoneditor.options.upload(e.path,i,{success:function(t){e.setValue(t),e.parent?e.parent.onChildEditorChange(e):e.jsoneditor.onChange(),e.progressBar&&e.preview.removeChild(e.progressBar),r.removeAttribute("disabled")},failure:function(t){e.theme.addInputError(e.uploader,t),e.progressBar&&e.preview.removeChild(e.progressBar),r.removeAttribute("disabled")},updateProgress:function(t){e.progressBar&&(t?e.theme.updateProgressBar(e.progressBar,t):e.theme.updateProgressBarUnknown(e.progressBar))}})})}},enable:function(){this.uploader&&(this.uploader.disabled=!1),this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(e){this.value!==e&&(this.value=e,this.input.value=this.value,this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),o.defaults.editors.checkbox=o.AbstractEditor.extend({setValue:function(e,t){this.value=!!e,this.input.checked=this.value,this.onChange()},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){return Math.min(12,Math.max(this.getTitle().length/7,2))},build:function(){var e=this;this.options.compact||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getCheckbox(),this.control=this.theme.getFormControl(this.label,this.input,this.description),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(t){t.preventDefault(),t.stopPropagation(),e.value=this.checked,e.onChange(!0)}),this.container.appendChild(this.control)},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(){this.input.disabled=!0,this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()}}),o.defaults.editors.arraySelectize=o.AbstractEditor.extend({build:function(){this.title=this.theme.getFormInputLabel(this.getTitle()),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.error_holder=document.createElement("div"),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description)),this.input=document.createElement("select"),this.input.setAttribute("multiple","multiple");var e=this.theme.getFormControl(this.title,this.input,this.description);this.container.appendChild(e),this.container.appendChild(this.error_holder),window.jQuery(this.input).selectize({delimiter:!1,createOnBlur:!0,create:!0})},postBuild:function(){var e=this;this.input.selectize.on("change",function(t){e.refreshValue(),e.onChange(!0)})},destroy:function(){this.empty(!0),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()},empty:function(e){},setValue:function(e,t){var i=this;e=e||[],Array.isArray(e)||(e=[e]),this.input.selectize.clearOptions(),this.input.selectize.clear(!0),e.forEach(function(e){i.input.selectize.addOption({text:e,value:e})}),this.input.selectize.setValue(e),this.refreshValue(t)},refreshValue:function(e){this.value=this.input.selectize.getValue()},showValidationErrors:function(e){var t=this,i=[],r=[];if(n(e,function(e,n){n.path===t.path?i.push(n):r.push(n)}),this.error_holder)if(i.length){this.error_holder.innerHTML="",this.error_holder.style.display="",n(i,function(e,i){t.error_holder.appendChild(t.theme.getErrorMessage(i.message))})}else this.error_holder.style.display="none"}});var s=function(){var e=document.documentElement;return e.matches?"matches":e.webkitMatchesSelector?"webkitMatchesSelector":e.mozMatchesSelector?"mozMatchesSelector":e.msMatchesSelector?"msMatchesSelector":e.oMatchesSelector?"oMatchesSelector":void 0}();o.AbstractTheme=e.extend({getContainer:function(){return document.createElement("div")},getFloatRightLinkHolder:function(){var e=document.createElement("div");
return e.style=e.style||{},e.style.cssFloat="right",e.style.marginLeft="10px",e},getModal:function(){var e=document.createElement("div");return e.style.backgroundColor="white",e.style.border="1px solid black",e.style.boxShadow="3px 3px black",e.style.position="absolute",e.style.zIndex="10",e.style.display="none",e},getGridContainer:function(){var e=document.createElement("div");return e},getGridRow:function(){var e=document.createElement("div");return e.className="row",e},getGridColumn:function(){var e=document.createElement("div");return e},setGridColumnSize:function(e,t){},getLink:function(e){var t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(document.createTextNode(e)),t},disableHeader:function(e){e.style.color="#ccc"},disableLabel:function(e){e.style.color="#ccc"},enableHeader:function(e){e.style.color=""},enableLabel:function(e){e.style.color=""},getFormInputLabel:function(e){var t=document.createElement("label");return t.appendChild(document.createTextNode(e)),t},getCheckboxLabel:function(e){var t=this.getFormInputLabel(e);return t.style.fontWeight="normal",t},getHeader:function(e){var t=document.createElement("h3");return"string"==typeof e?t.textContent=e:t.appendChild(e),t},getCheckbox:function(){var e=this.getFormInputField("checkbox");return e.style.display="inline-block",e.style.width="auto",e},getMultiCheckboxHolder:function(e,t,i){var n=document.createElement("div");t&&(t.style.display="block",n.appendChild(t));for(var r in e)e.hasOwnProperty(r)&&(e[r].style.display="inline-block",e[r].style.marginRight="20px",n.appendChild(e[r]));return i&&n.appendChild(i),n},getSelectInput:function(e){var t=document.createElement("select");return e&&this.setSelectOptions(t,e),t},getSwitcher:function(e){var t=this.getSelectInput(e);return t.style.backgroundColor="transparent",t.style.display="inline-block",t.style.fontStyle="italic",t.style.fontWeight="normal",t.style.height="auto",t.style.marginBottom=0,t.style.marginLeft="5px",t.style.padding="0 0 0 3px",t.style.width="auto",t},getSwitcherOptions:function(e){return e.getElementsByTagName("option")},setSwitcherOptions:function(e,t,i){this.setSelectOptions(e,t,i)},setSelectOptions:function(e,t,i){i=i||[],e.innerHTML="";for(var n=0;n<t.length;n++){var r=document.createElement("option");r.setAttribute("value",t[n]),r.textContent=i[n]||t[n],e.appendChild(r)}},getTextareaInput:function(){var e=document.createElement("textarea");return e.style=e.style||{},e.style.width="100%",e.style.height="300px",e.style.boxSizing="border-box",e},getRangeInput:function(e,t,i){var n=this.getFormInputField("range");return n.setAttribute("min",e),n.setAttribute("max",t),n.setAttribute("step",i),n},getFormInputField:function(e){var t=document.createElement("input");return t.setAttribute("type",e),t},afterInputReady:function(e){},getFormControl:function(e,t,i){var n=document.createElement("div");return n.className="form-control",e&&n.appendChild(e),"checkbox"===t.type?e.insertBefore(t,e.firstChild):n.appendChild(t),i&&n.appendChild(i),n},getIndentedPanel:function(){var e=document.createElement("div");return e.style=e.style||{},e.style.paddingLeft="10px",e.style.marginLeft="10px",e.style.borderLeft="1px solid #ccc",e},getChildEditorHolder:function(){return document.createElement("div")},getDescription:function(e){var t=document.createElement("p");return t.innerHTML=e,t},getCheckboxDescription:function(e){return this.getDescription(e)},getFormInputDescription:function(e){return this.getDescription(e)},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return document.createElement("div")},getButton:function(e,t,i){var n=document.createElement("button");return n.type="button",this.setButtonText(n,e,t,i),n},setButtonText:function(e,t,i,n){e.innerHTML="",i&&(e.appendChild(i),e.innerHTML+=" "),e.appendChild(document.createTextNode(t)),n&&e.setAttribute("title",n)},getTable:function(){return document.createElement("table")},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},getTableHeaderCell:function(e){var t=document.createElement("th");return t.textContent=e,t},getTableCell:function(){var e=document.createElement("td");return e},getErrorMessage:function(e){var t=document.createElement("p");return t.style=t.style||{},t.style.color="red",t.appendChild(document.createTextNode(e)),t},addInputError:function(e,t){},removeInputError:function(e){},addTableRowError:function(e){},removeTableRowError:function(e){},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div><div style='clear:both;'></div>",e},applyStyles:function(e,t){e.style=e.style||{};for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])},closest:function(e,t){for(;e&&e!==document;){if(!e[s])return!1;if(e[s](t))return e;e=e.parentNode}return!1},getTab:function(e){var t=document.createElement("div");return t.appendChild(e),t.style=t.style||{},this.applyStyles(t,{border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",textAlign:"center",lineHeight:"30px",borderRadius:"5px",borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"}),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){return this.getIndentedPanel()},markTabActive:function(e){this.applyStyles(e,{opacity:1,background:"white"})},markTabInactive:function(e){this.applyStyles(e,{opacity:.5,background:""})},addTab:function(e,t){e.children[0].appendChild(t)},getBlockLink:function(){var e=document.createElement("a");return e.style.display="block",e},getBlockLinkHolder:function(){var e=document.createElement("div");return e},getLinksHolder:function(){var e=document.createElement("div");return e},createMediaLink:function(e,t,i){e.appendChild(t),i.style.width="100%",e.appendChild(i)},createImageLink:function(e,t,i){e.appendChild(t),t.appendChild(i)}}),o.defaults.themes.bootstrap2=o.AbstractTheme.extend({getRangeInput:function(e,t,i){return this._super(e,t,i)},getGridContainer:function(){var e=document.createElement("div");return e.className="container-fluid",e},getGridRow:function(){var e=document.createElement("div");return e.className="row-fluid",e},getFormInputLabel:function(e){var t=this._super(e);return t.style.display="inline-block",t.style.fontWeight="bold",t},setGridColumnSize:function(e,t){e.className="span"+t},getSelectInput:function(e){var t=this._super(e);return t.style.width="auto",t.style.maxWidth="98%",t},getFormInputField:function(e){var t=this._super(e);return t.style.width="98%",t},afterInputReady:function(e){e.controlgroup||(e.controlgroup=this.closest(e,".control-group"),e.controls=this.closest(e,".controls"),this.closest(e,".compact")&&(e.controlgroup.className=e.controlgroup.className.replace(/control-group/g,"").replace(/[ ]{2,}/g," "),e.controls.className=e.controlgroup.className.replace(/controls/g,"").replace(/[ ]{2,}/g," "),e.style.marginBottom=0))},getIndentedPanel:function(){var e=document.createElement("div");return e.className="well well-small",e.style.paddingBottom=0,e},getFormInputDescription:function(e){var t=document.createElement("p");return t.className="help-inline",t.textContent=e,t},getFormControl:function(e,t,i){var n=document.createElement("div");n.className="control-group";var r=document.createElement("div");return r.className="controls",e&&"checkbox"===t.getAttribute("type")?(n.appendChild(r),e.className+=" checkbox",e.appendChild(t),r.appendChild(e),r.style.height="30px"):(e&&(e.className+=" control-label",n.appendChild(e)),r.appendChild(t),n.appendChild(r)),i&&r.appendChild(i),n},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.marginLeft="10px",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="btn-group",e},getButton:function(e,t,i){var n=this._super(e,t,i);return n.className+=" btn btn-default",n},getTable:function(){var e=document.createElement("table");return e.className="table table-bordered",e.style.width="auto",e.style.maxWidth="none",e},addInputError:function(e,t){e.controlgroup&&e.controls&&(e.controlgroup.className+=" error",e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.className="help-block errormsg",e.controls.appendChild(e.errmsg)),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.className=e.controlgroup.className.replace(/\s?error/g,""))},getTabHolder:function(){var e=document.createElement("div");return e.className="tabbable tabs-left",e.innerHTML="<ul class='nav nav-tabs span2' style='margin-right: 0;'></ul><div class='tab-content span10' style='overflow:visible;'></div>",e},getTab:function(e){var t=document.createElement("li"),i=document.createElement("a");return i.setAttribute("href","#"),i.appendChild(e),t.appendChild(i),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){var e=document.createElement("div");return e.className="tab-pane active",e},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s?active/g,"")},addTab:function(e,t){e.children[0].appendChild(t)},getProgressBar:function(){var e=document.createElement("div");e.className="progress";var t=document.createElement("div");return t.className="bar",t.style.width="0%",e.appendChild(t),e},updateProgressBar:function(e,t){e&&(e.firstChild.style.width=t+"%")},updateProgressBarUnknown:function(e){e&&(e.className="progress progress-striped active",e.firstChild.style.width="100%")}}),o.defaults.themes.bootstrap3=o.AbstractTheme.extend({getSelectInput:function(e){var t=this._super(e);return t.className+="form-control",t},setGridColumnSize:function(e,t){e.className="col-md-"+t},afterInputReady:function(e){e.controlgroup||(e.controlgroup=this.closest(e,".form-group"),this.closest(e,".compact")&&(e.controlgroup.style.marginBottom=0))},getTextareaInput:function(){var e=document.createElement("textarea");return e.className="form-control",e},getRangeInput:function(e,t,i){return this._super(e,t,i)},getFormInputField:function(e){var t=this._super(e);return"checkbox"!==e&&(t.className+="form-control"),t},getFormControl:function(e,t,i){var n=document.createElement("div");return e&&"checkbox"===t.type?(n.className+=" checkbox",e.appendChild(t),e.style.fontSize="14px",n.style.marginTop="0",n.appendChild(e),t.style.position="relative",t.style.cssFloat="left"):(n.className+=" form-group",e&&(e.className+=" control-label",n.appendChild(e)),n.appendChild(t)),i&&n.appendChild(i),n},getIndentedPanel:function(){var e=document.createElement("div");return e.className="well well-sm",e.style.paddingBottom=0,e},getFormInputDescription:function(e){var t=document.createElement("p");return t.className="help-block",t.innerHTML=e,t},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.marginLeft="10px",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="btn-group",e},getButton:function(e,t,i){var n=this._super(e,t,i);return n.className+="btn btn-default",n},getTable:function(){var e=document.createElement("table");return e.className="table table-bordered",e.style.width="auto",e.style.maxWidth="none",e},addInputError:function(e,t){e.controlgroup&&(e.controlgroup.className+=" has-error",e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("p"),e.errmsg.className="help-block errormsg",e.controlgroup.appendChild(e.errmsg)),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.errmsg.style.display="none",e.controlgroup.className=e.controlgroup.className.replace(/\s?has-error/g,""))},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<div class='tabs list-group col-md-1'></div><div class='col-md-11'></div>",e.className="rows",e},getTab:function(e){var t=document.createElement("a");return t.className="list-group-item",t.setAttribute("href","#"),t.appendChild(e),t},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s?active/g,"")},getProgressBar:function(){var e=0,t=100,i=0,n=document.createElement("div");n.className="progress";var r=document.createElement("div");return r.className="progress-bar",r.setAttribute("role","progressbar"),r.setAttribute("aria-valuenow",i),r.setAttribute("aria-valuemin",e),r.setAttribute("aria-valuenax",t),r.innerHTML=i+"%",n.appendChild(r),n},updateProgressBar:function(e,t){if(e){var i=e.firstChild,n=t+"%";i.setAttribute("aria-valuenow",t),i.style.width=n,i.innerHTML=n}},updateProgressBarUnknown:function(e){if(e){var t=e.firstChild;e.className="progress progress-striped active",t.removeAttribute("aria-valuenow"),t.style.width="100%",t.innerHTML=""}}}),o.defaults.themes.foundation=o.AbstractTheme.extend({getChildEditorHolder:function(){var e=document.createElement("div");return e.style.marginBottom="15px",e},getSelectInput:function(e){var t=this._super(e);return t.style.minWidth="none",t.style.padding="5px",t.style.marginTop="3px",t},getSwitcher:function(e){var t=this._super(e);return t.style.paddingRight="8px",t},afterInputReady:function(e){this.closest(e,".compact")&&(e.style.marginBottom=0),e.group=this.closest(e,".form-control")},getFormInputLabel:function(e){var t=this._super(e);return t.style.display="inline-block",t},getFormInputField:function(e){var t=this._super(e);return t.style.width="100%",t.style.marginBottom="checkbox"===e?"0":"12px",t},getFormInputDescription:function(e){var t=document.createElement("p");return t.textContent=e,t.style.marginTop="-10px",t.style.fontStyle="italic",t},getIndentedPanel:function(){var e=document.createElement("div");return e.className="panel",e.style.paddingBottom=0,e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.display="inline-block",e.style.marginLeft="10px",e.style.verticalAlign="middle",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="button-group",e},getButton:function(e,t,i){var n=this._super(e,t,i);return n.className+=" small button",n},addInputError:function(e,t){e.group&&(e.group.className+=" error",e.errmsg?e.errmsg.style.display="":(e.insertAdjacentHTML("afterend",'<small class="error"></small>'),e.errmsg=e.parentNode.getElementsByClassName("error")[0]),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.group.className=e.group.className.replace(/ error/g,""),e.errmsg.style.display="none")},getProgressBar:function(){var e=document.createElement("div");e.className="progress";var t=document.createElement("span");return t.className="meter",t.style.width="0%",e.appendChild(t),e},updateProgressBar:function(e,t){e&&(e.firstChild.style.width=t+"%")},updateProgressBarUnknown:function(e){e&&(e.firstChild.style.width="100%")}}),o.defaults.themes.foundation3=o.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var e=this._super();return e.style.fontSize=".6em",e},getFormInputLabel:function(e){var t=this._super(e);return t.style.fontWeight="bold",t},getTabHolder:function(){var e=document.createElement("div");return e.className="row",e.innerHTML="<dl class='tabs vertical two columns'></dl><div class='tabs-content ten columns'></div>",e},setGridColumnSize:function(e,t){var i=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"];e.className="columns "+i[t]},getTab:function(e){var t=document.createElement("dd"),i=document.createElement("a");return i.setAttribute("href","#"),i.appendChild(e),t.appendChild(i),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){var e=document.createElement("div");return e.className="content active",e.style.paddingLeft="5px",e},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s*active/g,"")},addTab:function(e,t){e.children[0].appendChild(t)}}),o.defaults.themes.foundation4=o.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var e=this._super();return e.style.fontSize=".6em",e},setGridColumnSize:function(e,t){e.className="columns large-"+t},getFormInputDescription:function(e){var t=this._super(e);return t.style.fontSize=".8rem",t},getFormInputLabel:function(e){var t=this._super(e);return t.style.fontWeight="bold",t}}),o.defaults.themes.foundation5=o.defaults.themes.foundation.extend({getFormInputDescription:function(e){var t=this._super(e);return t.style.fontSize=".8rem",t},setGridColumnSize:function(e,t){e.className="columns medium-"+t},getButton:function(e,t,i){var n=this._super(e,t,i);return n.className=n.className.replace(/\s*small/g,"")+" tiny",n},getTabHolder:function(){var e=document.createElement("div");return e.innerHTML="<dl class='tabs vertical'></dl><div class='tabs-content vertical'></div>",e},getTab:function(e){var t=document.createElement("dd"),i=document.createElement("a");return i.setAttribute("href","#"),i.appendChild(e),t.appendChild(i),t},getTabContentHolder:function(e){return e.children[1]},getTabContent:function(){var e=document.createElement("div");return e.className="content active",e.style.paddingLeft="5px",e},markTabActive:function(e){e.className+=" active"},markTabInactive:function(e){e.className=e.className.replace(/\s*active/g,"")},addTab:function(e,t){e.children[0].appendChild(t)}}),o.defaults.themes.foundation6=o.defaults.themes.foundation5.extend({getIndentedPanel:function(){var e=document.createElement("div");return e.className="callout secondary",e},getButtonHolder:function(){var e=document.createElement("div");return e.className="button-group tiny",e.style.marginBottom=0,e},getFormInputLabel:function(e){var t=this._super(e);return t.style.display="block",t},getFormControl:function(e,t,i){var n=document.createElement("div");return n.className="form-control",e&&n.appendChild(e),"checkbox"===t.type?e.insertBefore(t,e.firstChild):e?e.appendChild(t):n.appendChild(t),i&&e.appendChild(i),n},addInputError:function(e,t){if(e.group){if(e.group.className+=" error",e.errmsg)e.errmsg.style.display="",e.className="";else{var i=document.createElement("span");i.className="form-error is-visible",e.group.getElementsByTagName("label")[0].appendChild(i),e.className=e.className+" is-invalid-input",e.errmsg=i}e.errmsg.textContent=t}},removeInputError:function(e){e.errmsg&&(e.className=e.className.replace(/ is-invalid-input/g,""),e.errmsg.parentNode&&e.errmsg.parentNode.removeChild(e.errmsg))}}),o.defaults.themes.html=o.AbstractTheme.extend({getFormInputLabel:function(e){var t=this._super(e);return t.style.display="block",t.style.marginBottom="3px",t.style.fontWeight="bold",t},getFormInputDescription:function(e){var t=this._super(e);return t.style.fontSize=".8em",t.style.margin=0,t.style.display="inline-block",t.style.fontStyle="italic",t},getIndentedPanel:function(){var e=this._super();return e.style.border="1px solid #ddd",e.style.padding="5px",e.style.margin="5px",e.style.borderRadius="3px",e},getChildEditorHolder:function(){var e=this._super();return e.style.marginBottom="8px",e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.display="inline-block",e.style.marginLeft="10px",e.style.fontSize=".8em",e.style.verticalAlign="middle",e},getTable:function(){var e=this._super();return e.style.borderBottom="1px solid #ccc",e.style.marginBottom="5px",e},addInputError:function(e,t){if(e.style.borderColor="red",e.errmsg)e.errmsg.style.display="block";else{var i=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),e.errmsg.style=e.errmsg.style||{},e.errmsg.style.color="red",i.appendChild(e.errmsg)}e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t))},removeInputError:function(e){e.style.borderColor="",e.errmsg&&(e.errmsg.style.display="none")},getProgressBar:function(){var e=100,t=0,i=document.createElement("progress");return i.setAttribute("max",e),i.setAttribute("value",t),i},updateProgressBar:function(e,t){e&&e.setAttribute("value",t)},updateProgressBarUnknown:function(e){e&&e.removeAttribute("value")}}),o.defaults.themes.jqueryui=o.AbstractTheme.extend({getTable:function(){var e=this._super();return e.setAttribute("cellpadding",5),e.setAttribute("cellspacing",0),e},getTableHeaderCell:function(e){var t=this._super(e);return t.className="ui-state-active",t.style.fontWeight="bold",t},getTableCell:function(){var e=this._super();return e.className="ui-widget-content",e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e.style.marginLeft="10px",e.style.fontSize=".6em",e.style.display="inline-block",e},getFormInputDescription:function(e){var t=this.getDescription(e);return t.style.marginLeft="10px",t.style.display="inline-block",t},getFormControl:function(e,t,i){var n=this._super(e,t,i);return"checkbox"===t.type?(n.style.lineHeight="25px",n.style.padding="3px 0"):n.style.padding="4px 0 8px 0",n},getDescription:function(e){var t=document.createElement("span");return t.style.fontSize=".8em",t.style.fontStyle="italic",t.textContent=e,t},getButtonHolder:function(){var e=document.createElement("div");return e.className="ui-buttonset",e.style.fontSize=".7em",e},getFormInputLabel:function(e){var t=document.createElement("label");return t.style.fontWeight="bold",t.style.display="block",t.textContent=e,t},getButton:function(e,t,i){var n=document.createElement("button");n.className="ui-button ui-widget ui-state-default ui-corner-all",t&&!e?(n.className+=" ui-button-icon-only",t.className+=" ui-button-icon-primary ui-icon-primary",n.appendChild(t)):t?(n.className+=" ui-button-text-icon-primary",t.className+=" ui-button-icon-primary ui-icon-primary",n.appendChild(t)):n.className+=" ui-button-text-only";var r=document.createElement("span");return r.className="ui-button-text",r.textContent=e||i||".",n.appendChild(r),n.setAttribute("title",i),n},setButtonText:function(e,t,i,n){e.innerHTML="",e.className="ui-button ui-widget ui-state-default ui-corner-all",i&&!t?(e.className+=" ui-button-icon-only",i.className+=" ui-button-icon-primary ui-icon-primary",e.appendChild(i)):i?(e.className+=" ui-button-text-icon-primary",i.className+=" ui-button-icon-primary ui-icon-primary",e.appendChild(i)):e.className+=" ui-button-text-only";var r=document.createElement("span");r.className="ui-button-text",r.textContent=t||n||".",e.appendChild(r),e.setAttribute("title",n)},getIndentedPanel:function(){var e=document.createElement("div");return e.className="ui-widget-content ui-corner-all",e.style.padding="1em 1.4em",e.style.marginBottom="20px",e},afterInputReady:function(e){e.controls||(e.controls=this.closest(e,".form-control"))},addInputError:function(e,t){e.controls&&(e.errmsg?e.errmsg.style.display="":(e.errmsg=document.createElement("div"),e.errmsg.className="ui-state-error",e.controls.appendChild(e.errmsg)),e.errmsg.textContent=t)},removeInputError:function(e){e.errmsg&&(e.errmsg.style.display="none")},markTabActive:function(e){e.className=e.className.replace(/\s*ui-widget-header/g,"")+" ui-state-active"},markTabInactive:function(e){e.className=e.className.replace(/\s*ui-state-active/g,"")+" ui-widget-header"}}),o.defaults.themes.barebones=o.AbstractTheme.extend({getFormInputLabel:function(e){var t=this._super(e);return t},getFormInputDescription:function(e){var t=this._super(e);return t},getIndentedPanel:function(){var e=this._super();return e},getChildEditorHolder:function(){var e=this._super();return e},getHeaderButtonHolder:function(){var e=this.getButtonHolder();return e},getTable:function(){var e=this._super();return e},addInputError:function(e,t){if(e.errmsg)e.errmsg.style.display="block";else{var i=this.closest(e,".form-control");e.errmsg=document.createElement("div"),e.errmsg.setAttribute("class","errmsg"),i.appendChild(e.errmsg)}e.errmsg.innerHTML="",e.errmsg.appendChild(document.createTextNode(t))},removeInputError:function(e){e.style.borderColor="",e.errmsg&&(e.errmsg.style.display="none")},getProgressBar:function(){var e=100,t=0,i=document.createElement("progress");return i.setAttribute("max",e),i.setAttribute("value",t),i},updateProgressBar:function(e,t){e&&e.setAttribute("value",t)},updateProgressBarUnknown:function(e){e&&e.removeAttribute("value")}}),o.AbstractIconLib=e.extend({mapping:{collapse:"",expand:"","delete":"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(e){return this.mapping[e]?this.icon_prefix+this.mapping[e]:null},getIcon:function(e){var t=this.getIconClass(e);if(!t)return null;var i=document.createElement("i");return i.className=t,i}}),o.defaults.iconlibs.bootstrap2=o.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-up","delete":"trash",edit:"pencil",add:"plus",cancel:"ban-circle",save:"ok",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),o.defaults.iconlibs.bootstrap3=o.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"glyphicon glyphicon-"}),o.defaults.iconlibs.fontawesome3=o.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"ban-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),o.defaults.iconlibs.fontawesome4=o.AbstractIconLib.extend({mapping:{collapse:"caret-square-o-down",expand:"caret-square-o-right","delete":"times",edit:"pencil",add:"plus",cancel:"ban",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fa fa-"}),o.defaults.iconlibs.foundation2=o.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"remove",edit:"edit",add:"add-doc",cancel:"error",save:"checkmark",moveup:"up-arrow",movedown:"down-arrow"},icon_prefix:"foundicon-"}),o.defaults.iconlibs.foundation3=o.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"x",edit:"pencil",add:"page-add",cancel:"x-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fi-"}),o.defaults.iconlibs.jqueryui=o.AbstractIconLib.extend({mapping:{collapse:"triangle-1-s",expand:"triangle-1-e","delete":"trash",edit:"pencil",add:"plusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",movedown:"arrowthick-1-s"},icon_prefix:"ui-icon ui-icon-"}),o.defaults.templates["default"]=function(){return{compile:function(e){var t=e.match(/{{\s*([a-zA-Z0-9\-_ \.]+)\s*}}/g),i=t&&t.length;if(!i)return function(){return e};for(var n=[],r=function(e){var i,r=t[e].replace(/[{}]+/g,"").trim().split("."),o=r.length;if(o>1){var s;i=function(t){for(s=t,e=0;e<o&&(s=s[r[e]],s);e++);return s}}else r=r[0],i=function(e){return e[r]};n.push({s:t[e],r:i})},o=0;o<i;o++)r(o);return function(t){var r,s=e+"";for(o=0;o<i;o++)r=n[o],s=s.replace(r.s,r.r(t));return s}}}},o.defaults.templates.ejs=function(){return!!window.EJS&&{compile:function(e){var t=new window.EJS({text:e});return function(e){return t.render(e)}}}},o.defaults.templates.handlebars=function(){return window.Handlebars},o.defaults.templates.hogan=function(){return!!window.Hogan&&{compile:function(e){var t=window.Hogan.compile(e);return function(e){return t.render(e)}}}},o.defaults.templates.markup=function(){return!(!window.Mark||!window.Mark.up)&&{compile:function(e){return function(t){return window.Mark.up(e,t)}}}},o.defaults.templates.mustache=function(){return!!window.Mustache&&{compile:function(e){return function(t){return window.Mustache.render(e,t)}}}},o.defaults.templates.swig=function(){return window.swig},o.defaults.templates.underscore=function(){return!!window._&&{compile:function(e){return function(t){return window._.template(e,t)}}}},o.defaults.theme="html",o.defaults.template="default",o.defaults.options={},o.defaults.translate=function(e,t){var i=o.defaults.languages[o.defaults.language];if(!i)throw"Unknown language "+o.defaults.language;var n=i[e]||o.defaults.languages[o.defaults.default_language][e];if("undefined"==typeof n)throw"Unknown translate string "+e;if(t)for(var r=0;r<t.length;r++)n=n.replace(new RegExp("\\{\\{"+r+"}}","g"),t[r]);return n},o.defaults.default_language="en",o.defaults.language=o.defaults.default_language,o.defaults.languages.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_collapse:"Collapse",button_expand:"Expand"},o.defaults.languages.ru={error_notset:"Значение должно быть указано",error_notempty:"Должно быть заполнено",error_enum:"Значение должно быть одним из списка",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Значение должно быть типа {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}",
button_delete_all:"Все",button_delete_all_title:"Удалить все",button_delete_last:"Последн(его/юю) {{0}}",button_delete_last_title:"Удалить последн(его/юю) {{0}}",button_add_row_title:"Добавить {{0}}",button_move_down_title:"Вниз",button_move_up_title:"Вверх",button_delete_row_title:"Удалить {{0}}",button_delete_row_title_short:"Удалить",button_collapse:"Свернуть",button_expand:"Развернуть"},o.plugins={ace:{theme:""},epiceditor:{},sceditor:{},select2:{},selectize:{}},n(o.defaults.editors,function(e,t){o.defaults.editors[e].options=t.options||{}}),o.defaults.resolvers.unshift(function(e){if("string"!=typeof e.type)return"multiple"}),o.defaults.resolvers.unshift(function(e){if(!e.type&&e.properties)return"object"}),o.defaults.resolvers.unshift(function(e){if("string"==typeof e.type)return e.type}),o.defaults.resolvers.unshift(function(e){if("boolean"===e.type)return"checkbox"===e.format||e.options&&e.options.checkbox?"checkbox":o.plugins.selectize.enable?"selectize":"select"}),o.defaults.resolvers.unshift(function(e){if("any"===e.type)return"multiple"}),o.defaults.resolvers.unshift(function(e){if("string"===e.type&&e.media&&"base64"===e.media.binaryEncoding)return"base64"}),o.defaults.resolvers.unshift(function(e){if("string"===e.type&&"url"===e.format&&e.options&&e.options.upload===!0&&window.FileReader)return"upload"}),o.defaults.resolvers.unshift(function(e){if("array"==e.type&&"table"==e.format)return"table"}),o.defaults.resolvers.unshift(function(e){if(e.enumSource)return o.plugins.selectize.enable?"selectize":"select"}),o.defaults.resolvers.unshift(function(e){if(e["enum"]){if("array"===e.type||"object"===e.type)return"enum";if("number"===e.type||"integer"===e.type||"string"===e.type)return o.plugins.selectize.enable?"selectize":"select"}}),o.defaults.resolvers.unshift(function(e){if("array"===e.type&&e.items&&!Array.isArray(e.items)&&e.uniqueItems&&["string","number","integer"].indexOf(e.items.type)>=0){if(e.items["enum"])return"multiselect";if(o.plugins.selectize.enable&&"string"===e.items.type)return"arraySelectize"}}),o.defaults.resolvers.unshift(function(e){if(e.oneOf||e.anyOf)return"multiple"}),function(){if(window.jQuery||window.Zepto){var e=window.jQuery||window.Zepto;e.jsoneditor=o.defaults,e.fn.jsoneditor=function(e){var t=this,i=this.data("jsoneditor");if("value"===e){if(!i)throw"Must initialize jsoneditor before getting/setting the value";if(!(arguments.length>1))return i.getValue();i.setValue(arguments[1])}else{if("validate"===e){if(!i)throw"Must initialize jsoneditor before validating";return arguments.length>1?i.validate(arguments[1]):i.validate()}"destroy"===e?i&&(i.destroy(),this.data("jsoneditor",null)):(i&&i.destroy(),i=new o(this.get(0),e),this.data("jsoneditor",i),i.on("change",function(){t.trigger("change")}),i.on("ready",function(){t.trigger("ready")}))}return this}}}(),window.JSONEditor=o}();var schema={type:"array",format:"tabs",title:" ",items:{id:"collection",$ref:"/data/schemas/collection.json"}};JSONEditor.plugins.sceditor={toolbar:"bold,italic,underline,maximize",emoticonsEnabled:!1};var editor=new JSONEditor(document.getElementById("editor_holder"),{ajax:!0,schema:schema,theme:"bootstrap3",disable_edit_json:!1,disable_properties:!1,expand_height:!0});JSONEditor.defaults.language="ru";var confirmAction=function(e,t){var i=confirm(e);1==i&&t()},upload=function(e,t){$.post("/admin/savefile.php",{json:JSON.stringify(e.getValue()),publish:t}).done(function(){alert("Сохранено")}).fail(function(){alert("Ошибка!")})},publishButtons=document.getElementsByClassName("admin-publish");Array.prototype.forEach.call(publishButtons,function(e){e.addEventListener("click",function(){confirmAction("Опубликовать?",function(){upload(editor,!0)})})});var saveButtons=document.getElementsByClassName("admin-save-template");Array.prototype.forEach.call(saveButtons,function(e){e.addEventListener("click",function(){upload(editor,!1)})}),editor.on("ready",function(){$.get("/data/data.json").done(function(e){editor.setValue(e)})});